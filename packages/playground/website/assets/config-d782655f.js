const Dr=function(){return typeof process<"u"&&process.release?.name==="node"?"NODE":typeof window<"u"?"WEB":typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?"WORKER":"NODE"}();if(Dr==="NODE"){let r=function(o){return new Promise(function(p,l){o.onload=o.onerror=function(i){o.onload=o.onerror=null,i.type==="load"?p(o.result):l(new Error("Failed to read the blob/file"))}})},t=function(){const o=new Uint8Array([1,2,3,4]),l=new File([o],"test").stream();try{return l.getReader({mode:"byob"}),!0}catch{return!1}};if(typeof File>"u"){class o extends Blob{constructor(l,i,e){super(l);let u;e?.lastModified&&(u=new Date),(!u||isNaN(u.getFullYear()))&&(u=new Date),this.lastModifiedDate=u,this.lastModified=u.getMilliseconds(),this.name=i||""}}global.File=o}typeof Blob.prototype.arrayBuffer>"u"&&(Blob.prototype.arrayBuffer=function(){const p=new FileReader;return p.readAsArrayBuffer(this),r(p)}),typeof Blob.prototype.text>"u"&&(Blob.prototype.text=function(){const p=new FileReader;return p.readAsText(this),r(p)}),(typeof Blob.prototype.stream>"u"||!t())&&(Blob.prototype.stream=function(){let o=0;const p=this;return new ReadableStream({type:"bytes",autoAllocateChunkSize:512*1024,async pull(l){const i=l.byobRequest.view,u=await p.slice(o,o+i.byteLength).arrayBuffer(),g=new Uint8Array(u);new Uint8Array(i.buffer).set(g);const A=g.byteLength;l.byobRequest.respond(A),o+=A,o>=p.size&&l.close()}})})}if(Dr==="NODE"&&typeof CustomEvent>"u"){class r extends Event{constructor(o,p={}){super(o,p),this.detail=p.detail}initCustomEvent(){}}globalThis.CustomEvent=r}const rr={0:"No error occurred. System call completed successfully.",1:"Argument list too long.",2:"Permission denied.",3:"Address in use.",4:"Address not available.",5:"Address family not supported.",6:"Resource unavailable, or operation would block.",7:"Connection already in progress.",8:"Bad file descriptor.",9:"Bad message.",10:"Device or resource busy.",11:"Operation canceled.",12:"No child processes.",13:"Connection aborted.",14:"Connection refused.",15:"Connection reset.",16:"Resource deadlock would occur.",17:"Destination address required.",18:"Mathematics argument out of domain of function.",19:"Reserved.",20:"File exists.",21:"Bad address.",22:"File too large.",23:"Host is unreachable.",24:"Identifier removed.",25:"Illegal byte sequence.",26:"Operation in progress.",27:"Interrupted function.",28:"Invalid argument.",29:"I/O error.",30:"Socket is connected.",31:"There is a directory under that path.",32:"Too many levels of symbolic links.",33:"File descriptor value too large.",34:"Too many links.",35:"Message too large.",36:"Reserved.",37:"Filename too long.",38:"Network is down.",39:"Connection aborted by network.",40:"Network unreachable.",41:"Too many files open in system.",42:"No buffer space available.",43:"No such device.",44:"There is no such file or directory OR the parent directory does not exist.",45:"Executable file format error.",46:"No locks available.",47:"Reserved.",48:"Not enough space.",49:"No message of the desired type.",50:"Protocol not available.",51:"No space left on device.",52:"Function not supported.",53:"The socket is not connected.",54:"Not a directory or a symbolic link to a directory.",55:"Directory not empty.",56:"State not recoverable.",57:"Not a socket.",58:"Not supported, or operation not supported on socket.",59:"Inappropriate I/O control operation.",60:"No such device or address.",61:"Value too large to be stored in data type.",62:"Previous owner died.",63:"Operation not permitted.",64:"Broken pipe.",65:"Protocol error.",66:"Protocol not supported.",67:"Protocol wrong type for socket.",68:"Result too large.",69:"Read-only file system.",70:"Invalid seek.",71:"No such process.",72:"Reserved.",73:"Connection timed out.",74:"Text file busy.",75:"Cross-device link.",76:"Extension: Capabilities insufficient."};function ct(r){const t=typeof r=="object"?r?.errno:null;if(t in rr)return rr[t]}function ge(r=""){return function(o,p,l){const i=l.value;l.value=function(...e){try{return i.apply(this,e)}catch(u){const g=typeof u=="object"?u?.errno:null;if(g in rr){const A=rr[g],q=typeof e[1]=="string"?e[1]:null,m=q!==null?r.replaceAll("{path}",q):r;throw new Error(`${m}: ${A}`,{cause:u})}throw u}}}}const mt="playground-log",qr=(r,...t)=>{ae.dispatchEvent(new CustomEvent(mt,{detail:{log:r,args:t}}))},yt=(r,...t)=>{switch(typeof r.message=="string"?Reflect.set(r,"message",br(r.message)):r.message.message&&typeof r.message.message=="string"&&Reflect.set(r.message,"message",br(r.message.message)),r.severity){case"Debug":console.debug(r.message,...t);break;case"Info":console.info(r.message,...t);break;case"Warn":console.warn(r.message,...t);break;case"Error":console.error(r.message,...t);break;case"Fatal":console.error(r.message,...t);break;default:console.log(r.message,...t)}},ht=r=>r instanceof Error?[r.message,r.stack].join(`
`):JSON.stringify(r,null,2),Wr=[],Rr=r=>{Wr.push(r)},gr=r=>{if(r.raw===!0)Rr(r.message);else{const t=Pt(typeof r.message=="object"?ht(r.message):r.message,r.severity??"Info",r.prefix??"JavaScript");Rr(t)}};let dr=0;const Lr="/wordpress/wp-content/debug.log",gt=async r=>await r.fileExists(Lr)?await r.readFileAsText(Lr):"",bt=(r,t)=>{t.addEventListener("request.end",async()=>{const o=await gt(t);if(o.length>dr){const p=o.substring(dr);r.logMessage({message:p,raw:!0}),dr=o.length}}),t.addEventListener("request.error",o=>{o=o,o.error&&(r.logMessage({message:`${o.error.message} ${o.error.stack}`,severity:"Fatal",prefix:o.source==="request"?"PHP":"WASM Crash"}),r.dispatchEvent(new CustomEvent(r.fatalErrorEvent,{detail:{logs:r.getLogs(),source:o.source}})))})};class wt extends EventTarget{constructor(t=[]){super(),this.handlers=t,this.fatalErrorEvent="playground-fatal-error"}getLogs(){return this.handlers.includes(gr)?[...Wr]:(this.error(`Logs aren't stored because the logToMemory handler isn't registered.
				If you're using a custom logger instance, make sure to register logToMemory handler.
			`),[])}logMessage(t,...o){for(const p of this.handlers)p(t,...o)}log(t,...o){this.logMessage({message:t,severity:void 0,prefix:"JavaScript",raw:!1},...o)}debug(t,...o){this.logMessage({message:t,severity:"Debug",prefix:"JavaScript",raw:!1},...o)}info(t,...o){this.logMessage({message:t,severity:"Info",prefix:"JavaScript",raw:!1},...o)}warn(t,...o){this.logMessage({message:t,severity:"Warn",prefix:"JavaScript",raw:!1},...o)}error(t,...o){this.logMessage({message:t,severity:"Error",prefix:"JavaScript",raw:!1},...o)}}const vt=()=>{try{if(process.env.NODE_ENV==="test")return[gr,qr]}catch{}return[gr,yt,qr]},ae=new wt(vt()),br=r=>r.replace(/\t/g,""),Pt=(r,t,o)=>{const p=new Date,l=new Intl.DateTimeFormat("en-GB",{year:"numeric",month:"short",day:"2-digit",timeZone:"UTC"}).format(p).replace(/ /g,"-"),i=new Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZone:"UTC",timeZoneName:"short"}).format(p),e=l+" "+i;return r=br(r),`[${e}] ${o} ${t}: ${r}`},Xs=(r,t)=>{r.addEventListener(r.fatalErrorEvent,t)},Mr=Symbol("SleepFinished");function _t(r){return new Promise(t=>{setTimeout(()=>t(Mr),r)})}class kt extends Error{constructor(){super("Acquiring lock timed out")}}class Ot{constructor({concurrency:t,timeout:o}){this._running=0,this.concurrency=t,this.timeout=o,this.queue=[]}get remaining(){return this.concurrency-this.running}get running(){return this._running}async acquire(){for(;;)if(this._running>=this.concurrency){const t=new Promise(o=>{this.queue.push(o)});this.timeout!==void 0?await Promise.race([t,_t(this.timeout)]).then(o=>{if(o===Mr)throw new kt}):await t}else{this._running++;let t=!1;return()=>{t||(t=!0,this._running--,this.queue.length>0&&this.queue.shift()())}}}async run(t){const o=await this.acquire();try{return await t()}finally{o()}}}function se(...r){function t(i){return i.substring(i.length-1)==="/"}let o=r.join("/");const p=o[0]==="/",l=t(o);return o=_r(o),!o&&!p&&(o="."),o&&l&&!t(o)&&(o+="/"),o}function Br(r){if(r==="/")return"/";r=_r(r);const t=r.lastIndexOf("/");return t===-1?"":t===0?"/":r.substr(0,t)}function ei(r){if(r==="/")return"/";r=_r(r);const t=r.lastIndexOf("/");return t===-1?r:r.substr(t+1)}function _r(r){const t=r[0]==="/";return r=Et(r.split("/").filter(o=>!!o),!t).join("/"),(t?"/":"")+r.replace(/\/$/,"")}function Et(r,t){let o=0;for(let p=r.length-1;p>=0;p--){const l=r[p];l==="."?r.splice(p,1):l===".."?(r.splice(p,1),o++):o&&(r.splice(p,1),o--)}if(t)for(;o;o--)r.unshift("..");return r}function Ur(r=36,t="!@#$%^&*()_+=-[]/.,<>?"){const o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"+t;let p="";for(let l=r;l>0;--l)p+=o[Math.floor(Math.random()*o.length)];return p}function $t(){return Ur(36,"-_")}function ie(r){return`json_decode(base64_decode('${Tt(JSON.stringify(r))}'), true)`}function ar(r){const t={};for(const o in r)t[o]=ie(r[o]);return t}function Tt(r){return jt(new TextEncoder().encode(r))}function jt(r){const t=String.fromCodePoint(...r);return btoa(t)}var At=Object.defineProperty,qt=Object.getOwnPropertyDescriptor,be=(r,t,o,p)=>{for(var l=p>1?void 0:p?qt(t,o):t,i=r.length-1,e;i>=0;i--)(e=r[i])&&(l=(p?e(t,o,l):e(l))||l);return p&&l&&At(t,o,l),l};const we=class pe{static readFileAsText(t,o){return new TextDecoder().decode(pe.readFileAsBuffer(t,o))}static readFileAsBuffer(t,o){return t.readFile(o)}static writeFile(t,o,p){t.writeFile(o,p)}static unlink(t,o){t.unlink(o)}static mv(t,o,p){try{const l=t.lookupPath(o).node.mount,i=pe.fileExists(t,p)?t.lookupPath(p).node.mount:t.lookupPath(Br(p)).node.mount;l.mountpoint!==i.mountpoint?(pe.copyRecursive(t,o,p),pe.rmdir(t,o,{recursive:!0})):t.rename(o,p)}catch(l){const i=ct(l);throw i?new Error(`Could not move ${o} to ${p}: ${i}`,{cause:l}):l}}static rmdir(t,o,p={recursive:!0}){p?.recursive&&pe.listFiles(t,o).forEach(l=>{const i=`${o}/${l}`;pe.isDir(t,i)?pe.rmdir(t,i,p):pe.unlink(t,i)}),t.rmdir(o)}static listFiles(t,o,p={prependPath:!1}){if(!pe.fileExists(t,o))return[];try{const l=t.readdir(o).filter(i=>i!=="."&&i!=="..");if(p.prependPath){const i=o.replace(/\/$/,"");return l.map(e=>`${i}/${e}`)}return l}catch(l){return ae.error(l,{path:o}),[]}}static isDir(t,o){return pe.fileExists(t,o)?t.isDir(t.lookupPath(o,{follow:!0}).node.mode):!1}static isFile(t,o){return pe.fileExists(t,o)?t.isFile(t.lookupPath(o,{follow:!0}).node.mode):!1}static symlink(t,o,p){return t.symlink(o,p)}static isSymlink(t,o){return pe.fileExists(t,o)?t.isLink(t.lookupPath(o).node.mode):!1}static readlink(t,o){return t.readlink(o)}static realpath(t,o){return t.lookupPath(o,{follow:!0}).path}static fileExists(t,o){try{return t.lookupPath(o),!0}catch{return!1}}static mkdir(t,o){t.mkdirTree(o)}static copyRecursive(t,o,p){const l=t.lookupPath(o).node;if(t.isDir(l.mode)){t.mkdirTree(p);const i=t.readdir(o).filter(e=>e!=="."&&e!=="..");for(const e of i)pe.copyRecursive(t,se(o,e),se(p,e))}else t.writeFile(p,t.readFile(o))}};be([ge('Could not read "{path}"')],we,"readFileAsText",1);be([ge('Could not read "{path}"')],we,"readFileAsBuffer",1);be([ge('Could not write to "{path}"')],we,"writeFile",1);be([ge('Could not unlink "{path}"')],we,"unlink",1);be([ge('Could not remove directory "{path}"')],we,"rmdir",1);be([ge('Could not list files in "{path}"')],we,"listFiles",1);be([ge('Could not stat "{path}"')],we,"isDir",1);be([ge('Could not stat "{path}"')],we,"isFile",1);be([ge('Could not stat "{path}"')],we,"realpath",1);be([ge('Could not stat "{path}"')],we,"fileExists",1);be([ge('Could not create directory "{path}"')],we,"mkdir",1);be([ge('Could not copy files from "{path}"')],we,"copyRecursive",1);const Rt={500:"Internal Server Error",502:"Bad Gateway",404:"Not Found",403:"Forbidden",401:"Unauthorized",400:"Bad Request",301:"Moved Permanently",302:"Found",307:"Temporary Redirect",308:"Permanent Redirect",204:"No Content",201:"Created",200:"OK"};class tr{constructor(t,o,p,l="",i=0){this.httpStatusCode=t,this.headers=o,this.bytes=p,this.exitCode=i,this.errors=l}static forHttpCode(t,o=""){return new tr(t,{},new TextEncoder().encode(o||Rt[t]||""))}static fromRawData(t){return new tr(t.httpStatusCode,t.headers,t.bytes,t.errors,t.exitCode)}toRawData(){return{headers:this.headers,bytes:this.bytes,errors:this.errors,exitCode:this.exitCode,httpStatusCode:this.httpStatusCode}}get json(){return JSON.parse(this.text)}get text(){return new TextDecoder().decode(this.bytes)}}(function(){return typeof process<"u"&&process.release?.name==="node"?"NODE":typeof window<"u"?"WEB":typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?"WORKER":"NODE"})();ReadableStream.prototype[Symbol.asyncIterator]||(ReadableStream.prototype[Symbol.asyncIterator]=async function*(){const r=this.getReader();try{for(;;){const{done:t,value:o}=await r.read();if(t)return;yield o}}finally{r.releaseLock()}},ReadableStream.prototype.iterate=ReadableStream.prototype[Symbol.asyncIterator]);const kr=["8.3","8.2","8.1","8.0","7.4","7.3","7.2","7.1","7.0"],Lt=kr[0],ri=kr,zr=["iconv","mbstring","xml-bundle","gd"],Sr={"kitchen-sink":zr,light:[]},Vr=["db.php","plugins/akismet","plugins/hello.php","plugins/wordpress-importer","mu-plugins/sqlite-database-integration","mu-plugins/playground-includes","mu-plugins/0-playground.php","mu-plugins/0-sqlite.php","themes/twentytwenty","themes/twentytwentyone","themes/twentytwentytwo","themes/twentytwentythree","themes/twentytwentyfour","themes/twentytwentyfive","themes/twentytwentysix"],Or=async(r,{pluginPath:t,pluginName:o},p)=>{p?.tracker.setCaption(`Activating ${o||t}`);const l=await r.documentRoot,i=await r.run({code:`<?php
			define( 'WP_ADMIN', true );
			require_once( ${ie(l)}. "/wp-load.php" );
			require_once( ${ie(l)}. "/wp-admin/includes/plugin.php" );

			// Set current user to admin
			wp_set_current_user( get_users(array('role' => 'Administrator') )[0]->ID );

			$plugin_path = ${ie(t)};
			$response = false;
			if (!is_dir($plugin_path)) {
				$response = activate_plugin($plugin_path);
			}

			// Activate plugin by name if activation by path wasn't successful
			if ( null !== $response ) {
				foreach ( ( glob( $plugin_path . '/*.php' ) ?: array() ) as $file ) {
					$info = get_plugin_data( $file, false, false );
					if ( ! empty( $info['Name'] ) ) {
						$response = activate_plugin( $file );
						break;
					}
				}
			}

			if ( null === $response ) {
				die('Plugin activated successfully');
			} else if ( is_wp_error( $response ) ) {
				throw new Exception( $response->get_error_message() );
			}

			throw new Exception( 'Unable to activate plugin' );
		`});if(i.text!=="Plugin activated successfully")throw ae.debug(i),new Error(`Plugin ${t} could not be activated – WordPress exited with no error. Sometimes, when $_SERVER or site options are not configured correctly, WordPress exits early with a 301 redirect. Inspect the "debug" logs in the console for more details`)},Hr=async(r,{themeFolderName:t},o)=>{o?.tracker.setCaption(`Activating ${t}`);const p=await r.documentRoot,l=`${p}/wp-content/themes/${t}`;if(!await r.fileExists(l))throw new Error(`
			Couldn't activate theme ${t}.
			Theme not found at the provided theme path: ${l}.
			Check the theme path to ensure it's correct.
			If the theme is not installed, you can install it using the installTheme step.
			More info can be found in the Blueprint documentation: https://wordpress.github.io/wordpress-playground/blueprints/steps/#ActivateThemeStep
		`);const i=await r.run({code:`<?php
			define( 'WP_ADMIN', true );
			require_once( getenv('docroot') . "/wp-load.php" );

			// Set current user to admin
			wp_set_current_user( get_users(array('role' => 'Administrator') )[0]->ID );

			switch_theme( getenv('themeFolderName') );

			if( wp_get_theme()->get_stylesheet() !== getenv('themeFolderName') ) {
				throw new Exception( 'Theme ' . getenv('themeFolderName') . ' could not be activated.' );				
			}
			die('Theme activated successfully');
		`,env:{docroot:p,themeFolderName:t}});if(i.text!=="Theme activated successfully")throw ae.debug(i),new Error(`Theme ${t} could not be activated – WordPress exited with no error. Sometimes, when $_SERVER or site options are not configured correctly, WordPress exits early with a 301 redirect. Inspect the "debug" logs in the console for more details`)},St=async(r,{code:t})=>await r.run({code:t}),xt=async(r,{options:t})=>await r.run(t),Gr=async(r,{path:t})=>{await r.unlink(t)},Nt=async(r,{sql:t},o)=>{o?.tracker.setCaption("Executing SQL Queries");const p=`/tmp/${$t()}.sql`;await r.writeFile(p,new Uint8Array(await t.arrayBuffer()));const l=await r.documentRoot,i=ar({docroot:l,sqlFilename:p}),e=await r.run({code:`<?php
		require_once ${i.docroot} . '/wp-load.php';

		$handle = fopen(${i.sqlFilename}, 'r');
		$buffer = '';

		global $wpdb;

		while ($bytes = fgets($handle)) {
			$buffer .= $bytes;

			if (!feof($handle) && substr($buffer, -1, 1) !== "
") {
				continue;
			}

			$wpdb->query($buffer);
			$buffer = '';
		}
	`});return await Gr(r,{path:p}),e},wr=async(r,{request:t})=>{ae.warn('Deprecated: The Blueprint step "request" is deprecated and will be removed in a future release.');const o=await r.request(t);if(o.httpStatusCode>399||o.httpStatusCode<200)throw ae.warn("WordPress response was",{response:o}),new Error(`Request failed with status ${o.httpStatusCode}`);return o},Ft=`<?php

/**
 * Rewrites the wp-config.php file to ensure specific constants are defined
 * with specific values.
 * 
 * Example:
 * 
 * \`\`\`php
 * <?php
 * define('WP_DEBUG', true);
 * // The third define() argument is also supported:
 * define('SAVEQUERIES', false, true);
 * 
 * // Expression
 * define(true ? 'WP_DEBUG_LOG' : 'WP_DEBUG_LOG', 123);
 * 
 * // Guarded expressions shouldn't be wrapped twice
 * if(!defined(1 ? 'A' : 'B')) {
 *     define(1 ? 'A' : 'B', 0);
 * }
 * 
 * // More advanced expression
 * define((function() use($x) {
 *     return [$x, 'a'];
 * })(), 123);
 * \`\`\`
 * 
 * Rewritten with
 * 
 *     $constants = [
 *        'WP_DEBUG' => false,
 *        'WP_DEBUG_LOG' => true,
 *        'SAVEQUERIES' => true,
 *        'NEW_CONSTANT' => "new constant",
 *     ];
 * 
 * \`\`\`php
 * <?php
 * define('WP_DEBUG_LOG',true);
 * define('NEW_CONSTANT','new constant');
 * ?><?php
 * define('WP_DEBUG',false);
 * // The third define() argument is also supported:
 * define('SAVEQUERIES',true, true);
 * 
 * // Expression
 * if(!defined($const ? 'WP_DEBUG_LOG' : 'WP_DEBUG_LOG')) {
 *      define($const ? 'WP_DEBUG_LOG' : 'WP_DEBUG_LOG', 123);
 * }
 * 
 * // Guarded expressions shouldn't be wrapped twice
 * if(!defined(1 ? 'A' : 'B')) {
 *     define(1 ? 'A' : 'B', 0);
 * }
 * 
 * // More advanced expression
 * if(!defined((function() use($x) {
 *    return [$x, 'a'];
 * })())) {
 *     define((function() use($x) {
 *         return [$x, 'a'];
 *     })(), 123);
 * }
 * \`\`\`
 * 
 * @param mixed $content
 * @return string
 */
function rewrite_wp_config_to_define_constants($content, $constants = [])
{
    $tokens = array_reverse(token_get_all($content));
    $output = [];
    $defined_expressions = [];

    // Look through all the tokens and find the define calls
    do {
        $buffer = [];
        $name_buffer = [];
        $value_buffer = [];
        $third_arg_buffer = [];

        // Capture everything until the define call into output.
        // Capturing the define call into a buffer.
        // Example:
        //     <?php echo 'a'; define  (
        //     ^^^^^^^^^^^^^^^^^^^^^^
        //           output   |buffer
        while ($token = array_pop($tokens)) {
            if (is_array($token) && $token[0] === T_STRING && (strtolower($token[1]) === 'define' || strtolower($token[1]) === 'defined')) {
                $buffer[] = $token;
                break;
            }
            $output[] = $token;
        }

        // Maybe we didn't find a define call and reached the end of the file?
        if (!count($tokens)) {
            break;
        }

        // Keep track of the "defined" expressions that are already accounted for
        if($token[1] === 'defined') {
            $output[] = $token;
            $defined_expression = [];
            $open_parenthesis = 0;
            // Capture everything up to the opening parenthesis, including the parenthesis
            // e.g. defined  (
            //           ^^^^
            while ($token = array_pop($tokens)) {
                $output[] = $token;
                if ($token === "(") {
                    ++$open_parenthesis;
                    break;
                }
            }

            // Capture everything up to the closing parenthesis, including the parenthesis
            // e.g. defined  (
            //           ^^^^
            while ($token = array_pop($tokens)) {
                $output[] = $token;
                if ($token === ")") {
                    --$open_parenthesis;
                }
                if ($open_parenthesis === 0) {
                    break;
                }
                $defined_expression[] = $token;
            }

            $defined_expressions[] = stringify_tokens(skip_whitespace($defined_expression));
            continue;
        }

        // Capture everything up to the opening parenthesis, including the parenthesis
        // e.g. define  (
        //           ^^^^
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === "(") {
                break;
            }
        }

        // Capture the first argument – it's the first expression after the opening
        // parenthesis and before the comma:
        // Examples:
        //     define("WP_DEBUG", true);
        //            ^^^^^^^^^^^
        //
        //     define(count([1,2]) > 2 ? 'WP_DEBUG' : 'FOO', true);
        //            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        $open_parenthesis = 0;
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === "(" || $token === "[" || $token === "{") {
                ++$open_parenthesis;
            } elseif ($token === ")" || $token === "]" || $token === "}") {
                --$open_parenthesis;
            } elseif ($token === "," && $open_parenthesis === 0) {
                break;
            }

            // Don't capture the comma as a part of the constant name
            $name_buffer[] = $token;
        }

        // Capture everything until the closing parenthesis
        //     define("WP_DEBUG", true);
        //                       ^^^^^^
        $open_parenthesis = 0;
        $is_second_argument = true;
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === ")" && $open_parenthesis === 0) {
                // Final parenthesis of the define call.
                break;
            } else if ($token === "(" || $token === "[" || $token === "{") {
                ++$open_parenthesis;
            } elseif ($token === ")" || $token === "]" || $token === "}") {
                --$open_parenthesis;
            } elseif ($token === "," && $open_parenthesis === 0) {
                // This define call has more than 2 arguments! The third one is the
                // boolean value indicating $is_case_insensitive. Let's continue capturing
                // to $third_arg_buffer.
                $is_second_argument = false;
            }
            if ($is_second_argument) {
                $value_buffer[] = $token;
            } else {
                $third_arg_buffer[] = $token;
            }
        }

        // Capture until the semicolon
        //     define("WP_DEBUG", true)  ;
        //                             ^^^
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === ";") {
                break;
            }
        }

        // Decide whether $name_buffer is a constant name or an expression
        $name_token = null;
        $name_token_index = $token;
        $name_is_literal = true;
        foreach ($name_buffer as $k => $token) {
            if (is_array($token)) {
                if ($token[0] === T_WHITESPACE || $token[0] === T_COMMENT || $token[0] === T_DOC_COMMENT) {
                    continue;
                } else if ($token[0] === T_STRING || $token[0] === T_CONSTANT_ENCAPSED_STRING) {
                    $name_token = $token;
                    $name_token_index = $k;
                } else {
                    $name_is_literal = false;
                    break;
                }
            } else if ($token !== "(" && $token !== ")") {
                $name_is_literal = false;
                break;
            }
        }

        // We can't handle expressions as constant names. Let's wrap that define
        // call in an if(!defined()) statement, just in case it collides with
        // a constant name.
        if (!$name_is_literal) {
            // Ensure the defined expression is not already accounted for
            foreach ($defined_expressions as $defined_expression) {
                if ($defined_expression === stringify_tokens(skip_whitespace($name_buffer))) {
                    $output = array_merge($output, $buffer);
                    continue 2;
                }
            }
            $output = array_merge(
                $output,
                ["if(!defined("],
                $name_buffer,
                [")) {\\n     "],
                ['define('],
                $name_buffer,
                [','],
                $value_buffer,
                $third_arg_buffer,
                [");"],
                ["\\n}\\n"]
            );
            continue;
        }

        // Yay, we have a literal constant name in the buffer now. Let's
        // get its value:
        $name = eval('return ' . $name_token[1] . ';');

        // If the constant name is not in the list of constants we're looking,
        // we can ignore it.
        if (!array_key_exists($name, $constants)) {
            $output = array_merge($output, $buffer);
            continue;
        }

        // We now have a define() call that defines a constant we're looking for.
        // Let's rewrite its value to the one 
        $output = array_merge(
            $output,
            ['define('],
            $name_buffer,
            [','],
            [var_export($constants[$name], true)],
            $third_arg_buffer,
            [");"]
        );

        // Remove the constant from the list so we can process any remaining
        // constants later.
        unset($constants[$name]);
    } while (count($tokens));

    // Add any constants that weren't found in the file
    if (count($constants)) {
        $prepend = [
            "<?php \\n"
        ];
        foreach ($constants as $name => $value) {
            $prepend = array_merge(
                $prepend,
                [
                    "define(",
                    var_export($name, true),
                    ',',
                    var_export($value, true),
                    ");\\n"
                ]
            );
        }
        $prepend[] = "?>";
        $output = array_merge(
            $prepend,
            $output
        );
    }

    // Translate the output tokens back into a string
    return stringify_tokens($output);
}

function stringify_tokens($tokens) {
    $output = '';
    foreach ($tokens as $token) {
        if (is_array($token)) {
            $output .= $token[1];
        } else {
            $output .= $token;
        }
    }
    return $output;
}

function skip_whitespace($tokens) {
    $output = [];
    foreach ($tokens as $token) {
        if (is_array($token) && ($token[0] === T_WHITESPACE || $token[0] === T_COMMENT || $token[0] === T_DOC_COMMENT)) {
            continue;
        }
        $output[] = $token;
    }
    return $output;
}
`,sr=async(r,{consts:t,method:o="define-before-run"})=>{switch(o){case"define-before-run":await Ct(r,t);break;case"rewrite-wp-config":{const p=await r.documentRoot,l=se(p,"/wp-config.php"),i=await r.readFileAsText(l),e=await It(r,i,t);await r.writeFile(l,e);break}default:throw new Error(`Invalid method: ${o}`)}};async function Ct(r,t){for(const o in t)await r.defineConstant(o,t[o])}async function It(r,t,o){await r.writeFile("/tmp/code.php",t);const p=ar({consts:o});return await r.run({code:`${Ft}
	$wp_config_path = '/tmp/code.php';
	$wp_config = file_get_contents($wp_config_path);
	$new_wp_config = rewrite_wp_config_to_define_constants($wp_config, ${p.consts});
	file_put_contents($wp_config_path, $new_wp_config);
	`}),await r.readFileAsText("/tmp/code.php")}const vr=async(r,{username:t="admin",password:o="password"}={},p)=>{p?.tracker.setCaption(p?.initialCaption||"Logging in"),await r.request({url:"/wp-login.php"});const l=await r.request({url:"/wp-login.php",method:"POST",body:{log:t,pwd:o,rememberme:"forever"}});if(!l.headers?.location?.[0]?.includes("/wp-admin/"))throw ae.warn("WordPress response was",{response:l,text:l.text}),new Error(`Failed to log in as ${t} with password ${o}`)},Yr=async(r,{options:t})=>{const o=await r.documentRoot;await r.run({code:`<?php
		include ${ie(o)} . '/wp-load.php';
		$site_options = ${ie(t)};
		foreach($site_options as $name => $value) {
			update_option($name, $value);
		}
		echo "Success";
		`})},Dt=async(r,{meta:t,userId:o})=>{const p=await r.documentRoot;await r.run({code:`<?php
		include ${ie(p)} . '/wp-load.php';
		$meta = ${ie(t)};
		foreach($meta as $name => $value) {
			update_user_meta(${ie(o)}, $name, $value);
		}
		`})};function Zr(r){return r.pathname.startsWith("/scope:")}function Wt(r){return Zr(r)?r.pathname.split("/")[1].split(":")[1]:null}const Mt=async r=>{await sr(r,{consts:{WP_ALLOW_MULTISITE:1}});const t=new URL(await r.absoluteUrl);if(t.port!==""){let v=`The current host is ${t.host}, but WordPress multisites do not support custom ports.`;throw t.hostname==="localhost"&&(v+=" For development, you can set up a playground.test domain using the instructions at https://wordpress.github.io/wordpress-playground/contributing/code."),new Error(v)}const o=t.pathname.replace(/\/$/,"")+"/",p=`${t.protocol}//${t.hostname}${o}`;await Yr(r,{options:{siteurl:p,home:p}}),await vr(r,{});const l=await r.documentRoot,e=(await r.run({code:`<?php
define( 'WP_ADMIN', true );
require_once(${ie(l)} . "/wp-load.php");

// Set current user to admin
( get_users(array('role' => 'Administrator') )[0] );

require_once(${ie(l)} . "/wp-admin/includes/plugin.php");
$plugins_root = ${ie(l)} . "/wp-content/plugins";
$plugins = glob($plugins_root . "/*");

$deactivated_plugins = [];
foreach($plugins as $plugin_path) {
	if (str_ends_with($plugin_path, '/index.php')) {
		continue;
	}
	if (!is_dir($plugin_path)) {
		$deactivated_plugins[] = substr($plugin_path, strlen($plugins_root) + 1);
		deactivate_plugins($plugin_path);
		continue;
	}
	// Find plugin entry file
	foreach ( ( glob( $plugin_path . '/*.php' ) ?: array() ) as $file ) {
		$info = get_plugin_data( $file, false, false );
		if ( ! empty( $info['Name'] ) ) {
			deactivate_plugins( $file );
			$deactivated_plugins[] = substr($file, strlen($plugins_root) + 1);
			break;
		}
	}
}
echo json_encode($deactivated_plugins);
`})).json,g=(await wr(r,{request:{url:"/wp-admin/network.php"}})).text.match(/name="_wpnonce"\s+value="([^"]+)"/)?.[1],A=await wr(r,{request:{url:"/wp-admin/network.php",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Bt({_wpnonce:g,_wp_http_referer:o+"wp-admin/network.php",sitename:"My WordPress Website Sites",email:"admin@localhost.com",submit:"Install"})}});if(A.httpStatusCode!==200)throw ae.warn("WordPress response was",{response:A,text:A.text,headers:A.headers}),new Error(`Failed to enable multisite. Response code was ${A.httpStatusCode}`);await sr(r,{consts:{MULTISITE:!0,SUBDOMAIN_INSTALL:!1,SITE_ID_CURRENT_SITE:1,BLOG_ID_CURRENT_SITE:1,DOMAIN_CURRENT_SITE:t.hostname,PATH_CURRENT_SITE:o}});const q=new URL(await r.absoluteUrl),m=Zr(q)?"scope:"+Wt(q):null;await r.writeFile("/internal/shared/preload/sunrise.php",`<?php
	$_SERVER['HTTP_HOST'] = ${ie(q.hostname)};
	$folder = ${ie(m)};
	if ($folder && strpos($_SERVER['REQUEST_URI'],"/$folder") === false) {
		$_SERVER['REQUEST_URI'] = "/$folder/" . ltrim($_SERVER['REQUEST_URI'], '/');
	}
`),await r.writeFile("/internal/shared/mu-plugins/sunrise.php",`<?php
		if ( !defined( 'BLOG_ID_CURRENT_SITE' ) ) {
			define( 'BLOG_ID_CURRENT_SITE', 1 );
		}
`),await vr(r,{});for(const v of e)await Or(r,{pluginPath:v})};function Bt(r){return Object.keys(r).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(r[t])).join("&")}const Ut=async(r,{fromPath:t,toPath:o})=>{await r.writeFile(o,await r.readFileAsBuffer(t))},zt=async(r,{fromPath:t,toPath:o})=>{await r.mv(t,o)},Vt=async(r,{path:t})=>{await r.mkdir(t)},Ht=async(r,{path:t})=>{await r.rmdir(t)},Qr=async(r,{path:t,data:o})=>{o instanceof File&&(o=new Uint8Array(await o.arrayBuffer())),t.startsWith("/wordpress/wp-content/mu-plugins")&&!await r.fileExists("/wordpress/wp-content/mu-plugins")&&await r.mkdir("/wordpress/wp-content/mu-plugins"),await r.writeFile(t,o)},Jr=async(r,{siteUrl:t})=>{await sr(r,{consts:{WP_HOME:t,WP_SITEURL:t}})},Gt=async(r,{file:t},o)=>{o?.tracker?.setCaption("Importing content"),await Qr(r,{path:"/tmp/import.wxr",data:t});const p=await r.documentRoot;await r.run({code:`<?php
		require ${ie(p)} . '/wp-load.php';
		require ${ie(p)} . '/wp-admin/includes/admin.php';
  
		kses_remove_filters();
		$admin_id = get_users(array('role' => 'Administrator') )[0]->ID;
        wp_set_current_user( $admin_id );
		$importer = new WXR_Importer( array(
			'fetch_attachments' => true,
			'default_author' => $admin_id
		) );
		$logger = new WP_Importer_Logger_CLI();
		$importer->set_logger( $logger );

		// Slashes from the imported content are lost if we don't call wp_slash here.
		add_action( 'wp_insert_post_data', function( $data ) {
			return wp_slash($data);
		});

		$result = $importer->import( '/tmp/import.wxr' );
		`})},Kr=async(r,{themeSlug:t=""},o)=>{o?.tracker?.setCaption("Importing theme starter content");const p=await r.documentRoot;await r.run({code:`<?php

		/**
		 * Ensure that the customizer loads as an admin user.
		 *
		 * For compatibility with themes, this MUST be run prior to theme inclusion, which is why this is a plugins_loaded filter instead
		 * of running _wp_customize_include() manually after load.
		 */
		function importThemeStarterContent_plugins_loaded() {
			// Set as the admin user, this ensures we can customize the site.
			wp_set_current_user(
				get_users( [ 'role' => 'Administrator' ] )[0]
			);

			// Force the site to be fresh, although it should already be.
			add_filter( 'pre_option_fresh_site', '__return_true' );

			/*
			 * Simulate this request as the customizer loading with the current theme in preview mode.
			 *
			 * See _wp_customize_include()
			 */
			$_REQUEST['wp_customize']    = 'on';
			$_REQUEST['customize_theme'] = ${ie(t)} ?: get_stylesheet();

			/*
			 * Claim this is a ajax request saving settings, to avoid the preview filters being applied.
			 */
			$_REQUEST['action'] = 'customize_save';
			add_filter( 'wp_doing_ajax', '__return_true' );

			$_GET = $_REQUEST;
		}
		playground_add_filter( 'plugins_loaded', 'importThemeStarterContent_plugins_loaded', 0 );

		require ${ie(p)} . '/wp-load.php';

		// Return early if there's no starter content.
		if ( ! get_theme_starter_content() ) {
			return;
		}

		// Import the Starter Content.
		$wp_customize->import_theme_starter_content();

		// Publish the changeset, which publishes the starter content.
		wp_publish_post( $wp_customize->changeset_post_id() );
		`})},cr="/tmp/file.zip",Xr=async(r,t,o,p=!0)=>{if(t instanceof File){const i=t;t=cr,await r.writeFile(t,new Uint8Array(await i.arrayBuffer()))}const l=ar({zipPath:t,extractToPath:o,overwriteFiles:p});await r.run({code:`<?php
        function unzip($zipPath, $extractTo, $overwriteFiles = true)
        {
            if (!is_dir($extractTo)) {
                mkdir($extractTo, 0777, true);
            }
            $zip = new ZipArchive;
            $res = $zip->open($zipPath);
            if ($res === TRUE) {
				for ($i = 0; $i < $zip->numFiles; $i++) {
					$filename = $zip->getNameIndex($i);
					$fileinfo = pathinfo($filename);
					$extractFilePath = rtrim($extractTo, '/') . '/' . $filename;
					// Check if file exists and $overwriteFiles is false
					if (!file_exists($extractFilePath) || $overwriteFiles) {
						// Extract file
						$zip->extractTo($extractTo, $filename);
					}
				}
				$zip->close();
				chmod($extractTo, 0777);
            } else {
                throw new Exception("Could not unzip file");
            }
        }
        unzip(${l.zipPath}, ${l.extractToPath}, ${l.overwriteFiles});
        `}),await r.fileExists(cr)&&await r.unlink(cr)},Er=async(r,{zipFile:t,zipPath:o,extractToPath:p})=>{if(o)ae.warn('The "zipPath" option of the unzip() Blueprint step is deprecated and will be removed. Use "zipFile" instead.');else if(!t)throw new Error("Either zipPath or zipFile must be provided");await Xr(r,t||o,p)},Yt=async(r,{wordPressFilesZip:t,pathInZip:o=""})=>{const p=await r.documentRoot;let l=se("/tmp","import");await r.mkdir(l),await Er(r,{zipFile:t,extractToPath:l}),l=se(l,o);const i=se(l,"wp-content"),e=se(p,"wp-content");for(const q of Vr){const m=se(i,q);await xr(r,m);const v=se(e,q);await r.fileExists(v)&&(await r.mkdir(Br(m)),await r.mv(v,m))}const u=se(l,"wp-content","database");await r.fileExists(u)||await r.mv(se(p,"wp-content","database"),u);const g=await r.listFiles(l);for(const q of g)await xr(r,se(p,q)),await r.mv(se(l,q),se(p,q));await r.rmdir(l),await Jr(r,{siteUrl:await r.absoluteUrl});const A=ie(se(p,"wp-admin","upgrade.php"));await r.run({code:`<?php
            $_GET['step'] = 'upgrade_db';
            require ${A};
            `})};async function xr(r,t){await r.fileExists(t)&&(await r.isDir(t)?await r.rmdir(t):await r.unlink(t))}async function Zt(r){const t=await r.request({url:"/wp-admin/export.php?download=true&content=all"});return new File([t.bytes],"export.xml")}async function et(r,{targetPath:t,zipFile:o,ifAlreadyInstalled:p="overwrite"}){const i=o.name.replace(/\.zip$/,""),e=se(await r.documentRoot,"wp-content"),u=se(e,Ur()),g=se(u,"assets",i);await r.fileExists(g)&&await r.rmdir(u,{recursive:!0}),await r.mkdir(u);try{await Er(r,{zipFile:o,extractToPath:g});let A=await r.listFiles(g,{prependPath:!0});A=A.filter(D=>!D.endsWith("/__MACOSX"));const q=A.length===1&&await r.isDir(A[0]);let m,v="";q?(v=A[0],m=A[0].split("/").pop()):(v=g,m=i);const C=`${t}/${m}`;if(await r.fileExists(C)){if(!await r.isDir(C))throw new Error(`Cannot install asset ${m} to ${C} because a file with the same name already exists. Note it's a file, not a directory! Is this by mistake?`);if(p==="overwrite")await r.rmdir(C,{recursive:!0});else{if(p==="skip")return{assetFolderPath:C,assetFolderName:m};throw new Error(`Cannot install asset ${m} to ${t} because it already exists and the ifAlreadyInstalled option was set to ${p}`)}}return await r.mv(v,C),{assetFolderPath:C,assetFolderName:m}}finally{await r.rmdir(u,{recursive:!0})}}function pr(r){const t=r.split(".").shift().replace(/-/g," ");return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}const Qt=async(r,{pluginZipFile:t,ifAlreadyInstalled:o,options:p={}},l)=>{const i=t.name.split("/").pop()||"plugin.zip",e=pr(i);l?.tracker.setCaption(`Installing the ${e} plugin`);const{assetFolderPath:u}=await et(r,{ifAlreadyInstalled:o,zipFile:t,targetPath:`${await r.documentRoot}/wp-content/plugins`});("activate"in p?p.activate:!0)&&await Or(r,{pluginPath:u,pluginName:e},l)},Jt=async(r,{themeZipFile:t,ifAlreadyInstalled:o,options:p={}},l)=>{const i=pr(t.name);l?.tracker.setCaption(`Installing the ${i} theme`);const{assetFolderName:e}=await et(r,{ifAlreadyInstalled:o,zipFile:t,targetPath:`${await r.documentRoot}/wp-content/themes`});("activate"in p?p.activate:!0)&&await Hr(r,{themeFolderName:e},l),("importStarterContent"in p?p.importStarterContent:!1)&&await Kr(r,{themeSlug:e},l)},Kt=async(r,t,o)=>{o?.tracker?.setCaption("Resetting WordPress data");const p=await r.documentRoot;await r.run({env:{DOCROOT:p},code:`<?php
		require getenv('DOCROOT') . '/wp-load.php';

		$GLOBALS['@pdo']->query('DELETE FROM wp_posts WHERE id > 0');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=0 WHERE NAME='wp_posts'");
		
		$GLOBALS['@pdo']->query('DELETE FROM wp_postmeta WHERE post_id > 1');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=20 WHERE NAME='wp_postmeta'");

		$GLOBALS['@pdo']->query('DELETE FROM wp_comments');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=0 WHERE NAME='wp_comments'");

		$GLOBALS['@pdo']->query('DELETE FROM wp_commentmeta');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=0 WHERE NAME='wp_commentmeta'");
		`})},Xt=async(r,{options:t})=>{await r.request({url:"/wp-admin/install.php?step=2",method:"POST",body:{language:"en",prefix:"wp_",weblog_title:"My WordPress Website",user_name:t.adminPassword||"admin",admin_password:t.adminPassword||"password",admin_password2:t.adminPassword||"password",Submit:"Install WordPress",pw_weak:"1",admin_email:"admin@localhost.com"}})},es=async(r,{selfContained:t=!1}={})=>{const o="/tmp/wordpress-playground.zip",p=await r.documentRoot,l=se(p,"wp-content");let i=Vr;t&&(i=i.filter(g=>!g.startsWith("themes/twenty")).filter(g=>g!=="mu-plugins/sqlite-database-integration"));const e=ar({zipPath:o,wpContentPath:l,documentRoot:p,exceptPaths:i.map(g=>se(p,"wp-content",g)),additionalPaths:t?{[se(p,"wp-config.php")]:"wp-config.php"}:{}});await ts(r,`zipDir(${e.wpContentPath}, ${e.zipPath}, array(
			'exclude_paths' => ${e.exceptPaths},
			'zip_root'      => ${e.documentRoot},
			'additional_paths' => ${e.additionalPaths}
		));`);const u=await r.readFileAsBuffer(o);return r.unlink(o),u},rs=`<?php

function zipDir($root, $output, $options = array())
{
    $root = rtrim($root, '/');
    $additionalPaths = array_key_exists('additional_paths', $options) ? $options['additional_paths'] : array();
    $excludePaths = array_key_exists('exclude_paths', $options) ? $options['exclude_paths'] : array();
    $zip_root = array_key_exists('zip_root', $options) ? $options['zip_root'] : $root;

    $zip = new ZipArchive;
    $res = $zip->open($output, ZipArchive::CREATE);
    if ($res === TRUE) {
        $directories = array(
            $root . '/'
        );
        while (sizeof($directories)) {
            $current_dir = array_pop($directories);

            if ($handle = opendir($current_dir)) {
                while (false !== ($entry = readdir($handle))) {
                    if ($entry == '.' || $entry == '..') {
                        continue;
                    }

                    $entry = join_paths($current_dir, $entry);
                    if (in_array($entry, $excludePaths)) {
                        continue;
                    }

                    if (is_dir($entry)) {
                        $directory_path = $entry . '/';
                        array_push($directories, $directory_path);
                    } else if (is_file($entry)) {
                        $zip->addFile($entry, substr($entry, strlen($zip_root)));
                    }
                }
                closedir($handle);
            }
        }
        foreach ($additionalPaths as $disk_path => $zip_path) {
            $zip->addFile($disk_path, $zip_path);
        }
        $zip->close();
        chmod($output, 0777);
    }
}

function join_paths()
{
    $paths = array();

    foreach (func_get_args() as $arg) {
        if ($arg !== '') {
            $paths[] = $arg;
        }
    }

    return preg_replace('#/+#', '/', join('/', $paths));
}
`;async function ts(r,t){return await r.run({code:rs+t})}const ss=async(r,{command:t,wpCliPath:o="/tmp/wp-cli.phar"})=>{if(!await r.fileExists(o))throw new Error(`wp-cli.phar not found at ${o}.
			You can enable wp-cli support by adding "wp-cli" to the list of extra libraries in your blueprint as follows:
			{
				"extraLibraries": [ "wp-cli" ]
			}

			Read more about it in the documentation.
			https://wordpress.github.io/wordpress-playground/blueprints/data-format#extra-libraries`);let p;if(typeof t=="string"?(t=t.trim(),p=is(t)):p=t,p.shift()!=="wp")throw new Error('The first argument must be "wp".');await r.writeFile("/tmp/stdout",""),await r.writeFile("/tmp/stderr",""),await r.writeFile("/wordpress/run-cli.php",`<?php
		// Set up the environment to emulate a shell script
		// call.

		// Set SHELL_PIPE to 0 to ensure WP-CLI formats
		// the output as ASCII tables.
		// @see https://github.com/wp-cli/wp-cli/issues/1102
		putenv( 'SHELL_PIPE=0' );

		// Set the argv global.
		$GLOBALS['argv'] = array_merge([
		  "/tmp/wp-cli.phar",
		  "--path=/wordpress"
		], ${ie(p)});

		// Provide stdin, stdout, stderr streams outside of
		// the CLI SAPI.
		define('STDIN', fopen('php://stdin', 'rb'));
		define('STDOUT', fopen('php://stdout', 'wb'));
		define('STDERR', fopen('php://stderr', 'wb'));

		require( ${ie(o)} );
		`);const i=await r.run({scriptPath:"/wordpress/run-cli.php"});if(i.errors)throw new Error(i.errors);return i};function is(r){let p=0,l="";const i=[];let e="";for(let u=0;u<r.length;u++){const g=r[u];p===0?g==='"'||g==="'"?(p=1,l=g):g.match(/\s/)?(e&&i.push(e),e=""):e+=g:p===1&&(g==="\\"?(u++,e+=r[u]):g===l?(p=0,l=""):e+=g)}return e&&i.push(e),i}const os=async(r,{language:t},o)=>{o?.tracker.setCaption(o?.initialCaption||"Translating"),await r.defineConstant("WPLANG",t);const p=await r.documentRoot,i=[{url:`https://downloads.wordpress.org/translation/core/${(await r.run({code:`<?php
			require '${p}/wp-includes/version.php';
			echo $wp_version;
		`})).text}/${t}.zip`,type:"core"}],u=(await r.run({code:`<?php
		require_once('${p}/wp-load.php');
		require_once('${p}/wp-admin/includes/plugin.php');
		echo json_encode(
			array_values(
				array_map(
					function($plugin) {
						return [
							'slug'    => $plugin['TextDomain'],
							'version' => $plugin['Version']
						];
					},
					array_filter(
						get_plugins(),
						function($plugin) {
							return !empty($plugin['TextDomain']);
						}
					)
				)
			)
		);`})).json;for(const{slug:q,version:m}of u)i.push({url:`https://downloads.wordpress.org/translation/plugin/${q}/${m}/${t}.zip`,type:"plugin"});const A=(await r.run({code:`<?php
		require_once('${p}/wp-load.php');
		require_once('${p}/wp-admin/includes/theme.php');
		echo json_encode(
			array_values(
				array_map(
					function($theme) {
						return [
							'slug'    => $theme->get('TextDomain'),
							'version' => $theme->get('Version')
						];
					},
					wp_get_themes()
				)
			)
		);`})).json;for(const{slug:q,version:m}of A)i.push({url:`https://downloads.wordpress.org/translation/theme/${q}/${m}/${t}.zip`,type:"theme"});await r.isDir(`${p}/wp-content/languages/plugins`)||await r.mkdir(`${p}/wp-content/languages/plugins`),await r.isDir(`${p}/wp-content/languages/themes`)||await r.mkdir(`${p}/wp-content/languages/themes`);for(const{url:q,type:m}of i)try{const v=await fetch(q);if(!v.ok)throw new Error(`Failed to download translations for ${m}: ${v.statusText}`);let C=`${p}/wp-content/languages`;m==="plugin"?C+="/plugins":m==="theme"&&(C+="/themes"),await Xr(r,new File([await v.blob()],`${t}-${m}.zip`),C)}catch(v){if(m==="core")throw new Error(`Failed to download translations for WordPress. Please check if the language code ${t} is correct. You can find all available languages and translations on https://translate.wordpress.org/.`);ae.warn(`Error downloading translations for ${m}: ${v}`)}},ns=Object.freeze(Object.defineProperty({__proto__:null,activatePlugin:Or,activateTheme:Hr,cp:Ut,defineSiteUrl:Jr,defineWpConfigConsts:sr,enableMultisite:Mt,exportWXR:Zt,importThemeStarterContent:Kr,importWordPressFiles:Yt,importWxr:Gt,installPlugin:Qt,installTheme:Jt,login:vr,mkdir:Vt,mv:zt,request:wr,resetData:Kt,rm:Gr,rmdir:Ht,runPHP:St,runPHPWithOptions:xt,runSql:Nt,runWpInstallationWizard:Xt,setSiteLanguage:os,setSiteOptions:Yr,unzip:Er,updateUserMeta:Dt,wpCLI:ss,writeFile:Qr,zipWpContent:es},Symbol.toStringTag,{value:"Module"})),as=5*1024*1024;function ps(r,t){const o=r.headers.get("content-length")||"",p=parseInt(o,10)||as;function l(i,e){t(new CustomEvent("progress",{detail:{loaded:i,total:e}}))}return new Response(new ReadableStream({async start(i){if(!r.body){i.close();return}const e=r.body.getReader();let u=0;for(;;)try{const{done:g,value:A}=await e.read();if(A&&(u+=A.byteLength),g){l(u,u),i.close();break}else l(u,p),i.enqueue(A)}catch(g){ae.error({e:g}),i.error(g);break}}}),{status:r.status,statusText:r.statusText,headers:r.headers})}const mr=1e-5;class lr extends EventTarget{constructor({weight:t=1,caption:o="",fillTime:p=4}={}){super(),this._selfWeight=1,this._selfDone=!1,this._selfProgress=0,this._selfCaption="",this._isFilling=!1,this._subTrackers=[],this._weight=t,this._selfCaption=o,this._fillTime=p}stage(t,o=""){if(t||(t=this._selfWeight),this._selfWeight-t<-mr)throw new Error(`Cannot add a stage with weight ${t} as the total weight of registered stages would exceed 1.`);this._selfWeight-=t;const p=new lr({caption:o,weight:t,fillTime:this._fillTime});return this._subTrackers.push(p),p.addEventListener("progress",()=>this.notifyProgress()),p.addEventListener("done",()=>{this.done&&this.notifyDone()}),p}fillSlowly({stopBeforeFinishing:t=!0}={}){if(this._isFilling)return;this._isFilling=!0;const o=100,p=this._fillTime/o;this._fillInterval=setInterval(()=>{this.set(this._selfProgress+1),t&&this._selfProgress>=99&&clearInterval(this._fillInterval)},p)}set(t){this._selfProgress=Math.min(t,100),this.notifyProgress(),this._selfProgress+mr>=100&&this.finish()}finish(){this._fillInterval&&clearInterval(this._fillInterval),this._selfDone=!0,this._selfProgress=100,this._isFilling=!1,this._fillInterval=void 0,this.notifyProgress(),this.notifyDone()}get caption(){for(let t=this._subTrackers.length-1;t>=0;t--)if(!this._subTrackers[t].done){const o=this._subTrackers[t].caption;if(o)return o}return this._selfCaption}setCaption(t){this._selfCaption=t,this.notifyProgress()}get done(){return this.progress+mr>=100}get progress(){if(this._selfDone)return 100;const t=this._subTrackers.reduce((o,p)=>o+p.progress*p.weight,this._selfProgress*this._selfWeight);return Math.round(t*1e4)/1e4}get weight(){return this._weight}get observer(){return this._progressObserver||(this._progressObserver=t=>{this.set(t)}),this._progressObserver}get loadingListener(){return this._loadingListener||(this._loadingListener=t=>{this.set(t.detail.loaded/t.detail.total*100)}),this._loadingListener}pipe(t){t.setProgress({progress:this.progress,caption:this.caption}),this.addEventListener("progress",o=>{t.setProgress({progress:o.detail.progress,caption:o.detail.caption})}),this.addEventListener("done",()=>{t.setLoaded()})}addEventListener(t,o){super.addEventListener(t,o)}removeEventListener(t,o){super.removeEventListener(t,o)}notifyProgress(){const t=this;this.dispatchEvent(new CustomEvent("progress",{detail:{get progress(){return t.progress},get caption(){return t.caption}}}))}notifyDone(){this.dispatchEvent(new CustomEvent("done"))}}const ls=["vfs","literal","wordpress.org/themes","wordpress.org/plugins","url"];function fs(r){return r&&typeof r=="object"&&typeof r.resource=="string"&&ls.includes(r.resource)}class Re{static create(t,{semaphore:o,progress:p}){let l;switch(t.resource){case"vfs":l=new us(t,p);break;case"literal":l=new ds(t,p);break;case"wordpress.org/themes":l=new ys(t,p);break;case"wordpress.org/plugins":l=new hs(t,p);break;case"url":l=new ms(t,p);break;default:throw new Error(`Invalid resource: ${t}`)}return l=new gs(l),o&&(l=new bs(l,o)),l}setPlayground(t){this.playground=t}get isAsync(){return!1}}class us extends Re{constructor(t,o){super(),this.resource=t,this.progress=o}async resolve(){const t=await this.playground.readFileAsBuffer(this.resource.path);return this.progress?.set(100),new File([t],this.name)}get name(){return this.resource.path.split("/").pop()||""}}class ds extends Re{constructor(t,o){super(),this.resource=t,this.progress=o}async resolve(){return this.progress?.set(100),new File([this.resource.contents],this.resource.name)}get name(){return this.resource.name}}class $r extends Re{constructor(t){super(),this.progress=t}async resolve(){this.progress?.setCaption(this.caption);const t=this.getURL();try{let o=await fetch(t);if(!o.ok)throw new Error(`Could not download "${t}"`);if(o=await ps(o,this.progress?.loadingListener??cs),o.status!==200)throw new Error(`Could not download "${t}"`);return new File([await o.blob()],this.name)}catch(o){throw new Error(`Could not download "${t}".
				Check if the URL is correct and the server is reachable.
				If it is reachable, the server might be blocking the request.
				Check the browser console and network tabs for more information.

				## Does the console show the error "No 'Access-Control-Allow-Origin' header"?

				This means the server that hosts your file does not allow requests from other sites
				(cross-origin requests, or CORS).	You need to move the asset to a server that allows
				cross-origin file downloads. Learn more about CORS at
				https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS.

				If your file is on GitHub, load it from "raw.githubusercontent.com".
				Here's how to do that:

				1. Start with the original GitHub URL of the file. For example:
				https://github.com/username/repository/blob/branch/filename.
				2. Replace "github.com" with "raw.githubusercontent.com".
				3. Remove the "/blob/" part of the URL.

				The resulting URL should look like this:
				https://raw.githubusercontent.com/username/repository/branch/filename

				Error:
				${o}`)}}get caption(){return`Downloading ${this.name}`}get name(){try{return new URL(this.getURL(),"http://example.com").pathname.split("/").pop()}catch{return this.getURL()}}get isAsync(){return!0}}const cs=()=>{};class ms extends $r{constructor(t,o){super(o),this.resource=t}getURL(){return this.resource.url}get caption(){return this.resource.caption??super.caption}}class ys extends $r{constructor(t,o){super(o),this.resource=t}get name(){return pr(this.resource.slug)}getURL(){return`https://downloads.wordpress.org/theme/${rt(this.resource.slug)}`}}class hs extends $r{constructor(t,o){super(o),this.resource=t}get name(){return pr(this.resource.slug)}getURL(){return`https://downloads.wordpress.org/plugin/${rt(this.resource.slug)}`}}function rt(r){return!r||r.endsWith(".zip")?r:r+".latest-stable.zip"}class tt extends Re{constructor(t){super(),this.resource=t}async resolve(){return this.resource.resolve()}async setPlayground(t){return this.resource.setPlayground(t)}get progress(){return this.resource.progress}set progress(t){this.resource.progress=t}get name(){return this.resource.name}get isAsync(){return this.resource.isAsync}}class gs extends tt{async resolve(){return this.promise||(this.promise=super.resolve()),this.promise}}class bs extends tt{constructor(t,o){super(t),this.semaphore=o}async resolve(){return this.isAsync?this.semaphore.run(()=>super.resolve()):super.resolve()}}const ws={type:"object",properties:{landingPage:{type:"string",description:"The URL to navigate to after the blueprint has been run."},description:{type:"string",description:"Optional description. It doesn't do anything but is exposed as a courtesy to developers who may want to document which blueprint file does what.",deprecated:"Use meta.description instead."},meta:{type:"object",properties:{title:{type:"string",description:"A clear and concise name for your Blueprint."},description:{type:"string",description:"A brief explanation of what your Blueprint offers."},author:{type:"string",description:"A GitHub username of the author of this Blueprint."},categories:{type:"array",items:{type:"string"},description:"Relevant categories to help users find your Blueprint in the future Blueprints section on WordPress.org."}},required:["title","author"],additionalProperties:!1,description:"Optional metadata. Used by the Blueprints gallery at https://github.com/WordPress/blueprints"},preferredVersions:{type:"object",properties:{php:{anyOf:[{$ref:"#/definitions/SupportedPHPVersion"},{type:"string",const:"latest"}],description:"The preferred PHP version to use. If not specified, the latest supported version will be used"},wp:{type:"string",description:"The preferred WordPress version to use. If not specified, the latest supported version will be used"}},required:["php","wp"],additionalProperties:!1,description:"The preferred PHP and WordPress versions to use."},features:{type:"object",properties:{networking:{type:"boolean",description:"Should boot with support for network request via wp_safe_remote_get?"}},additionalProperties:!1},extraLibraries:{type:"array",items:{$ref:"#/definitions/ExtraLibrary"},description:"Extra libraries to preload into the Playground instance."},constants:{type:"object",additionalProperties:{type:"string"},description:"PHP Constants to define on every request"},plugins:{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/definitions/FileReference"}]},description:"WordPress plugins to install and activate"},siteOptions:{type:"object",additionalProperties:{type:"string"},properties:{blogname:{type:"string",description:"The site title"}},description:"WordPress site options to define"},login:{anyOf:[{type:"boolean"},{type:"object",properties:{username:{type:"string"},password:{type:"string"}},required:["username","password"],additionalProperties:!1}],description:"User to log in as. If true, logs the user in as admin/password."},phpExtensionBundles:{type:"array",items:{$ref:"#/definitions/SupportedPHPExtensionBundle"},description:"The PHP extensions to use."},steps:{type:"array",items:{anyOf:[{$ref:"#/definitions/StepDefinition"},{type:"string"},{not:{}},{type:"boolean",const:!1},{type:"null"}]},description:"The steps to run after every other operation in this Blueprint was executed."},$schema:{type:"string"}},additionalProperties:!1},vs={type:"string",enum:["8.3","8.2","8.1","8.0","7.4","7.3","7.2","7.1","7.0"]},Ps={type:"string",enum:["kitchen-sink","light"]},st=Object.prototype.hasOwnProperty;function re(r,{instancePath:t="",parentData:o,parentDataProperty:p,rootData:l=r}={}){let i=null,e=0;const u=e;let g=!1;const A=e;if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let z;if(r.resource===void 0&&(z="resource")||r.path===void 0&&(z="path")){const U={instancePath:t,schemaPath:"#/definitions/VFSReference/required",keyword:"required",params:{missingProperty:z},message:"must have required property '"+z+"'"};i===null?i=[U]:i.push(U),e++}else{const U=e;for(const Q in r)if(!(Q==="resource"||Q==="path")){const c={instancePath:t,schemaPath:"#/definitions/VFSReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Q},message:"must NOT have additional properties"};i===null?i=[c]:i.push(c),e++;break}if(U===e){if(r.resource!==void 0){let Q=r.resource;const c=e;if(typeof Q!="string"){const L={instancePath:t+"/resource",schemaPath:"#/definitions/VFSReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[L]:i.push(L),e++}if(Q!=="vfs"){const L={instancePath:t+"/resource",schemaPath:"#/definitions/VFSReference/properties/resource/const",keyword:"const",params:{allowedValue:"vfs"},message:"must be equal to constant"};i===null?i=[L]:i.push(L),e++}var m=c===e}else var m=!0;if(m)if(r.path!==void 0){const Q=e;if(typeof r.path!="string"){const L={instancePath:t+"/path",schemaPath:"#/definitions/VFSReference/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[L]:i.push(L),e++}var m=Q===e}else var m=!0}}}else{const z={instancePath:t,schemaPath:"#/definitions/VFSReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[z]:i.push(z),e++}var v=A===e;if(g=g||v,!g){const z=e;if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let c;if(r.resource===void 0&&(c="resource")||r.name===void 0&&(c="name")||r.contents===void 0&&(c="contents")){const L={instancePath:t,schemaPath:"#/definitions/LiteralReference/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"};i===null?i=[L]:i.push(L),e++}else{const L=e;for(const k in r)if(!(k==="resource"||k==="name"||k==="contents")){const O={instancePath:t,schemaPath:"#/definitions/LiteralReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"};i===null?i=[O]:i.push(O),e++;break}if(L===e){if(r.resource!==void 0){let k=r.resource;const O=e;if(typeof k!="string"){const P={instancePath:t+"/resource",schemaPath:"#/definitions/LiteralReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[P]:i.push(P),e++}if(k!=="literal"){const P={instancePath:t+"/resource",schemaPath:"#/definitions/LiteralReference/properties/resource/const",keyword:"const",params:{allowedValue:"literal"},message:"must be equal to constant"};i===null?i=[P]:i.push(P),e++}var C=O===e}else var C=!0;if(C){if(r.name!==void 0){const k=e;if(typeof r.name!="string"){const P={instancePath:t+"/name",schemaPath:"#/definitions/LiteralReference/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[P]:i.push(P),e++}var C=k===e}else var C=!0;if(C)if(r.contents!==void 0){let k=r.contents;const O=e,P=e;let y=!1;const h=e;if(typeof k!="string"){const _={instancePath:t+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[_]:i.push(_),e++}var D=h===e;if(y=y||D,!y){const _=e;if(e===_)if(k&&typeof k=="object"&&!Array.isArray(k)){let T;if(k.BYTES_PER_ELEMENT===void 0&&(T="BYTES_PER_ELEMENT")||k.buffer===void 0&&(T="buffer")||k.byteLength===void 0&&(T="byteLength")||k.byteOffset===void 0&&(T="byteOffset")||k.length===void 0&&(T="length")){const F={instancePath:t+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/required",keyword:"required",params:{missingProperty:T},message:"must have required property '"+T+"'"};i===null?i=[F]:i.push(F),e++}else{const F=e;for(const j in k)if(!(j==="BYTES_PER_ELEMENT"||j==="buffer"||j==="byteLength"||j==="byteOffset"||j==="length")){let B=k[j];const ee=e;if(!(typeof B=="number"&&isFinite(B))){const J={instancePath:t+"/contents/"+j.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[J]:i.push(J),e++}var b=ee===e;if(!b)break}if(F===e){if(k.BYTES_PER_ELEMENT!==void 0){let j=k.BYTES_PER_ELEMENT;const B=e;if(!(typeof j=="number"&&isFinite(j))){const ee={instancePath:t+"/contents/BYTES_PER_ELEMENT",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ee]:i.push(ee),e++}var M=B===e}else var M=!0;if(M){if(k.buffer!==void 0){let j=k.buffer;const B=e;if(e===B)if(j&&typeof j=="object"&&!Array.isArray(j)){let J;if(j.byteLength===void 0&&(J="byteLength")){const N={instancePath:t+"/contents/buffer",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:J},message:"must have required property '"+J+"'"};i===null?i=[N]:i.push(N),e++}else{const N=e;for(const Z in j)if(Z!=="byteLength"){const I={instancePath:t+"/contents/buffer",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Z},message:"must NOT have additional properties"};i===null?i=[I]:i.push(I),e++;break}if(N===e&&j.byteLength!==void 0){let Z=j.byteLength;if(!(typeof Z=="number"&&isFinite(Z))){const I={instancePath:t+"/contents/buffer/byteLength",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[I]:i.push(I),e++}}}}else{const J={instancePath:t+"/contents/buffer",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[J]:i.push(J),e++}var M=B===e}else var M=!0;if(M){if(k.byteLength!==void 0){let j=k.byteLength;const B=e;if(!(typeof j=="number"&&isFinite(j))){const J={instancePath:t+"/contents/byteLength",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[J]:i.push(J),e++}var M=B===e}else var M=!0;if(M){if(k.byteOffset!==void 0){let j=k.byteOffset;const B=e;if(!(typeof j=="number"&&isFinite(j))){const J={instancePath:t+"/contents/byteOffset",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[J]:i.push(J),e++}var M=B===e}else var M=!0;if(M)if(k.length!==void 0){let j=k.length;const B=e;if(!(typeof j=="number"&&isFinite(j))){const J={instancePath:t+"/contents/length",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[J]:i.push(J),e++}var M=B===e}else var M=!0}}}}}}else{const T={instancePath:t+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[T]:i.push(T),e++}var D=_===e;y=y||D}if(y)e=P,i!==null&&(P?i.length=P:i=null);else{const _={instancePath:t+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};i===null?i=[_]:i.push(_),e++}var C=O===e}else var C=!0}}}}else{const c={instancePath:t,schemaPath:"#/definitions/LiteralReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[c]:i.push(c),e++}var v=z===e;if(g=g||v,!g){const c=e;if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let O;if(r.resource===void 0&&(O="resource")||r.slug===void 0&&(O="slug")){const P={instancePath:t,schemaPath:"#/definitions/CoreThemeReference/required",keyword:"required",params:{missingProperty:O},message:"must have required property '"+O+"'"};i===null?i=[P]:i.push(P),e++}else{const P=e;for(const y in r)if(!(y==="resource"||y==="slug")){const h={instancePath:t,schemaPath:"#/definitions/CoreThemeReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"};i===null?i=[h]:i.push(h),e++;break}if(P===e){if(r.resource!==void 0){let y=r.resource;const h=e;if(typeof y!="string"){const w={instancePath:t+"/resource",schemaPath:"#/definitions/CoreThemeReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[w]:i.push(w),e++}if(y!=="wordpress.org/themes"){const w={instancePath:t+"/resource",schemaPath:"#/definitions/CoreThemeReference/properties/resource/const",keyword:"const",params:{allowedValue:"wordpress.org/themes"},message:"must be equal to constant"};i===null?i=[w]:i.push(w),e++}var te=h===e}else var te=!0;if(te)if(r.slug!==void 0){const y=e;if(typeof r.slug!="string"){const w={instancePath:t+"/slug",schemaPath:"#/definitions/CoreThemeReference/properties/slug/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[w]:i.push(w),e++}var te=y===e}else var te=!0}}}else{const O={instancePath:t,schemaPath:"#/definitions/CoreThemeReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[O]:i.push(O),e++}var v=c===e;if(g=g||v,!g){const O=e;if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let h;if(r.resource===void 0&&(h="resource")||r.slug===void 0&&(h="slug")){const w={instancePath:t,schemaPath:"#/definitions/CorePluginReference/required",keyword:"required",params:{missingProperty:h},message:"must have required property '"+h+"'"};i===null?i=[w]:i.push(w),e++}else{const w=e;for(const _ in r)if(!(_==="resource"||_==="slug")){const S={instancePath:t,schemaPath:"#/definitions/CorePluginReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:_},message:"must NOT have additional properties"};i===null?i=[S]:i.push(S),e++;break}if(w===e){if(r.resource!==void 0){let _=r.resource;const S=e;if(typeof _!="string"){const T={instancePath:t+"/resource",schemaPath:"#/definitions/CorePluginReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[T]:i.push(T),e++}if(_!=="wordpress.org/plugins"){const T={instancePath:t+"/resource",schemaPath:"#/definitions/CorePluginReference/properties/resource/const",keyword:"const",params:{allowedValue:"wordpress.org/plugins"},message:"must be equal to constant"};i===null?i=[T]:i.push(T),e++}var Y=S===e}else var Y=!0;if(Y)if(r.slug!==void 0){const _=e;if(typeof r.slug!="string"){const T={instancePath:t+"/slug",schemaPath:"#/definitions/CorePluginReference/properties/slug/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[T]:i.push(T),e++}var Y=_===e}else var Y=!0}}}else{const h={instancePath:t,schemaPath:"#/definitions/CorePluginReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[h]:i.push(h),e++}var v=O===e;if(g=g||v,!g){const h=e;if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let S;if(r.resource===void 0&&(S="resource")||r.url===void 0&&(S="url")){const T={instancePath:t,schemaPath:"#/definitions/UrlReference/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"};i===null?i=[T]:i.push(T),e++}else{const T=e;for(const F in r)if(!(F==="resource"||F==="url"||F==="caption")){const j={instancePath:t,schemaPath:"#/definitions/UrlReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:F},message:"must NOT have additional properties"};i===null?i=[j]:i.push(j),e++;break}if(T===e){if(r.resource!==void 0){let F=r.resource;const j=e;if(typeof F!="string"){const B={instancePath:t+"/resource",schemaPath:"#/definitions/UrlReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[B]:i.push(B),e++}if(F!=="url"){const B={instancePath:t+"/resource",schemaPath:"#/definitions/UrlReference/properties/resource/const",keyword:"const",params:{allowedValue:"url"},message:"must be equal to constant"};i===null?i=[B]:i.push(B),e++}var E=j===e}else var E=!0;if(E){if(r.url!==void 0){const F=e;if(typeof r.url!="string"){const B={instancePath:t+"/url",schemaPath:"#/definitions/UrlReference/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[B]:i.push(B),e++}var E=F===e}else var E=!0;if(E)if(r.caption!==void 0){const F=e;if(typeof r.caption!="string"){const B={instancePath:t+"/caption",schemaPath:"#/definitions/UrlReference/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[B]:i.push(B),e++}var E=F===e}else var E=!0}}}}else{const S={instancePath:t,schemaPath:"#/definitions/UrlReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[S]:i.push(S),e++}var v=h===e;g=g||v}}}}if(g)e=u,i!==null&&(u?i.length=u:i=null);else{const z={instancePath:t,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[z]:i.push(z),e++,re.errors=i,!1}return re.errors=i,e===0}const yr={type:"object",discriminator:{propertyName:"step"},required:["step"],oneOf:[{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"activatePlugin"},pluginPath:{type:"string",description:"Path to the plugin directory as absolute path (/wordpress/wp-content/plugins/plugin-name); or the plugin entry file relative to the plugins directory (plugin-name/plugin-name.php)."},pluginName:{type:"string",description:"Optional. Plugin name to display in the progress bar."}},required:["pluginPath","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"activateTheme"},themeFolderName:{type:"string",description:"The name of the theme folder inside wp-content/themes/"}},required:["step","themeFolderName"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"cp"},fromPath:{type:"string",description:"Source path"},toPath:{type:"string",description:"Target path"}},required:["fromPath","step","toPath"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"defineWpConfigConsts"},consts:{type:"object",additionalProperties:{},description:"The constants to define"},method:{type:"string",enum:["rewrite-wp-config","define-before-run"],description:`The method of defining the constants in wp-config.php. Possible values are:

- rewrite-wp-config: Default. Rewrites the wp-config.php file to                      explicitly call define() with the requested                      name and value. This method alters the file                      on the disk, but it doesn't conflict with                      existing define() calls in wp-config.php.

- define-before-run: Defines the constant before running the requested                      script. It doesn't alter any files on the disk, but                      constants defined this way may conflict with existing                      define() calls in wp-config.php.`},virtualize:{type:"boolean",deprecated:`This option is noop and will be removed in a future version.
This option is only kept in here to avoid breaking Blueprint schema validation
for existing apps using this option.`}},required:["consts","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"defineSiteUrl"},siteUrl:{type:"string",description:"The URL"}},required:["siteUrl","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"enableMultisite"}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"importWxr"},file:{$ref:"#/definitions/FileReference",description:"The file to import"}},required:["file","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"importThemeStarterContent",description:"The step identifier."},themeSlug:{type:"string",description:"The name of the theme to import content from."}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"importWordPressFiles"},wordPressFilesZip:{$ref:"#/definitions/FileReference",description:"The zip file containing the top-level WordPress files and directories."},pathInZip:{type:"string",description:"The path inside the zip file where the WordPress files are."}},required:["step","wordPressFilesZip"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},ifAlreadyInstalled:{type:"string",enum:["overwrite","skip","error"],description:"What to do if the asset already exists."},step:{type:"string",const:"installPlugin",description:"The step identifier."},pluginZipFile:{$ref:"#/definitions/FileReference",description:"The plugin zip file to install."},options:{$ref:"#/definitions/InstallPluginOptions",description:"Optional installation options."}},required:["pluginZipFile","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},ifAlreadyInstalled:{type:"string",enum:["overwrite","skip","error"],description:"What to do if the asset already exists."},step:{type:"string",const:"installTheme",description:"The step identifier."},themeZipFile:{$ref:"#/definitions/FileReference",description:"The theme zip file to install."},options:{type:"object",properties:{activate:{type:"boolean",description:"Whether to activate the theme after installing it."},importStarterContent:{type:"boolean",description:"Whether to import the theme's starter content after installing it."}},additionalProperties:!1,description:"Optional installation options."}},required:["step","themeZipFile"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"login"},username:{type:"string",description:"The user to log in as. Defaults to 'admin'."},password:{type:"string",description:"The password to log in with. Defaults to 'password'."}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"mkdir"},path:{type:"string",description:"The path of the directory you want to create"}},required:["path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"mv"},fromPath:{type:"string",description:"Source path"},toPath:{type:"string",description:"Target path"}},required:["fromPath","step","toPath"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"resetData"}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"request"},request:{$ref:"#/definitions/PHPRequest",description:"Request details (See /wordpress-playground/api/universal/interface/PHPRequest)"}},required:["request","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"rm"},path:{type:"string",description:"The path to remove"}},required:["path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"rmdir"},path:{type:"string",description:"The path to remove"}},required:["path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runPHP",description:"The step identifier."},code:{type:"string",description:"The PHP code to run."}},required:["code","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runPHPWithOptions"},options:{$ref:"#/definitions/PHPRunOptions",description:"Run options (See /wordpress-playground/api/universal/interface/PHPRunOptions/))"}},required:["options","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runWpInstallationWizard"},options:{$ref:"#/definitions/WordPressInstallationOptions"}},required:["options","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runSql",description:"The step identifier."},sql:{$ref:"#/definitions/FileReference",description:"The SQL to run. Each non-empty line must contain a valid SQL query."}},required:["sql","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"setSiteOptions",description:'The name of the step. Must be "setSiteOptions".'},options:{type:"object",additionalProperties:{},description:"The options to set on the site."}},required:["options","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"unzip"},zipFile:{$ref:"#/definitions/FileReference",description:"The zip file to extract"},zipPath:{type:"string",description:"The path of the zip file to extract",deprecated:"Use zipFile instead."},extractToPath:{type:"string",description:"The path to extract the zip file to"}},required:["extractToPath","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"updateUserMeta"},meta:{type:"object",additionalProperties:{},description:'An object of user meta values to set, e.g. { "first_name": "John" }'},userId:{type:"number",description:"User ID"}},required:["meta","step","userId"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"writeFile"},path:{type:"string",description:"The path of the file to write to"},data:{anyOf:[{$ref:"#/definitions/FileReference"},{type:"string"},{type:"object",properties:{BYTES_PER_ELEMENT:{type:"number"},buffer:{type:"object",properties:{byteLength:{type:"number"}},required:["byteLength"],additionalProperties:!1},byteLength:{type:"number"},byteOffset:{type:"number"},length:{type:"number"}},required:["BYTES_PER_ELEMENT","buffer","byteLength","byteOffset","length"],additionalProperties:{type:"number"}}],description:"The data to write"}},required:["data","path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"wp-cli",description:"The step identifier."},command:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:"The WP CLI command to run."},wpCliPath:{type:"string",description:"wp-cli.phar path"}},required:["command","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"setSiteLanguage"},language:{type:"string",description:"The language to set, e.g. 'en_US'"}},required:["language","step"]}]},it={type:"string",enum:["GET","POST","HEAD","OPTIONS","PATCH","PUT","DELETE"]};function ye(r,{instancePath:t="",parentData:o,parentDataProperty:p,rootData:l=r}={}){let i=null,e=0;if(e===0)if(r&&typeof r=="object"&&!Array.isArray(r)){let te;if(r.url===void 0&&(te="url"))return ye.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:te},message:"must have required property '"+te+"'"}],!1;{const Y=e;for(const E in r)if(!(E==="method"||E==="url"||E==="headers"||E==="body"))return ye.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:E},message:"must NOT have additional properties"}],!1;if(Y===e){if(r.method!==void 0){let E=r.method;const z=e;if(typeof E!="string")return ye.errors=[{instancePath:t+"/method",schemaPath:"#/definitions/HTTPMethod/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(E==="GET"||E==="POST"||E==="HEAD"||E==="OPTIONS"||E==="PATCH"||E==="PUT"||E==="DELETE"))return ye.errors=[{instancePath:t+"/method",schemaPath:"#/definitions/HTTPMethod/enum",keyword:"enum",params:{allowedValues:it.enum},message:"must be equal to one of the allowed values"}],!1;var u=z===e}else var u=!0;if(u){if(r.url!==void 0){const E=e;if(typeof r.url!="string")return ye.errors=[{instancePath:t+"/url",schemaPath:"#/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=E===e}else var u=!0;if(u){if(r.headers!==void 0){let E=r.headers;const z=e;if(e===e)if(E&&typeof E=="object"&&!Array.isArray(E))for(const c in E){const L=e;if(typeof E[c]!="string")return ye.errors=[{instancePath:t+"/headers/"+c.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/PHPRequestHeaders/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=L===e;if(!g)break}else return ye.errors=[{instancePath:t+"/headers",schemaPath:"#/definitions/PHPRequestHeaders/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=z===e}else var u=!0;if(u)if(r.body!==void 0){let E=r.body;const z=e,U=e;let Q=!1;const c=e;if(typeof E!="string"){const k={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[k]:i.push(k),e++}var A=c===e;if(Q=Q||A,!Q){const k=e;if(e===k)if(E&&typeof E=="object"&&!Array.isArray(E)){let P;if(E.BYTES_PER_ELEMENT===void 0&&(P="BYTES_PER_ELEMENT")||E.buffer===void 0&&(P="buffer")||E.byteLength===void 0&&(P="byteLength")||E.byteOffset===void 0&&(P="byteOffset")||E.length===void 0&&(P="length")){const y={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/1/required",keyword:"required",params:{missingProperty:P},message:"must have required property '"+P+"'"};i===null?i=[y]:i.push(y),e++}else{const y=e;for(const h in E)if(!(h==="BYTES_PER_ELEMENT"||h==="buffer"||h==="byteLength"||h==="byteOffset"||h==="length")){let w=E[h];const _=e;if(!(typeof w=="number"&&isFinite(w))){const S={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[S]:i.push(S),e++}var q=_===e;if(!q)break}if(y===e){if(E.BYTES_PER_ELEMENT!==void 0){let h=E.BYTES_PER_ELEMENT;const w=e;if(!(typeof h=="number"&&isFinite(h))){const _={instancePath:t+"/body/BYTES_PER_ELEMENT",schemaPath:"#/properties/body/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[_]:i.push(_),e++}var m=w===e}else var m=!0;if(m){if(E.buffer!==void 0){let h=E.buffer;const w=e;if(e===w)if(h&&typeof h=="object"&&!Array.isArray(h)){let S;if(h.byteLength===void 0&&(S="byteLength")){const T={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"};i===null?i=[T]:i.push(T),e++}else{const T=e;for(const F in h)if(F!=="byteLength"){const j={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:F},message:"must NOT have additional properties"};i===null?i=[j]:i.push(j),e++;break}if(T===e&&h.byteLength!==void 0){let F=h.byteLength;if(!(typeof F=="number"&&isFinite(F))){const j={instancePath:t+"/body/buffer/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[j]:i.push(j),e++}}}}else{const S={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[S]:i.push(S),e++}var m=w===e}else var m=!0;if(m){if(E.byteLength!==void 0){let h=E.byteLength;const w=e;if(!(typeof h=="number"&&isFinite(h))){const S={instancePath:t+"/body/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[S]:i.push(S),e++}var m=w===e}else var m=!0;if(m){if(E.byteOffset!==void 0){let h=E.byteOffset;const w=e;if(!(typeof h=="number"&&isFinite(h))){const S={instancePath:t+"/body/byteOffset",schemaPath:"#/properties/body/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[S]:i.push(S),e++}var m=w===e}else var m=!0;if(m)if(E.length!==void 0){let h=E.length;const w=e;if(!(typeof h=="number"&&isFinite(h))){const S={instancePath:t+"/body/length",schemaPath:"#/properties/body/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[S]:i.push(S),e++}var m=w===e}else var m=!0}}}}}}else{const P={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[P]:i.push(P),e++}var A=k===e;if(Q=Q||A,!Q){const P=e;if(e===P)if(E&&typeof E=="object"&&!Array.isArray(E))for(const h in E){let w=E[h];const _=e,S=e;let T=!1;const F=e;if(typeof w!="string"){const j={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[j]:i.push(j),e++}var v=F===e;if(T=T||v,!T){const j=e;if(e===j)if(w&&typeof w=="object"&&!Array.isArray(w)){let ee;if(w.BYTES_PER_ELEMENT===void 0&&(ee="BYTES_PER_ELEMENT")||w.buffer===void 0&&(ee="buffer")||w.byteLength===void 0&&(ee="byteLength")||w.byteOffset===void 0&&(ee="byteOffset")||w.length===void 0&&(ee="length")){const J={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/required",keyword:"required",params:{missingProperty:ee},message:"must have required property '"+ee+"'"};i===null?i=[J]:i.push(J),e++}else{const J=e;for(const N in w)if(!(N==="BYTES_PER_ELEMENT"||N==="buffer"||N==="byteLength"||N==="byteOffset"||N==="length")){let Z=w[N];const I=e;if(!(typeof Z=="number"&&isFinite(Z))){const H={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[H]:i.push(H),e++}var C=I===e;if(!C)break}if(J===e){if(w.BYTES_PER_ELEMENT!==void 0){let N=w.BYTES_PER_ELEMENT;const Z=e;if(!(typeof N=="number"&&isFinite(N))){const I={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/BYTES_PER_ELEMENT",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[I]:i.push(I),e++}var D=Z===e}else var D=!0;if(D){if(w.buffer!==void 0){let N=w.buffer;const Z=e;if(e===Z)if(N&&typeof N=="object"&&!Array.isArray(N)){let H;if(N.byteLength===void 0&&(H="byteLength")){const K={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:H},message:"must have required property '"+H+"'"};i===null?i=[K]:i.push(K),e++}else{const K=e;for(const le in N)if(le!=="byteLength"){const fe={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:le},message:"must NOT have additional properties"};i===null?i=[fe]:i.push(fe),e++;break}if(K===e&&N.byteLength!==void 0){let le=N.byteLength;if(!(typeof le=="number"&&isFinite(le))){const fe={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer/byteLength",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[fe]:i.push(fe),e++}}}}else{const H={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[H]:i.push(H),e++}var D=Z===e}else var D=!0;if(D){if(w.byteLength!==void 0){let N=w.byteLength;const Z=e;if(!(typeof N=="number"&&isFinite(N))){const H={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/byteLength",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[H]:i.push(H),e++}var D=Z===e}else var D=!0;if(D){if(w.byteOffset!==void 0){let N=w.byteOffset;const Z=e;if(!(typeof N=="number"&&isFinite(N))){const H={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/byteOffset",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[H]:i.push(H),e++}var D=Z===e}else var D=!0;if(D)if(w.length!==void 0){let N=w.length;const Z=e;if(!(typeof N=="number"&&isFinite(N))){const H={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/length",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[H]:i.push(H),e++}var D=Z===e}else var D=!0}}}}}}else{const ee={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[ee]:i.push(ee),e++}var v=j===e;if(T=T||v,!T){const ee=e;if(e===ee)if(w&&typeof w=="object"&&!Array.isArray(w)){let N;if(w.lastModified===void 0&&(N="lastModified")||w.name===void 0&&(N="name")||w.size===void 0&&(N="size")||w.type===void 0&&(N="type")||w.webkitRelativePath===void 0&&(N="webkitRelativePath")){const Z={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};i===null?i=[Z]:i.push(Z),e++}else{const Z=e;for(const I in w)if(!(I==="size"||I==="type"||I==="lastModified"||I==="name"||I==="webkitRelativePath")){const H={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:I},message:"must NOT have additional properties"};i===null?i=[H]:i.push(H),e++;break}if(Z===e){if(w.size!==void 0){let I=w.size;const H=e;if(!(typeof I=="number"&&isFinite(I))){const K={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/size",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/size/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[K]:i.push(K),e++}var b=H===e}else var b=!0;if(b){if(w.type!==void 0){const I=e;if(typeof w.type!="string"){const K={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),e++}var b=I===e}else var b=!0;if(b){if(w.lastModified!==void 0){let I=w.lastModified;const H=e;if(!(typeof I=="number"&&isFinite(I))){const le={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/lastModified",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/lastModified/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[le]:i.push(le),e++}var b=H===e}else var b=!0;if(b){if(w.name!==void 0){const I=e;if(typeof w.name!="string"){const K={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),e++}var b=I===e}else var b=!0;if(b)if(w.webkitRelativePath!==void 0){const I=e;if(typeof w.webkitRelativePath!="string"){const K={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1")+"/webkitRelativePath",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/webkitRelativePath/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),e++}var b=I===e}else var b=!0}}}}}}else{const N={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[N]:i.push(N),e++}var v=ee===e;T=T||v}}if(T)e=S,i!==null&&(S?i.length=S:i=null);else{const j={instancePath:t+"/body/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};i===null?i=[j]:i.push(j),e++}var M=_===e;if(!M)break}else{const h={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[h]:i.push(h),e++}var A=P===e;Q=Q||A}}if(Q)e=U,i!==null&&(U?i.length=U:i=null);else{const k={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[k]:i.push(k),e++,ye.errors=i,!1}var u=z===e}else var u=!0}}}}}else return ye.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ye.errors=i,e===0}const _s={type:"object",properties:{relativeUri:{type:"string",description:"Request path following the domain:port part."},scriptPath:{type:"string",description:"Path of the .php file to execute."},protocol:{type:"string",description:"Request protocol."},method:{$ref:"#/definitions/HTTPMethod",description:"Request method. Default: `GET`."},headers:{$ref:"#/definitions/PHPRequestHeaders",description:"Request headers."},body:{anyOf:[{type:"string"},{type:"object",properties:{BYTES_PER_ELEMENT:{type:"number"},buffer:{type:"object",properties:{byteLength:{type:"number"}},required:["byteLength"],additionalProperties:!1},byteLength:{type:"number"},byteOffset:{type:"number"},length:{type:"number"}},required:["BYTES_PER_ELEMENT","buffer","byteLength","byteOffset","length"],additionalProperties:{type:"number"}}],description:"Request body."},env:{type:"object",additionalProperties:{type:"string"},description:"Environment variables to set for this run."},$_SERVER:{type:"object",additionalProperties:{type:"string"},description:"$_SERVER entries to set for this run."},code:{type:"string",description:"The code snippet to eval instead of a php file."}},additionalProperties:!1};function oe(r,{instancePath:t="",parentData:o,parentDataProperty:p,rootData:l=r}={}){let i=null,e=0;if(e===0)if(r&&typeof r=="object"&&!Array.isArray(r)){const D=e;for(const b in r)if(!st.call(_s.properties,b))return oe.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:b},message:"must NOT have additional properties"}],!1;if(D===e){if(r.relativeUri!==void 0){const b=e;if(typeof r.relativeUri!="string")return oe.errors=[{instancePath:t+"/relativeUri",schemaPath:"#/properties/relativeUri/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=b===e}else var u=!0;if(u){if(r.scriptPath!==void 0){const b=e;if(typeof r.scriptPath!="string")return oe.errors=[{instancePath:t+"/scriptPath",schemaPath:"#/properties/scriptPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=b===e}else var u=!0;if(u){if(r.protocol!==void 0){const b=e;if(typeof r.protocol!="string")return oe.errors=[{instancePath:t+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=b===e}else var u=!0;if(u){if(r.method!==void 0){let b=r.method;const M=e;if(typeof b!="string")return oe.errors=[{instancePath:t+"/method",schemaPath:"#/definitions/HTTPMethod/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(b==="GET"||b==="POST"||b==="HEAD"||b==="OPTIONS"||b==="PATCH"||b==="PUT"||b==="DELETE"))return oe.errors=[{instancePath:t+"/method",schemaPath:"#/definitions/HTTPMethod/enum",keyword:"enum",params:{allowedValues:it.enum},message:"must be equal to one of the allowed values"}],!1;var u=M===e}else var u=!0;if(u){if(r.headers!==void 0){let b=r.headers;const M=e;if(e===e)if(b&&typeof b=="object"&&!Array.isArray(b))for(const E in b){const z=e;if(typeof b[E]!="string")return oe.errors=[{instancePath:t+"/headers/"+E.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/PHPRequestHeaders/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=z===e;if(!g)break}else return oe.errors=[{instancePath:t+"/headers",schemaPath:"#/definitions/PHPRequestHeaders/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=M===e}else var u=!0;if(u){if(r.body!==void 0){let b=r.body;const M=e,te=e;let Y=!1;const E=e;if(typeof b!="string"){const U={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[U]:i.push(U),e++}var A=E===e;if(Y=Y||A,!Y){const U=e;if(e===U)if(b&&typeof b=="object"&&!Array.isArray(b)){let c;if(b.BYTES_PER_ELEMENT===void 0&&(c="BYTES_PER_ELEMENT")||b.buffer===void 0&&(c="buffer")||b.byteLength===void 0&&(c="byteLength")||b.byteOffset===void 0&&(c="byteOffset")||b.length===void 0&&(c="length")){const L={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/1/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"};i===null?i=[L]:i.push(L),e++}else{const L=e;for(const k in b)if(!(k==="BYTES_PER_ELEMENT"||k==="buffer"||k==="byteLength"||k==="byteOffset"||k==="length")){let O=b[k];const P=e;if(!(typeof O=="number"&&isFinite(O))){const y={instancePath:t+"/body/"+k.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[y]:i.push(y),e++}var q=P===e;if(!q)break}if(L===e){if(b.BYTES_PER_ELEMENT!==void 0){let k=b.BYTES_PER_ELEMENT;const O=e;if(!(typeof k=="number"&&isFinite(k))){const P={instancePath:t+"/body/BYTES_PER_ELEMENT",schemaPath:"#/properties/body/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[P]:i.push(P),e++}var m=O===e}else var m=!0;if(m){if(b.buffer!==void 0){let k=b.buffer;const O=e;if(e===O)if(k&&typeof k=="object"&&!Array.isArray(k)){let y;if(k.byteLength===void 0&&(y="byteLength")){const h={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"};i===null?i=[h]:i.push(h),e++}else{const h=e;for(const w in k)if(w!=="byteLength"){const _={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:w},message:"must NOT have additional properties"};i===null?i=[_]:i.push(_),e++;break}if(h===e&&k.byteLength!==void 0){let w=k.byteLength;if(!(typeof w=="number"&&isFinite(w))){const _={instancePath:t+"/body/buffer/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[_]:i.push(_),e++}}}}else{const y={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[y]:i.push(y),e++}var m=O===e}else var m=!0;if(m){if(b.byteLength!==void 0){let k=b.byteLength;const O=e;if(!(typeof k=="number"&&isFinite(k))){const y={instancePath:t+"/body/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[y]:i.push(y),e++}var m=O===e}else var m=!0;if(m){if(b.byteOffset!==void 0){let k=b.byteOffset;const O=e;if(!(typeof k=="number"&&isFinite(k))){const y={instancePath:t+"/body/byteOffset",schemaPath:"#/properties/body/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[y]:i.push(y),e++}var m=O===e}else var m=!0;if(m)if(b.length!==void 0){let k=b.length;const O=e;if(!(typeof k=="number"&&isFinite(k))){const y={instancePath:t+"/body/length",schemaPath:"#/properties/body/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[y]:i.push(y),e++}var m=O===e}else var m=!0}}}}}}else{const c={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[c]:i.push(c),e++}var A=U===e;Y=Y||A}if(Y)e=te,i!==null&&(te?i.length=te:i=null);else{const U={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[U]:i.push(U),e++,oe.errors=i,!1}var u=M===e}else var u=!0;if(u){if(r.env!==void 0){let b=r.env;const M=e;if(e===M)if(b&&typeof b=="object"&&!Array.isArray(b))for(const Y in b){const E=e;if(typeof b[Y]!="string")return oe.errors=[{instancePath:t+"/env/"+Y.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/env/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=E===e;if(!v)break}else return oe.errors=[{instancePath:t+"/env",schemaPath:"#/properties/env/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=M===e}else var u=!0;if(u){if(r.$_SERVER!==void 0){let b=r.$_SERVER;const M=e;if(e===M)if(b&&typeof b=="object"&&!Array.isArray(b))for(const Y in b){const E=e;if(typeof b[Y]!="string")return oe.errors=[{instancePath:t+"/$_SERVER/"+Y.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24_SERVER/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var C=E===e;if(!C)break}else return oe.errors=[{instancePath:t+"/$_SERVER",schemaPath:"#/properties/%24_SERVER/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=M===e}else var u=!0;if(u)if(r.code!==void 0){const b=e;if(typeof r.code!="string")return oe.errors=[{instancePath:t+"/code",schemaPath:"#/properties/code/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=b===e}else var u=!0}}}}}}}}}else return oe.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return oe.errors=i,e===0}function n(r,{instancePath:t="",parentData:o,parentDataProperty:p,rootData:l=r}={}){let i=null,e=0;if(e===0)if(r&&typeof r=="object"&&!Array.isArray(r)){let ur;if(r.step===void 0&&(ur="step"))return n.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:ur},message:"must have required property '"+ur+"'"}],!1;{const V=r.step;if(typeof V=="string")if(V==="activatePlugin"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.pluginPath===void 0&&(d="pluginPath")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="pluginPath"||s==="pluginName"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/0/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/0/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var u=$===e}else var u=!0;if(u)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/0/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=a===e}else var u=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/0/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var g=f===e}else var g=!0;if(g){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/0/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="activatePlugin")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/0/properties/step/const",keyword:"const",params:{allowedValue:"activatePlugin"},message:"must be equal to constant"}],!1;var g=f===e}else var g=!0;if(g){if(r.pluginPath!==void 0){const s=e;if(typeof r.pluginPath!="string")return n.errors=[{instancePath:t+"/pluginPath",schemaPath:"#/oneOf/0/properties/pluginPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=s===e}else var g=!0;if(g)if(r.pluginName!==void 0){const s=e;if(typeof r.pluginName!="string")return n.errors=[{instancePath:t+"/pluginName",schemaPath:"#/oneOf/0/properties/pluginName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=s===e}else var g=!0}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="activateTheme"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.step===void 0&&(d="step")||r.themeFolderName===void 0&&(d="themeFolderName"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="themeFolderName"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/1/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/1/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var A=$===e}else var A=!0;if(A)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/1/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var A=a===e}else var A=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/1/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var q=f===e}else var q=!0;if(q){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/1/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="activateTheme")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/1/properties/step/const",keyword:"const",params:{allowedValue:"activateTheme"},message:"must be equal to constant"}],!1;var q=f===e}else var q=!0;if(q)if(r.themeFolderName!==void 0){const s=e;if(typeof r.themeFolderName!="string")return n.errors=[{instancePath:t+"/themeFolderName",schemaPath:"#/oneOf/1/properties/themeFolderName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var q=s===e}else var q=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="cp"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.fromPath===void 0&&(d="fromPath")||r.step===void 0&&(d="step")||r.toPath===void 0&&(d="toPath"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/2/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="fromPath"||s==="toPath"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/2/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/2/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/2/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var m=$===e}else var m=!0;if(m)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/2/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=a===e}else var m=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/2/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var v=f===e}else var v=!0;if(v){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/2/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="cp")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/2/properties/step/const",keyword:"const",params:{allowedValue:"cp"},message:"must be equal to constant"}],!1;var v=f===e}else var v=!0;if(v){if(r.fromPath!==void 0){const s=e;if(typeof r.fromPath!="string")return n.errors=[{instancePath:t+"/fromPath",schemaPath:"#/oneOf/2/properties/fromPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=s===e}else var v=!0;if(v)if(r.toPath!==void 0){const s=e;if(typeof r.toPath!="string")return n.errors=[{instancePath:t+"/toPath",schemaPath:"#/oneOf/2/properties/toPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=s===e}else var v=!0}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="defineWpConfigConsts"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.consts===void 0&&(d="consts")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/3/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="consts"||s==="method"||s==="virtualize"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/3/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/3/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/3/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var C=$===e}else var C=!0;if(C)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/3/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var C=a===e}else var C=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/3/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var D=f===e}else var D=!0;if(D){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/3/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="defineWpConfigConsts")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/3/properties/step/const",keyword:"const",params:{allowedValue:"defineWpConfigConsts"},message:"must be equal to constant"}],!1;var D=f===e}else var D=!0;if(D){if(r.consts!==void 0){let s=r.consts;const f=e;if(e===f&&!(s&&typeof s=="object"&&!Array.isArray(s)))return n.errors=[{instancePath:t+"/consts",schemaPath:"#/oneOf/3/properties/consts/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var D=f===e}else var D=!0;if(D){if(r.method!==void 0){let s=r.method;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/method",schemaPath:"#/oneOf/3/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(s==="rewrite-wp-config"||s==="define-before-run"))return n.errors=[{instancePath:t+"/method",schemaPath:"#/oneOf/3/properties/method/enum",keyword:"enum",params:{allowedValues:yr.oneOf[3].properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var D=f===e}else var D=!0;if(D)if(r.virtualize!==void 0){const s=e;if(typeof r.virtualize!="boolean")return n.errors=[{instancePath:t+"/virtualize",schemaPath:"#/oneOf/3/properties/virtualize/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var D=s===e}else var D=!0}}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="defineSiteUrl"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.siteUrl===void 0&&(d="siteUrl")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/4/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="siteUrl"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/4/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/4/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/4/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var b=$===e}else var b=!0;if(b)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/4/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var b=a===e}else var b=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/4/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var M=f===e}else var M=!0;if(M){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/4/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="defineSiteUrl")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/4/properties/step/const",keyword:"const",params:{allowedValue:"defineSiteUrl"},message:"must be equal to constant"}],!1;var M=f===e}else var M=!0;if(M)if(r.siteUrl!==void 0){const s=e;if(typeof r.siteUrl!="string")return n.errors=[{instancePath:t+"/siteUrl",schemaPath:"#/oneOf/4/properties/siteUrl/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=s===e}else var M=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/4/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="enableMultisite"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/5/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/5/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/5/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/5/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var te=$===e}else var te=!0;if(te)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/5/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var te=a===e}else var te=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/5/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Y=f===e}else var Y=!0;if(Y)if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/5/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="enableMultisite")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/5/properties/step/const",keyword:"const",params:{allowedValue:"enableMultisite"},message:"must be equal to constant"}],!1;var Y=f===e}else var Y=!0}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/5/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="importWxr"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.file===void 0&&(d="file")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/6/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="file"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/6/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/6/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/6/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var E=$===e}else var E=!0;if(E)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/6/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var E=a===e}else var E=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/6/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var z=f===e}else var z=!0;if(z){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/6/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="importWxr")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/6/properties/step/const",keyword:"const",params:{allowedValue:"importWxr"},message:"must be equal to constant"}],!1;var z=f===e}else var z=!0;if(z)if(r.file!==void 0){const s=e;re(r.file,{instancePath:t+"/file",parentData:r,parentDataProperty:"file",rootData:l})||(i=i===null?re.errors:i.concat(re.errors),e=i.length);var z=s===e}else var z=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/6/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="importThemeStarterContent"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/7/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="themeSlug"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/7/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/7/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/7/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var U=$===e}else var U=!0;if(U)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/7/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var U=a===e}else var U=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/7/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Q=f===e}else var Q=!0;if(Q){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/7/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="importThemeStarterContent")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/7/properties/step/const",keyword:"const",params:{allowedValue:"importThemeStarterContent"},message:"must be equal to constant"}],!1;var Q=f===e}else var Q=!0;if(Q)if(r.themeSlug!==void 0){const s=e;if(typeof r.themeSlug!="string")return n.errors=[{instancePath:t+"/themeSlug",schemaPath:"#/oneOf/7/properties/themeSlug/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Q=s===e}else var Q=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/7/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="importWordPressFiles"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.step===void 0&&(d="step")||r.wordPressFilesZip===void 0&&(d="wordPressFilesZip"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/8/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="wordPressFilesZip"||s==="pathInZip"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/8/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/8/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/8/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var c=$===e}else var c=!0;if(c)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/8/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=a===e}else var c=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/8/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var L=f===e}else var L=!0;if(L){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/8/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="importWordPressFiles")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/8/properties/step/const",keyword:"const",params:{allowedValue:"importWordPressFiles"},message:"must be equal to constant"}],!1;var L=f===e}else var L=!0;if(L){if(r.wordPressFilesZip!==void 0){const s=e;re(r.wordPressFilesZip,{instancePath:t+"/wordPressFilesZip",parentData:r,parentDataProperty:"wordPressFilesZip",rootData:l})||(i=i===null?re.errors:i.concat(re.errors),e=i.length);var L=s===e}else var L=!0;if(L)if(r.pathInZip!==void 0){const s=e;if(typeof r.pathInZip!="string")return n.errors=[{instancePath:t+"/pathInZip",schemaPath:"#/oneOf/8/properties/pathInZip/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var L=s===e}else var L=!0}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/8/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="installPlugin"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.pluginZipFile===void 0&&(d="pluginZipFile")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/9/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="ifAlreadyInstalled"||s==="step"||s==="pluginZipFile"||s==="options"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/9/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/9/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/9/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var k=$===e}else var k=!0;if(k)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/9/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var k=a===e}else var k=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/9/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var O=f===e}else var O=!0;if(O){if(r.ifAlreadyInstalled!==void 0){let s=r.ifAlreadyInstalled;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/ifAlreadyInstalled",schemaPath:"#/oneOf/9/properties/ifAlreadyInstalled/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(s==="overwrite"||s==="skip"||s==="error"))return n.errors=[{instancePath:t+"/ifAlreadyInstalled",schemaPath:"#/oneOf/9/properties/ifAlreadyInstalled/enum",keyword:"enum",params:{allowedValues:yr.oneOf[9].properties.ifAlreadyInstalled.enum},message:"must be equal to one of the allowed values"}],!1;var O=f===e}else var O=!0;if(O){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/9/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="installPlugin")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/9/properties/step/const",keyword:"const",params:{allowedValue:"installPlugin"},message:"must be equal to constant"}],!1;var O=f===e}else var O=!0;if(O){if(r.pluginZipFile!==void 0){const s=e;re(r.pluginZipFile,{instancePath:t+"/pluginZipFile",parentData:r,parentDataProperty:"pluginZipFile",rootData:l})||(i=i===null?re.errors:i.concat(re.errors),e=i.length);var O=s===e}else var O=!0;if(O)if(r.options!==void 0){let s=r.options;const f=e;if(e===e)if(s&&typeof s=="object"&&!Array.isArray(s)){const $=e;for(const ke in s)if(ke!=="activate")return n.errors=[{instancePath:t+"/options",schemaPath:"#/definitions/InstallPluginOptions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ke},message:"must NOT have additional properties"}],!1;if($===e&&s.activate!==void 0&&typeof s.activate!="boolean")return n.errors=[{instancePath:t+"/options/activate",schemaPath:"#/definitions/InstallPluginOptions/properties/activate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1}else return n.errors=[{instancePath:t+"/options",schemaPath:"#/definitions/InstallPluginOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var O=f===e}else var O=!0}}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/9/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="installTheme"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.step===void 0&&(d="step")||r.themeZipFile===void 0&&(d="themeZipFile"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/10/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="ifAlreadyInstalled"||s==="step"||s==="themeZipFile"||s==="options"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/10/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/10/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/10/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var P=$===e}else var P=!0;if(P)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/10/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var P=a===e}else var P=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/10/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=f===e}else var y=!0;if(y){if(r.ifAlreadyInstalled!==void 0){let s=r.ifAlreadyInstalled;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/ifAlreadyInstalled",schemaPath:"#/oneOf/10/properties/ifAlreadyInstalled/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(s==="overwrite"||s==="skip"||s==="error"))return n.errors=[{instancePath:t+"/ifAlreadyInstalled",schemaPath:"#/oneOf/10/properties/ifAlreadyInstalled/enum",keyword:"enum",params:{allowedValues:yr.oneOf[10].properties.ifAlreadyInstalled.enum},message:"must be equal to one of the allowed values"}],!1;var y=f===e}else var y=!0;if(y){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/10/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="installTheme")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/10/properties/step/const",keyword:"const",params:{allowedValue:"installTheme"},message:"must be equal to constant"}],!1;var y=f===e}else var y=!0;if(y){if(r.themeZipFile!==void 0){const s=e;re(r.themeZipFile,{instancePath:t+"/themeZipFile",parentData:r,parentDataProperty:"themeZipFile",rootData:l})||(i=i===null?re.errors:i.concat(re.errors),e=i.length);var y=s===e}else var y=!0;if(y)if(r.options!==void 0){let s=r.options;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const a=e;for(const $ in s)if(!($==="activate"||$==="importStarterContent"))return n.errors=[{instancePath:t+"/options",schemaPath:"#/oneOf/10/properties/options/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:$},message:"must NOT have additional properties"}],!1;if(a===e){if(s.activate!==void 0){const $=e;if(typeof s.activate!="boolean")return n.errors=[{instancePath:t+"/options/activate",schemaPath:"#/oneOf/10/properties/options/properties/activate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var h=$===e}else var h=!0;if(h)if(s.importStarterContent!==void 0){const $=e;if(typeof s.importStarterContent!="boolean")return n.errors=[{instancePath:t+"/options/importStarterContent",schemaPath:"#/oneOf/10/properties/options/properties/importStarterContent/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var h=$===e}else var h=!0}}else return n.errors=[{instancePath:t+"/options",schemaPath:"#/oneOf/10/properties/options/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=f===e}else var y=!0}}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/10/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="login"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/11/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="username"||s==="password"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/11/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/11/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/11/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var w=$===e}else var w=!0;if(w)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/11/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=a===e}else var w=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/11/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var _=f===e}else var _=!0;if(_){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/11/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="login")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/11/properties/step/const",keyword:"const",params:{allowedValue:"login"},message:"must be equal to constant"}],!1;var _=f===e}else var _=!0;if(_){if(r.username!==void 0){const s=e;if(typeof r.username!="string")return n.errors=[{instancePath:t+"/username",schemaPath:"#/oneOf/11/properties/username/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var _=s===e}else var _=!0;if(_)if(r.password!==void 0){const s=e;if(typeof r.password!="string")return n.errors=[{instancePath:t+"/password",schemaPath:"#/oneOf/11/properties/password/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var _=s===e}else var _=!0}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/11/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="mkdir"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.path===void 0&&(d="path")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/12/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="path"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/12/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/12/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/12/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var S=$===e}else var S=!0;if(S)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/12/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=a===e}else var S=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/12/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var T=f===e}else var T=!0;if(T){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/12/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="mkdir")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/12/properties/step/const",keyword:"const",params:{allowedValue:"mkdir"},message:"must be equal to constant"}],!1;var T=f===e}else var T=!0;if(T)if(r.path!==void 0){const s=e;if(typeof r.path!="string")return n.errors=[{instancePath:t+"/path",schemaPath:"#/oneOf/12/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var T=s===e}else var T=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/12/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="mv"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.fromPath===void 0&&(d="fromPath")||r.step===void 0&&(d="step")||r.toPath===void 0&&(d="toPath"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/13/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="fromPath"||s==="toPath"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/13/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/13/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/13/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var F=$===e}else var F=!0;if(F)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/13/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var F=a===e}else var F=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/13/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var j=f===e}else var j=!0;if(j){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/13/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="mv")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/13/properties/step/const",keyword:"const",params:{allowedValue:"mv"},message:"must be equal to constant"}],!1;var j=f===e}else var j=!0;if(j){if(r.fromPath!==void 0){const s=e;if(typeof r.fromPath!="string")return n.errors=[{instancePath:t+"/fromPath",schemaPath:"#/oneOf/13/properties/fromPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var j=s===e}else var j=!0;if(j)if(r.toPath!==void 0){const s=e;if(typeof r.toPath!="string")return n.errors=[{instancePath:t+"/toPath",schemaPath:"#/oneOf/13/properties/toPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var j=s===e}else var j=!0}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/13/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="resetData"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/14/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/14/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/14/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/14/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var B=$===e}else var B=!0;if(B)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/14/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var B=a===e}else var B=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/14/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ee=f===e}else var ee=!0;if(ee)if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/14/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="resetData")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/14/properties/step/const",keyword:"const",params:{allowedValue:"resetData"},message:"must be equal to constant"}],!1;var ee=f===e}else var ee=!0}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/14/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="request"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.request===void 0&&(d="request")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/15/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="request"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/15/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/15/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/15/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var J=$===e}else var J=!0;if(J)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/15/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var J=a===e}else var J=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/15/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var N=f===e}else var N=!0;if(N){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/15/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="request")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/15/properties/step/const",keyword:"const",params:{allowedValue:"request"},message:"must be equal to constant"}],!1;var N=f===e}else var N=!0;if(N)if(r.request!==void 0){const s=e;ye(r.request,{instancePath:t+"/request",parentData:r,parentDataProperty:"request",rootData:l})||(i=i===null?ye.errors:i.concat(ye.errors),e=i.length);var N=s===e}else var N=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/15/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="rm"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.path===void 0&&(d="path")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/16/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="path"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/16/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/16/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/16/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Z=$===e}else var Z=!0;if(Z)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/16/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Z=a===e}else var Z=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/16/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var I=f===e}else var I=!0;if(I){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/16/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="rm")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/16/properties/step/const",keyword:"const",params:{allowedValue:"rm"},message:"must be equal to constant"}],!1;var I=f===e}else var I=!0;if(I)if(r.path!==void 0){const s=e;if(typeof r.path!="string")return n.errors=[{instancePath:t+"/path",schemaPath:"#/oneOf/16/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var I=s===e}else var I=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/16/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="rmdir"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.path===void 0&&(d="path")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/17/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="path"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/17/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/17/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/17/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var H=$===e}else var H=!0;if(H)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/17/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var H=a===e}else var H=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/17/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var K=f===e}else var K=!0;if(K){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/17/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="rmdir")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/17/properties/step/const",keyword:"const",params:{allowedValue:"rmdir"},message:"must be equal to constant"}],!1;var K=f===e}else var K=!0;if(K)if(r.path!==void 0){const s=e;if(typeof r.path!="string")return n.errors=[{instancePath:t+"/path",schemaPath:"#/oneOf/17/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var K=s===e}else var K=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/17/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="runPHP"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.code===void 0&&(d="code")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/18/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="code"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/18/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/18/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/18/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var le=$===e}else var le=!0;if(le)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/18/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var le=a===e}else var le=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/18/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var fe=f===e}else var fe=!0;if(fe){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/18/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="runPHP")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/18/properties/step/const",keyword:"const",params:{allowedValue:"runPHP"},message:"must be equal to constant"}],!1;var fe=f===e}else var fe=!0;if(fe)if(r.code!==void 0){const s=e;if(typeof r.code!="string")return n.errors=[{instancePath:t+"/code",schemaPath:"#/oneOf/18/properties/code/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var fe=s===e}else var fe=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/18/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="runPHPWithOptions"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.options===void 0&&(d="options")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/19/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="options"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/19/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/19/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/19/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Ce=$===e}else var Ce=!0;if(Ce)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/19/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ce=a===e}else var Ce=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/19/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ee=f===e}else var Ee=!0;if(Ee){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/19/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="runPHPWithOptions")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/19/properties/step/const",keyword:"const",params:{allowedValue:"runPHPWithOptions"},message:"must be equal to constant"}],!1;var Ee=f===e}else var Ee=!0;if(Ee)if(r.options!==void 0){const s=e;oe(r.options,{instancePath:t+"/options",parentData:r,parentDataProperty:"options",rootData:l})||(i=i===null?oe.errors:i.concat(oe.errors),e=i.length);var Ee=s===e}else var Ee=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/19/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="runWpInstallationWizard"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.options===void 0&&(d="options")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/20/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="options"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/20/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/20/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/20/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Ie=$===e}else var Ie=!0;if(Ie)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/20/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ie=a===e}else var Ie=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/20/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var $e=f===e}else var $e=!0;if($e){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/20/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="runWpInstallationWizard")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/20/properties/step/const",keyword:"const",params:{allowedValue:"runWpInstallationWizard"},message:"must be equal to constant"}],!1;var $e=f===e}else var $e=!0;if($e)if(r.options!==void 0){let s=r.options;const f=e;if(e===e)if(s&&typeof s=="object"&&!Array.isArray(s)){const $=e;for(const ke in s)if(!(ke==="adminUsername"||ke==="adminPassword"))return n.errors=[{instancePath:t+"/options",schemaPath:"#/definitions/WordPressInstallationOptions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ke},message:"must NOT have additional properties"}],!1;if($===e){if(s.adminUsername!==void 0){const ke=e;if(typeof s.adminUsername!="string")return n.errors=[{instancePath:t+"/options/adminUsername",schemaPath:"#/definitions/WordPressInstallationOptions/properties/adminUsername/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var De=ke===e}else var De=!0;if(De)if(s.adminPassword!==void 0){const ke=e;if(typeof s.adminPassword!="string")return n.errors=[{instancePath:t+"/options/adminPassword",schemaPath:"#/definitions/WordPressInstallationOptions/properties/adminPassword/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var De=ke===e}else var De=!0}}else return n.errors=[{instancePath:t+"/options",schemaPath:"#/definitions/WordPressInstallationOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var $e=f===e}else var $e=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/20/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="runSql"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.sql===void 0&&(d="sql")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/21/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="sql"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/21/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/21/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/21/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var We=$===e}else var We=!0;if(We)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/21/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var We=a===e}else var We=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/21/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Te=f===e}else var Te=!0;if(Te){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/21/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="runSql")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/21/properties/step/const",keyword:"const",params:{allowedValue:"runSql"},message:"must be equal to constant"}],!1;var Te=f===e}else var Te=!0;if(Te)if(r.sql!==void 0){const s=e;re(r.sql,{instancePath:t+"/sql",parentData:r,parentDataProperty:"sql",rootData:l})||(i=i===null?re.errors:i.concat(re.errors),e=i.length);var Te=s===e}else var Te=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/21/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="setSiteOptions"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.options===void 0&&(d="options")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/22/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="options"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/22/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/22/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/22/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Me=$===e}else var Me=!0;if(Me)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/22/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Me=a===e}else var Me=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/22/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var je=f===e}else var je=!0;if(je){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/22/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="setSiteOptions")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/22/properties/step/const",keyword:"const",params:{allowedValue:"setSiteOptions"},message:"must be equal to constant"}],!1;var je=f===e}else var je=!0;if(je)if(r.options!==void 0){let s=r.options;const f=e;if(e===f&&!(s&&typeof s=="object"&&!Array.isArray(s)))return n.errors=[{instancePath:t+"/options",schemaPath:"#/oneOf/22/properties/options/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var je=f===e}else var je=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/22/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="unzip"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.extractToPath===void 0&&(d="extractToPath")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/23/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="zipFile"||s==="zipPath"||s==="extractToPath"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/23/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/23/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/23/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Be=$===e}else var Be=!0;if(Be)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/23/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Be=a===e}else var Be=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/23/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ue=f===e}else var ue=!0;if(ue){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/23/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="unzip")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/23/properties/step/const",keyword:"const",params:{allowedValue:"unzip"},message:"must be equal to constant"}],!1;var ue=f===e}else var ue=!0;if(ue){if(r.zipFile!==void 0){const s=e;re(r.zipFile,{instancePath:t+"/zipFile",parentData:r,parentDataProperty:"zipFile",rootData:l})||(i=i===null?re.errors:i.concat(re.errors),e=i.length);var ue=s===e}else var ue=!0;if(ue){if(r.zipPath!==void 0){const s=e;if(typeof r.zipPath!="string")return n.errors=[{instancePath:t+"/zipPath",schemaPath:"#/oneOf/23/properties/zipPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ue=s===e}else var ue=!0;if(ue)if(r.extractToPath!==void 0){const s=e;if(typeof r.extractToPath!="string")return n.errors=[{instancePath:t+"/extractToPath",schemaPath:"#/oneOf/23/properties/extractToPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ue=s===e}else var ue=!0}}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/23/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="updateUserMeta"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.meta===void 0&&(d="meta")||r.step===void 0&&(d="step")||r.userId===void 0&&(d="userId"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/24/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="meta"||s==="userId"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/24/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/24/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Ue=$===e}else var Ue=!0;if(Ue)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/24/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ue=a===e}else var Ue=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/24/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ve=f===e}else var ve=!0;if(ve){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/24/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="updateUserMeta")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/24/properties/step/const",keyword:"const",params:{allowedValue:"updateUserMeta"},message:"must be equal to constant"}],!1;var ve=f===e}else var ve=!0;if(ve){if(r.meta!==void 0){let s=r.meta;const f=e;if(e===f&&!(s&&typeof s=="object"&&!Array.isArray(s)))return n.errors=[{instancePath:t+"/meta",schemaPath:"#/oneOf/24/properties/meta/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ve=f===e}else var ve=!0;if(ve)if(r.userId!==void 0){let s=r.userId;const f=e;if(!(typeof s=="number"&&isFinite(s)))return n.errors=[{instancePath:t+"/userId",schemaPath:"#/oneOf/24/properties/userId/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var ve=f===e}else var ve=!0}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/24/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="writeFile"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.data===void 0&&(d="data")||r.path===void 0&&(d="path")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/25/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="path"||s==="data"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/25/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/25/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/25/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var ze=$===e}else var ze=!0;if(ze)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/25/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ze=a===e}else var ze=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/25/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Pe=f===e}else var Pe=!0;if(Pe){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/25/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="writeFile")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/25/properties/step/const",keyword:"const",params:{allowedValue:"writeFile"},message:"must be equal to constant"}],!1;var Pe=f===e}else var Pe=!0;if(Pe){if(r.path!==void 0){const s=e;if(typeof r.path!="string")return n.errors=[{instancePath:t+"/path",schemaPath:"#/oneOf/25/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Pe=s===e}else var Pe=!0;if(Pe)if(r.data!==void 0){let s=r.data;const f=e,R=e;let a=!1;const $=e;re(s,{instancePath:t+"/data",parentData:r,parentDataProperty:"data",rootData:l})||(i=i===null?re.errors:i.concat(re.errors),e=i.length);var xe=$===e;if(a=a||xe,!a){const ce=e;if(typeof s!="string"){const Oe={instancePath:t+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Oe]:i.push(Oe),e++}var xe=ce===e;if(a=a||xe,!a){const Oe=e;if(e===Oe)if(s&&typeof s=="object"&&!Array.isArray(s)){let he;if(s.BYTES_PER_ELEMENT===void 0&&(he="BYTES_PER_ELEMENT")||s.buffer===void 0&&(he="buffer")||s.byteLength===void 0&&(he="byteLength")||s.byteOffset===void 0&&(he="byteOffset")||s.length===void 0&&(he="length")){const Ye={instancePath:t+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf/2/required",keyword:"required",params:{missingProperty:he},message:"must have required property '"+he+"'"};i===null?i=[Ye]:i.push(Ye),e++}else{const Ye=e;for(const G in s)if(!(G==="BYTES_PER_ELEMENT"||G==="buffer"||G==="byteLength"||G==="byteOffset"||G==="length")){let me=s[G];const Ze=e;if(!(typeof me=="number"&&isFinite(me))){const ne={instancePath:t+"/data/"+G.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/oneOf/25/properties/data/anyOf/2/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ne]:i.push(ne),e++}var dt=Ze===e;if(!dt)break}if(Ye===e){if(s.BYTES_PER_ELEMENT!==void 0){let G=s.BYTES_PER_ELEMENT;const me=e;if(!(typeof G=="number"&&isFinite(G))){const Ze={instancePath:t+"/data/BYTES_PER_ELEMENT",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Ze]:i.push(Ze),e++}var de=me===e}else var de=!0;if(de){if(s.buffer!==void 0){let G=s.buffer;const me=e;if(e===me)if(G&&typeof G=="object"&&!Array.isArray(G)){let ne;if(G.byteLength===void 0&&(ne="byteLength")){const Qe={instancePath:t+"/data/buffer",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/required",keyword:"required",params:{missingProperty:ne},message:"must have required property '"+ne+"'"};i===null?i=[Qe]:i.push(Qe),e++}else{const Qe=e;for(const Ne in G)if(Ne!=="byteLength"){const Fe={instancePath:t+"/data/buffer",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:Ne},message:"must NOT have additional properties"};i===null?i=[Fe]:i.push(Fe),e++;break}if(Qe===e&&G.byteLength!==void 0){let Ne=G.byteLength;if(!(typeof Ne=="number"&&isFinite(Ne))){const Fe={instancePath:t+"/data/buffer/byteLength",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Fe]:i.push(Fe),e++}}}}else{const ne={instancePath:t+"/data/buffer",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[ne]:i.push(ne),e++}var de=me===e}else var de=!0;if(de){if(s.byteLength!==void 0){let G=s.byteLength;const me=e;if(!(typeof G=="number"&&isFinite(G))){const ne={instancePath:t+"/data/byteLength",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ne]:i.push(ne),e++}var de=me===e}else var de=!0;if(de){if(s.byteOffset!==void 0){let G=s.byteOffset;const me=e;if(!(typeof G=="number"&&isFinite(G))){const ne={instancePath:t+"/data/byteOffset",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ne]:i.push(ne),e++}var de=me===e}else var de=!0;if(de)if(s.length!==void 0){let G=s.length;const me=e;if(!(typeof G=="number"&&isFinite(G))){const ne={instancePath:t+"/data/length",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ne]:i.push(ne),e++}var de=me===e}else var de=!0}}}}}}else{const he={instancePath:t+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[he]:i.push(he),e++}var xe=Oe===e;a=a||xe}}if(a)e=R,i!==null&&(R?i.length=R:i=null);else{const ce={instancePath:t+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[ce]:i.push(ce),e++,n.errors=i,!1}var Pe=f===e}else var Pe=!0}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/25/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="wp-cli"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.command===void 0&&(d="command")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/26/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="command"||s==="wpCliPath"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/26/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/26/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/26/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Ve=$===e}else var Ve=!0;if(Ve)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/26/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ve=a===e}else var Ve=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/26/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var _e=f===e}else var _e=!0;if(_e){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/26/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="wp-cli")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/26/properties/step/const",keyword:"const",params:{allowedValue:"wp-cli"},message:"must be equal to constant"}],!1;var _e=f===e}else var _e=!0;if(_e){if(r.command!==void 0){let s=r.command;const f=e,R=e;let a=!1;const $=e;if(typeof s!="string"){const ce={instancePath:t+"/command",schemaPath:"#/oneOf/26/properties/command/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[ce]:i.push(ce),e++}var fr=$===e;if(a=a||fr,!a){const ce=e;if(e===ce)if(Array.isArray(s)){var Ar=!0;const Oe=s.length;for(let Ge=0;Ge<Oe;Ge++){const he=e;if(typeof s[Ge]!="string"){const G={instancePath:t+"/command/"+Ge,schemaPath:"#/oneOf/26/properties/command/anyOf/1/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[G]:i.push(G),e++}var Ar=he===e;if(!Ar)break}}else{const Oe={instancePath:t+"/command",schemaPath:"#/oneOf/26/properties/command/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Oe]:i.push(Oe),e++}var fr=ce===e;a=a||fr}if(a)e=R,i!==null&&(R?i.length=R:i=null);else{const ce={instancePath:t+"/command",schemaPath:"#/oneOf/26/properties/command/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[ce]:i.push(ce),e++,n.errors=i,!1}var _e=f===e}else var _e=!0;if(_e)if(r.wpCliPath!==void 0){const s=e;if(typeof r.wpCliPath!="string")return n.errors=[{instancePath:t+"/wpCliPath",schemaPath:"#/oneOf/26/properties/wpCliPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var _e=s===e}else var _e=!0}}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/26/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(V==="setSiteLanguage"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let d;if(r.language===void 0&&(d="language")||r.step===void 0&&(d="step"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/27/required",keyword:"required",params:{missingProperty:d},message:"must have required property '"+d+"'"}],!1;{const x=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="language"))return n.errors=[{instancePath:t,schemaPath:"#/oneOf/27/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(x===e){if(r.progress!==void 0){let s=r.progress;const f=e;if(e===f)if(s&&typeof s=="object"&&!Array.isArray(s)){const R=e;for(const a in s)if(!(a==="weight"||a==="caption"))return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/27/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;if(R===e){if(s.weight!==void 0){let a=s.weight;const $=e;if(!(typeof a=="number"&&isFinite(a)))return n.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/27/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var He=$===e}else var He=!0;if(He)if(s.caption!==void 0){const a=e;if(typeof s.caption!="string")return n.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/27/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var He=a===e}else var He=!0}}else return n.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/27/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Ae=f===e}else var Ae=!0;if(Ae){if(r.step!==void 0){let s=r.step;const f=e;if(typeof s!="string")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/27/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="setSiteLanguage")return n.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/27/properties/step/const",keyword:"const",params:{allowedValue:"setSiteLanguage"},message:"must be equal to constant"}],!1;var Ae=f===e}else var Ae=!0;if(Ae)if(r.language!==void 0){const s=e;if(typeof r.language!="string")return n.errors=[{instancePath:t+"/language",schemaPath:"#/oneOf/27/properties/language/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ae=s===e}else var Ae=!0}}}}else return n.errors=[{instancePath:t,schemaPath:"#/oneOf/27/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else return n.errors=[{instancePath:t,schemaPath:"#/discriminator",keyword:"discriminator",params:{error:"mapping",tag:"step",tagValue:V},message:'value of tag "step" must be in oneOf'}],!1;else return n.errors=[{instancePath:t,schemaPath:"#/discriminator",keyword:"discriminator",params:{error:"tag",tag:"step",tagValue:V},message:'tag "step" must be string'}],!1}}else return n.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return n.errors=i,e===0}function W(r,{instancePath:t="",parentData:o,parentDataProperty:p,rootData:l=r}={}){let i=null,e=0;if(e===0)if(r&&typeof r=="object"&&!Array.isArray(r)){const Q=e;for(const c in r)if(!st.call(ws.properties,c))return W.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;if(Q===e){if(r.landingPage!==void 0){const c=e;if(typeof r.landingPage!="string")return W.errors=[{instancePath:t+"/landingPage",schemaPath:"#/properties/landingPage/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=c===e}else var u=!0;if(u){if(r.description!==void 0){const c=e;if(typeof r.description!="string")return W.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=c===e}else var u=!0;if(u){if(r.meta!==void 0){let c=r.meta;const L=e;if(e===L)if(c&&typeof c=="object"&&!Array.isArray(c)){let O;if(c.title===void 0&&(O="title")||c.author===void 0&&(O="author"))return W.errors=[{instancePath:t+"/meta",schemaPath:"#/properties/meta/required",keyword:"required",params:{missingProperty:O},message:"must have required property '"+O+"'"}],!1;{const P=e;for(const y in c)if(!(y==="title"||y==="description"||y==="author"||y==="categories"))return W.errors=[{instancePath:t+"/meta",schemaPath:"#/properties/meta/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(P===e){if(c.title!==void 0){const y=e;if(typeof c.title!="string")return W.errors=[{instancePath:t+"/meta/title",schemaPath:"#/properties/meta/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=y===e}else var g=!0;if(g){if(c.description!==void 0){const y=e;if(typeof c.description!="string")return W.errors=[{instancePath:t+"/meta/description",schemaPath:"#/properties/meta/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=y===e}else var g=!0;if(g){if(c.author!==void 0){const y=e;if(typeof c.author!="string")return W.errors=[{instancePath:t+"/meta/author",schemaPath:"#/properties/meta/properties/author/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=y===e}else var g=!0;if(g)if(c.categories!==void 0){let y=c.categories;const h=e;if(e===h)if(Array.isArray(y)){var A=!0;const _=y.length;for(let S=0;S<_;S++){const T=e;if(typeof y[S]!="string")return W.errors=[{instancePath:t+"/meta/categories/"+S,schemaPath:"#/properties/meta/properties/categories/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var A=T===e;if(!A)break}}else return W.errors=[{instancePath:t+"/meta/categories",schemaPath:"#/properties/meta/properties/categories/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var g=h===e}else var g=!0}}}}}else return W.errors=[{instancePath:t+"/meta",schemaPath:"#/properties/meta/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=L===e}else var u=!0;if(u){if(r.preferredVersions!==void 0){let c=r.preferredVersions;const L=e;if(e===L)if(c&&typeof c=="object"&&!Array.isArray(c)){let O;if(c.php===void 0&&(O="php")||c.wp===void 0&&(O="wp"))return W.errors=[{instancePath:t+"/preferredVersions",schemaPath:"#/properties/preferredVersions/required",keyword:"required",params:{missingProperty:O},message:"must have required property '"+O+"'"}],!1;{const P=e;for(const y in c)if(!(y==="php"||y==="wp"))return W.errors=[{instancePath:t+"/preferredVersions",schemaPath:"#/properties/preferredVersions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:y},message:"must NOT have additional properties"}],!1;if(P===e){if(c.php!==void 0){let y=c.php;const h=e,w=e;let _=!1;const S=e;if(typeof y!="string"){const T={instancePath:t+"/preferredVersions/php",schemaPath:"#/definitions/SupportedPHPVersion/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[T]:i.push(T),e++}if(!(y==="8.3"||y==="8.2"||y==="8.1"||y==="8.0"||y==="7.4"||y==="7.3"||y==="7.2"||y==="7.1"||y==="7.0")){const T={instancePath:t+"/preferredVersions/php",schemaPath:"#/definitions/SupportedPHPVersion/enum",keyword:"enum",params:{allowedValues:vs.enum},message:"must be equal to one of the allowed values"};i===null?i=[T]:i.push(T),e++}var q=S===e;if(_=_||q,!_){const T=e;if(typeof y!="string"){const j={instancePath:t+"/preferredVersions/php",schemaPath:"#/properties/preferredVersions/properties/php/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[j]:i.push(j),e++}if(y!=="latest"){const j={instancePath:t+"/preferredVersions/php",schemaPath:"#/properties/preferredVersions/properties/php/anyOf/1/const",keyword:"const",params:{allowedValue:"latest"},message:"must be equal to constant"};i===null?i=[j]:i.push(j),e++}var q=T===e;_=_||q}if(_)e=w,i!==null&&(w?i.length=w:i=null);else{const T={instancePath:t+"/preferredVersions/php",schemaPath:"#/properties/preferredVersions/properties/php/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[T]:i.push(T),e++,W.errors=i,!1}var m=h===e}else var m=!0;if(m)if(c.wp!==void 0){const y=e;if(typeof c.wp!="string")return W.errors=[{instancePath:t+"/preferredVersions/wp",schemaPath:"#/properties/preferredVersions/properties/wp/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var m=y===e}else var m=!0}}}else return W.errors=[{instancePath:t+"/preferredVersions",schemaPath:"#/properties/preferredVersions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=L===e}else var u=!0;if(u){if(r.features!==void 0){let c=r.features;const L=e;if(e===L)if(c&&typeof c=="object"&&!Array.isArray(c)){const O=e;for(const P in c)if(P!=="networking")return W.errors=[{instancePath:t+"/features",schemaPath:"#/properties/features/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:P},message:"must NOT have additional properties"}],!1;if(O===e&&c.networking!==void 0&&typeof c.networking!="boolean")return W.errors=[{instancePath:t+"/features/networking",schemaPath:"#/properties/features/properties/networking/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1}else return W.errors=[{instancePath:t+"/features",schemaPath:"#/properties/features/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=L===e}else var u=!0;if(u){if(r.extraLibraries!==void 0){let c=r.extraLibraries;const L=e;if(e===L)if(Array.isArray(c)){var v=!0;const O=c.length;for(let P=0;P<O;P++){let y=c[P];const h=e;if(typeof y!="string")return W.errors=[{instancePath:t+"/extraLibraries/"+P,schemaPath:"#/definitions/ExtraLibrary/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(y!=="wp-cli")return W.errors=[{instancePath:t+"/extraLibraries/"+P,schemaPath:"#/definitions/ExtraLibrary/const",keyword:"const",params:{allowedValue:"wp-cli"},message:"must be equal to constant"}],!1;var v=h===e;if(!v)break}}else return W.errors=[{instancePath:t+"/extraLibraries",schemaPath:"#/properties/extraLibraries/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var u=L===e}else var u=!0;if(u){if(r.constants!==void 0){let c=r.constants;const L=e;if(e===L)if(c&&typeof c=="object"&&!Array.isArray(c))for(const O in c){const P=e;if(typeof c[O]!="string")return W.errors=[{instancePath:t+"/constants/"+O.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constants/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var C=P===e;if(!C)break}else return W.errors=[{instancePath:t+"/constants",schemaPath:"#/properties/constants/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=L===e}else var u=!0;if(u){if(r.plugins!==void 0){let c=r.plugins;const L=e;if(e===L)if(Array.isArray(c)){var D=!0;const O=c.length;for(let P=0;P<O;P++){let y=c[P];const h=e,w=e;let _=!1;const S=e;if(typeof y!="string"){const F={instancePath:t+"/plugins/"+P,schemaPath:"#/properties/plugins/items/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[F]:i.push(F),e++}var b=S===e;if(_=_||b,!_){const F=e;re(y,{instancePath:t+"/plugins/"+P,parentData:c,parentDataProperty:P,rootData:l})||(i=i===null?re.errors:i.concat(re.errors),e=i.length);var b=F===e;_=_||b}if(_)e=w,i!==null&&(w?i.length=w:i=null);else{const F={instancePath:t+"/plugins/"+P,schemaPath:"#/properties/plugins/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[F]:i.push(F),e++,W.errors=i,!1}var D=h===e;if(!D)break}}else return W.errors=[{instancePath:t+"/plugins",schemaPath:"#/properties/plugins/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var u=L===e}else var u=!0;if(u){if(r.siteOptions!==void 0){let c=r.siteOptions;const L=e;if(e===L)if(c&&typeof c=="object"&&!Array.isArray(c)){const O=e;for(const P in c)if(P!=="blogname"){const y=e;if(typeof c[P]!="string")return W.errors=[{instancePath:t+"/siteOptions/"+P.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/siteOptions/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=y===e;if(!M)break}if(O===e&&c.blogname!==void 0&&typeof c.blogname!="string")return W.errors=[{instancePath:t+"/siteOptions/blogname",schemaPath:"#/properties/siteOptions/properties/blogname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}else return W.errors=[{instancePath:t+"/siteOptions",schemaPath:"#/properties/siteOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=L===e}else var u=!0;if(u){if(r.login!==void 0){let c=r.login;const L=e,k=e;let O=!1;const P=e;if(typeof c!="boolean"){const h={instancePath:t+"/login",schemaPath:"#/properties/login/anyOf/0/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[h]:i.push(h),e++}var te=P===e;if(O=O||te,!O){const h=e;if(e===h)if(c&&typeof c=="object"&&!Array.isArray(c)){let _;if(c.username===void 0&&(_="username")||c.password===void 0&&(_="password")){const S={instancePath:t+"/login",schemaPath:"#/properties/login/anyOf/1/required",keyword:"required",params:{missingProperty:_},message:"must have required property '"+_+"'"};i===null?i=[S]:i.push(S),e++}else{const S=e;for(const T in c)if(!(T==="username"||T==="password")){const F={instancePath:t+"/login",schemaPath:"#/properties/login/anyOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:T},message:"must NOT have additional properties"};i===null?i=[F]:i.push(F),e++;break}if(S===e){if(c.username!==void 0){const T=e;if(typeof c.username!="string"){const F={instancePath:t+"/login/username",schemaPath:"#/properties/login/anyOf/1/properties/username/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[F]:i.push(F),e++}var Y=T===e}else var Y=!0;if(Y)if(c.password!==void 0){const T=e;if(typeof c.password!="string"){const j={instancePath:t+"/login/password",schemaPath:"#/properties/login/anyOf/1/properties/password/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[j]:i.push(j),e++}var Y=T===e}else var Y=!0}}}else{const _={instancePath:t+"/login",schemaPath:"#/properties/login/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[_]:i.push(_),e++}var te=h===e;O=O||te}if(O)e=k,i!==null&&(k?i.length=k:i=null);else{const h={instancePath:t+"/login",schemaPath:"#/properties/login/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[h]:i.push(h),e++,W.errors=i,!1}var u=L===e}else var u=!0;if(u){if(r.phpExtensionBundles!==void 0){let c=r.phpExtensionBundles;const L=e;if(e===L)if(Array.isArray(c)){var E=!0;const O=c.length;for(let P=0;P<O;P++){let y=c[P];const h=e;if(typeof y!="string")return W.errors=[{instancePath:t+"/phpExtensionBundles/"+P,schemaPath:"#/definitions/SupportedPHPExtensionBundle/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(y==="kitchen-sink"||y==="light"))return W.errors=[{instancePath:t+"/phpExtensionBundles/"+P,schemaPath:"#/definitions/SupportedPHPExtensionBundle/enum",keyword:"enum",params:{allowedValues:Ps.enum},message:"must be equal to one of the allowed values"}],!1;var E=h===e;if(!E)break}}else return W.errors=[{instancePath:t+"/phpExtensionBundles",schemaPath:"#/properties/phpExtensionBundles/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var u=L===e}else var u=!0;if(u){if(r.steps!==void 0){let c=r.steps;const L=e;if(e===L)if(Array.isArray(c)){var z=!0;const O=c.length;for(let P=0;P<O;P++){let y=c[P];const h=e,w=e;let _=!1;const S=e;n(y,{instancePath:t+"/steps/"+P,parentData:c,parentDataProperty:P,rootData:l})||(i=i===null?n.errors:i.concat(n.errors),e=i.length);var U=S===e;if(_=_||U,!_){const F=e;if(typeof y!="string"){const B={instancePath:t+"/steps/"+P,schemaPath:"#/properties/steps/items/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[B]:i.push(B),e++}var U=F===e;if(_=_||U,!_){const B=e,ee={instancePath:t+"/steps/"+P,schemaPath:"#/properties/steps/items/anyOf/2/not",keyword:"not",params:{},message:"must NOT be valid"};i===null?i=[ee]:i.push(ee),e++;var U=B===e;if(_=_||U,!_){const N=e;if(typeof y!="boolean"){const I={instancePath:t+"/steps/"+P,schemaPath:"#/properties/steps/items/anyOf/3/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[I]:i.push(I),e++}if(y!==!1){const I={instancePath:t+"/steps/"+P,schemaPath:"#/properties/steps/items/anyOf/3/const",keyword:"const",params:{allowedValue:!1},message:"must be equal to constant"};i===null?i=[I]:i.push(I),e++}var U=N===e;if(_=_||U,!_){const I=e;if(y!==null){const K={instancePath:t+"/steps/"+P,schemaPath:"#/properties/steps/items/anyOf/4/type",keyword:"type",params:{type:"null"},message:"must be null"};i===null?i=[K]:i.push(K),e++}var U=I===e;_=_||U}}}}if(_)e=w,i!==null&&(w?i.length=w:i=null);else{const F={instancePath:t+"/steps/"+P,schemaPath:"#/properties/steps/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[F]:i.push(F),e++,W.errors=i,!1}var z=h===e;if(!z)break}}else return W.errors=[{instancePath:t+"/steps",schemaPath:"#/properties/steps/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var u=L===e}else var u=!0;if(u)if(r.$schema!==void 0){const c=e;if(typeof r.$schema!="string")return W.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=c===e}else var u=!0}}}}}}}}}}}}}else return W.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return W.errors=i,e===0}function Ke(r,{instancePath:t="",parentData:o,parentDataProperty:p,rootData:l=r}={}){let i=null,e=0;return W(r,{instancePath:t,parentData:o,parentDataProperty:p,rootData:l})||(i=i===null?W.errors:i.concat(W.errors),e=i.length),Ke.errors=i,e===0}const{wpCLI:ks,...Nr}=ns,Os={...Nr,"wp-cli":ks,importFile:Nr.importWxr};function Es(r,{progress:t=new lr,semaphore:o=new Ot({concurrency:3}),onStepCompleted:p=()=>{}}={}){r={...r,steps:(r.steps||[]).filter(As).filter(qs)};for(const m of r.steps)typeof m=="object"&&m.step==="importFile"&&(m.step="importWxr",ae.warn('The "importFile" step is deprecated. Use "importWxr" instead.'));if(r.constants&&r.steps.unshift({step:"defineWpConfigConsts",consts:r.constants}),r.siteOptions&&r.steps.unshift({step:"setSiteOptions",options:r.siteOptions}),r.plugins){const m=r.plugins.map(v=>typeof v=="string"?v.startsWith("https://")?{resource:"url",url:v}:{resource:"wordpress.org/plugins",slug:v}:v).map(v=>({step:"installPlugin",pluginZipFile:v}));r.steps.unshift(...m)}r.login&&r.steps.push({step:"login",...r.login===!0?{username:"admin",password:"password"}:r.login}),r.phpExtensionBundles||(r.phpExtensionBundles=[]),r.phpExtensionBundles||(r.phpExtensionBundles=[]),r.phpExtensionBundles.length===0&&r.phpExtensionBundles.push("kitchen-sink");const l=r.steps?.findIndex(m=>typeof m=="object"&&m?.step==="wp-cli")??-1;if(r?.extraLibraries?.includes("wp-cli")||l>-1){r.phpExtensionBundles.includes("light")&&(r.phpExtensionBundles=r.phpExtensionBundles.filter(v=>v!=="light"),ae.warn("WP-CLI is used in your Blueprint, and it requires the iconv and mbstring PHP extensions. However, you did not specify the kitchen-sink extension bundle. Playground will override your choice and load the kitchen-sink PHP extensions bundle to prevent the WP-CLI step from failing. "));const m={step:"writeFile",data:{resource:"url",url:"https://playground.wordpress.net/wp-cli.phar"},path:"/tmp/wp-cli.phar"};l===-1?r.steps?.push(m):r.steps?.splice(l,0,m)}const i=r.steps?.findIndex(m=>typeof m=="object"&&m?.step==="importWxr");i!==void 0&&i>-1&&(r.phpExtensionBundles.includes("light")&&(r.phpExtensionBundles=r.phpExtensionBundles.filter(m=>m!=="light"),ae.warn("The importWxr step used in your Blueprint requires the iconv and mbstring PHP extensions. However, you did not specify the kitchen-sink extension bundle. Playground will override your choice and load the kitchen-sink PHP extensions bundle to prevent the WP-CLI step from failing. ")),r.steps?.splice(i,0,{step:"installPlugin",pluginZipFile:{resource:"url",url:"https://playground.wordpress.net/wordpress-importer.zip",caption:"Downloading the WordPress Importer plugin"}}));const{valid:e,errors:u}=$s(r);if(!e){const m=new Error(`Invalid blueprint: ${u[0].message} at ${u[0].instancePath}`);throw m.errors=u,m}const g=r.steps||[],A=g.reduce((m,v)=>m+(v.progress?.weight||1),0),q=g.map(m=>Rs(m,{semaphore:o,rootProgressTracker:t,totalProgressWeight:A}));return{versions:{php:Ts(r.preferredVersions?.php,kr,Lt),wp:r.preferredVersions?.wp||"latest"},phpExtensions:js([],r.phpExtensionBundles||[]),features:{networking:r.features?.networking??!1},extraLibraries:r.extraLibraries||[],run:async m=>{try{for(const{resources:v}of q)for(const C of v)C.setPlayground(m),C.isAsync&&C.resolve();for(const[v,{run:C,step:D}]of Object.entries(q))try{const b=await C(m);p(b,D)}catch(b){throw ae.error(b),new Error(`Error when executing the blueprint step #${v} (${JSON.stringify(D)}) ${b instanceof Error?`: ${b.message}`:b}`,{cause:b})}}finally{try{await m.goTo(r.landingPage||"/")}catch{}t.finish()}}}}function $s(r){const t=Ke(r);if(t)return{valid:t};const o=new Set;for(const l of Ke.errors)l.schemaPath.startsWith("#/properties/steps/items/anyOf")||o.add(l.instancePath);const p=Ke.errors?.filter(l=>!(l.schemaPath.startsWith("#/properties/steps/items/anyOf")&&o.has(l.instancePath)));return{valid:t,errors:p}}function Ts(r,t,o){return r&&t.includes(r)?r:o}function js(r,t){const o=zr.filter(l=>r.includes(l)),p=t.flatMap(l=>l in Sr?Sr[l]:[]);return Array.from(new Set([...o,...p]))}function As(r){return!!(typeof r=="object"&&r)}function qs(r){return["setPhpIniEntry","request"].includes(r.step)?(ae.warn(`The "${r.step}" Blueprint is no longer supported and you can remove it from your Blueprint.`),!1):!0}function Rs(r,{semaphore:t,rootProgressTracker:o,totalProgressWeight:p}){const l=o.stage((r.progress?.weight||1)/p),i={};for(const q of Object.keys(r)){let m=r[q];fs(m)&&(m=Re.create(m,{semaphore:t})),i[q]=m}const e=async q=>{try{return l.fillSlowly(),await Os[r.step](q,await Ls(i),{tracker:l,initialCaption:r.progress?.caption})}finally{l.finish()}},u=Fr(i),g=Fr(i).filter(q=>q.isAsync),A=1/(g.length+1);for(const q of g)q.progress=l.stage(A);return{run:e,step:r,resources:u}}function Fr(r){const t=[];for(const o in r){const p=r[o];p instanceof Re&&t.push(p)}return t}async function Ls(r){const t={};for(const o in r){const p=r[o];p instanceof Re?t[o]=await p.resolve():t[o]=p}return t}async function Ss(r,t){await r.run(t)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ot=Symbol("Comlink.proxy"),xs=Symbol("Comlink.endpoint"),Ns=Symbol("Comlink.releaseProxy"),hr=Symbol("Comlink.finalizer"),Xe=Symbol("Comlink.thrown"),nt=r=>typeof r=="object"&&r!==null||typeof r=="function",Fs={canHandle:r=>nt(r)&&r[ot],serialize(r){const{port1:t,port2:o}=new MessageChannel;return Tr(r,t),[o,[o]]},deserialize(r){return r.start(),jr(r)}},Cs={canHandle:r=>nt(r)&&Xe in r,serialize({value:r}){let t;return r instanceof Error?t={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:t={isError:!1,value:r},[t,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},Se=new Map([["proxy",Fs],["throw",Cs]]);function Is(r,t){for(const o of r)if(t===o||o==="*"||o instanceof RegExp&&o.test(t))return!0;return!1}function Tr(r,t=globalThis,o=["*"]){t.addEventListener("message",function p(l){if(!l||!l.data)return;if(!Is(o,l.origin)){console.warn(`Invalid origin '${l.origin}' for comlink proxy`);return}const{id:i,type:e,path:u}=Object.assign({path:[]},l.data),g=(l.data.argumentList||[]).map(qe);let A;try{const q=u.slice(0,-1).reduce((v,C)=>v[C],r),m=u.reduce((v,C)=>v[C],r);switch(e){case"GET":A=m;break;case"SET":q[u.slice(-1)[0]]=qe(l.data.value),A=!0;break;case"APPLY":A=m.apply(q,g);break;case"CONSTRUCT":{const v=new m(...g);A=ft(v)}break;case"ENDPOINT":{const{port1:v,port2:C}=new MessageChannel;Tr(r,C),A=Us(v,[v])}break;case"RELEASE":A=void 0;break;default:return}}catch(q){A={value:q,[Xe]:0}}Promise.resolve(A).catch(q=>({value:q,[Xe]:0})).then(q=>{const[m,v]=nr(q);t.postMessage(Object.assign(Object.assign({},m),{id:i}),v),e==="RELEASE"&&(t.removeEventListener("message",p),at(t),hr in r&&typeof r[hr]=="function"&&r[hr]())}).catch(q=>{const[m,v]=nr({value:new TypeError("Unserializable return value"),[Xe]:0});t.postMessage(Object.assign(Object.assign({},m),{id:i}),v)})}),t.start&&t.start()}function Ds(r){return r.constructor.name==="MessagePort"}function at(r){Ds(r)&&r.close()}function jr(r,t){return Pr(r,[],t)}function Je(r){if(r)throw new Error("Proxy has been released and is not useable")}function pt(r){return Le(r,{type:"RELEASE"}).then(()=>{at(r)})}const ir=new WeakMap,or="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{const t=(ir.get(r)||0)-1;ir.set(r,t),t===0&&pt(r)});function Ws(r,t){const o=(ir.get(t)||0)+1;ir.set(t,o),or&&or.register(r,t,r)}function Ms(r){or&&or.unregister(r)}function Pr(r,t=[],o=function(){}){let p=!1;const l=new Proxy(o,{get(i,e){if(Je(p),e===Ns)return()=>{Ms(l),pt(r),p=!0};if(e==="then"){if(t.length===0)return{then:()=>l};const u=Le(r,{type:"GET",path:t.map(g=>g.toString())}).then(qe);return u.then.bind(u)}return Pr(r,[...t,e])},set(i,e,u){Je(p);const[g,A]=nr(u);return Le(r,{type:"SET",path:[...t,e].map(q=>q.toString()),value:g},A).then(qe)},apply(i,e,u){Je(p);const g=t[t.length-1];if(g===xs)return Le(r,{type:"ENDPOINT"}).then(qe);if(g==="bind")return Pr(r,t.slice(0,-1));const[A,q]=Cr(u);return Le(r,{type:"APPLY",path:t.map(m=>m.toString()),argumentList:A},q).then(qe)},construct(i,e){Je(p);const[u,g]=Cr(e);return Le(r,{type:"CONSTRUCT",path:t.map(A=>A.toString()),argumentList:u},g).then(qe)}});return Ws(l,r),l}function Bs(r){return Array.prototype.concat.apply([],r)}function Cr(r){const t=r.map(nr);return[t.map(o=>o[0]),Bs(t.map(o=>o[1]))]}const lt=new WeakMap;function Us(r,t){return lt.set(r,t),r}function ft(r){return Object.assign(r,{[ot]:!0})}function zs(r,t=globalThis,o="*"){return{postMessage:(p,l)=>r.postMessage(p,o,l),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function nr(r){for(const[t,o]of Se)if(o.canHandle(r)){const[p,l]=o.serialize(r);return[{type:"HANDLER",name:t,value:p},l]}return[{type:"RAW",value:r},lt.get(r)||[]]}function qe(r){switch(r.type){case"HANDLER":return Se.get(r.name).deserialize(r.value);case"RAW":return r.value}}function Le(r,t,o){return new Promise(p=>{const l=Vs();r.addEventListener("message",function i(e){!e.data||!e.data.id||e.data.id!==l||(r.removeEventListener("message",i),p(e.data))}),r.start&&r.start(),r.postMessage(Object.assign({id:l},t),o)})}function Vs(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function Hs(r,t=void 0){Ys();const o=r instanceof Worker?r:zs(r,t),p=jr(o),l=ut(p);return new Proxy(l,{get:(i,e)=>e==="isConnected"?async()=>{for(;;)try{await Gs(p.isConnected(),200);break}catch{}}:p[e]})}async function Gs(r,t){return new Promise((o,p)=>{setTimeout(p,t),r.then(o)})}let Ir=!1;function Ys(){if(Ir)return;Ir=!0,Se.set("EVENT",{canHandle:o=>o instanceof CustomEvent,serialize:o=>[{detail:o.detail},[]],deserialize:o=>o}),Se.set("FUNCTION",{canHandle:o=>typeof o=="function",serialize(o){const{port1:p,port2:l}=new MessageChannel;return Tr(o,p),[l,[l]]},deserialize(o){return o.start(),jr(o)}}),Se.set("PHPResponse",{canHandle:o=>typeof o=="object"&&o!==null&&"headers"in o&&"bytes"in o&&"errors"in o&&"exitCode"in o&&"httpStatusCode"in o,serialize(o){return[o.toRawData(),[]]},deserialize(o){return tr.fromRawData(o)}});const r=Se.get("throw"),t=r?.serialize;r.serialize=({value:o})=>{const p=t({value:o});return o.response&&(p[0].value.response=o.response),o.source&&(p[0].value.source=o.source),p}}function ut(r){return new Proxy(r,{get(t,o){switch(typeof t[o]){case"function":return(...p)=>t[o](...p);case"object":return t[o]===null?t[o]:ut(t[o]);case"undefined":case"number":case"string":return t[o];default:return ft(t[o])}}})}new Promise(r=>{});async function ti({iframe:r,blueprint:t,remoteUrl:o,progressTracker:p=new lr,disableProgressBar:l,onBlueprintStepCompleted:i,onClientConnected:e=()=>{},sapiName:u,onBeforeBlueprint:g,mounts:A,shouldInstallWordPress:q}){Qs(o),Zs(r),o=Js(o,{progressbar:!l}),p.setCaption("Preparing WordPress"),t||(t={phpExtensionBundles:["kitchen-sink"]});const m=Es(t,{progress:p.stage(.5),onStepCompleted:i});await new Promise(D=>{r.src=o,r.addEventListener("load",D,!1)});const v=Hs(r.contentWindow,r.ownerDocument.defaultView);await v.isConnected(),p.pipe(v);const C=p.stage();return await v.onDownloadProgress(C.loadingListener),await v.boot({mounts:A,sapiName:u,shouldInstallWordPress:q,phpVersion:m.versions.php,wpVersion:m.versions.wp,phpExtensions:m.phpExtensions,withNetworking:m.features.networking}),await v.isReady(),C.finish(),bt(ae,v),e(v),g&&await g(),await Ss(m,v),p.finish(),v}function Zs(r){r.sandbox?.length&&!r.sandbox?.contains("allow-storage-access-by-user-activation")&&r.sandbox.add("allow-storage-access-by-user-activation")}const er="https://playground.wordpress.net";function Qs(r){const t=new URL(r,er);if((t.origin===er||t.hostname==="localhost")&&t.pathname!=="/remote.html")throw new Error(`Invalid remote URL: ${t}. Expected origin to be ${er}/remote.html.`)}function Js(r,t){const o=new URL(r,er),p=new URLSearchParams(o.search);for(const[l,i]of Object.entries(t))if(i!=null&&i!==!1)if(Array.isArray(i))for(const e of i)p.append(l,e.toString());else p.set(l,i.toString());return o.search=p.toString(),o.toString()}const Ks="4d014a29a379e96748c887a28decf5b4b9232fb5";function si(){const r=new URL(window.location.origin);return r.pathname="/remote.html",r.searchParams.set("v",Ks),r}export{Lt as L,Ot as S,ri as a,Or as b,Hr as c,Br as d,vr as e,ei as f,si as g,mt as h,Yt as i,se as j,Xs as k,ae as l,kr as m,_r as n,ar as o,ie as p,ti as s,Vr as w,es as z};
