"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});require("@php-wasm/node-polyfills");const C=require("@php-wasm/util"),ce=require("@php-wasm/logger"),fr=require("@php-wasm/scopes"),cr=require("@wp-playground/common"),mr=require("@php-wasm/progress"),qe=require("@php-wasm/universal"),er=["db.php","plugins/akismet","plugins/hello.php","plugins/wordpress-importer","mu-plugins/sqlite-database-integration","mu-plugins/playground-includes","mu-plugins/0-playground.php","mu-plugins/0-sqlite.php","themes/twentytwenty","themes/twentytwentyone","themes/twentytwentytwo","themes/twentytwentythree","themes/twentytwentyfour","themes/twentytwentyfive","themes/twentytwentysix"],Ye=async(r,{pluginPath:t,pluginName:f},c)=>{c==null||c.tracker.setCaption(`Activating ${f||t}`);const u=await r.documentRoot,i=await r.run({code:`<?php
			define( 'WP_ADMIN', true );
			require_once( ${C.phpVar(u)}. "/wp-load.php" );
			require_once( ${C.phpVar(u)}. "/wp-admin/includes/plugin.php" );

			// Set current user to admin
			wp_set_current_user( get_users(array('role' => 'Administrator') )[0]->ID );

			$plugin_path = ${C.phpVar(t)};
			$response = false;
			if (!is_dir($plugin_path)) {
				$response = activate_plugin($plugin_path);
			}

			// Activate plugin by name if activation by path wasn't successful
			if ( null !== $response ) {
				foreach ( ( glob( $plugin_path . '/*.php' ) ?: array() ) as $file ) {
					$info = get_plugin_data( $file, false, false );
					if ( ! empty( $info['Name'] ) ) {
						$response = activate_plugin( $file );
						break;
					}
				}
			}

			if ( null === $response ) {
				die('Plugin activated successfully');
			} else if ( is_wp_error( $response ) ) {
				throw new Exception( $response->get_error_message() );
			}

			throw new Exception( 'Unable to activate plugin' );
		`});if(i.text!=="Plugin activated successfully")throw ce.logger.debug(i),new Error(`Plugin ${t} could not be activated – WordPress exited with no error. Sometimes, when $_SERVER or site options are not configured correctly, WordPress exits early with a 301 redirect. Inspect the "debug" logs in the console for more details`)},rr=async(r,{themeFolderName:t},f)=>{f==null||f.tracker.setCaption(`Activating ${t}`);const c=await r.documentRoot,u=`${c}/wp-content/themes/${t}`;if(!await r.fileExists(u))throw new Error(`
			Couldn't activate theme ${t}.
			Theme not found at the provided theme path: ${u}.
			Check the theme path to ensure it's correct.
			If the theme is not installed, you can install it using the installTheme step.
			More info can be found in the Blueprint documentation: https://wordpress.github.io/wordpress-playground/blueprints/steps/#ActivateThemeStep
		`);const i=await r.run({code:`<?php
			define( 'WP_ADMIN', true );
			require_once( getenv('docroot') . "/wp-load.php" );

			// Set current user to admin
			wp_set_current_user( get_users(array('role' => 'Administrator') )[0]->ID );

			switch_theme( getenv('themeFolderName') );

			if( wp_get_theme()->get_stylesheet() !== getenv('themeFolderName') ) {
				throw new Exception( 'Theme ' . getenv('themeFolderName') . ' could not be activated.' );				
			}
			die('Theme activated successfully');
		`,env:{docroot:c,themeFolderName:t}});if(i.text!=="Theme activated successfully")throw ce.logger.debug(i),new Error(`Theme ${t} could not be activated – WordPress exited with no error. Sometimes, when $_SERVER or site options are not configured correctly, WordPress exits early with a 301 redirect. Inspect the "debug" logs in the console for more details`)},yr=async(r,{code:t})=>await r.run({code:t}),hr=async(r,{options:t})=>await r.run(t),tr=async(r,{path:t})=>{await r.unlink(t)},gr=async(r,{sql:t},f)=>{f==null||f.tracker.setCaption("Executing SQL Queries");const c=`/tmp/${C.randomFilename()}.sql`;await r.writeFile(c,new Uint8Array(await t.arrayBuffer()));const u=await r.documentRoot,i=C.phpVars({docroot:u,sqlFilename:c}),e=await r.run({code:`<?php
		require_once ${i.docroot} . '/wp-load.php';

		$handle = fopen(${i.sqlFilename}, 'r');
		$buffer = '';

		global $wpdb;

		while ($bytes = fgets($handle)) {
			$buffer .= $bytes;

			if (!feof($handle) && substr($buffer, -1, 1) !== "
") {
				continue;
			}

			$wpdb->query($buffer);
			$buffer = '';
		}
	`});return await tr(r,{path:c}),e},He=async(r,{request:t})=>{ce.logger.warn('Deprecated: The Blueprint step "request" is deprecated and will be removed in a future release.');const f=await r.request(t);if(f.httpStatusCode>399||f.httpStatusCode<200)throw ce.logger.warn("WordPress response was",{response:f}),new Error(`Request failed with status ${f.httpStatusCode}`);return f},Ur=`<?php

/**
 * Rewrites the wp-config.php file to ensure specific constants are defined
 * with specific values.
 * 
 * Example:
 * 
 * \`\`\`php
 * <?php
 * define('WP_DEBUG', true);
 * // The third define() argument is also supported:
 * define('SAVEQUERIES', false, true);
 * 
 * // Expression
 * define(true ? 'WP_DEBUG_LOG' : 'WP_DEBUG_LOG', 123);
 * 
 * // Guarded expressions shouldn't be wrapped twice
 * if(!defined(1 ? 'A' : 'B')) {
 *     define(1 ? 'A' : 'B', 0);
 * }
 * 
 * // More advanced expression
 * define((function() use($x) {
 *     return [$x, 'a'];
 * })(), 123);
 * \`\`\`
 * 
 * Rewritten with
 * 
 *     $constants = [
 *        'WP_DEBUG' => false,
 *        'WP_DEBUG_LOG' => true,
 *        'SAVEQUERIES' => true,
 *        'NEW_CONSTANT' => "new constant",
 *     ];
 * 
 * \`\`\`php
 * <?php
 * define('WP_DEBUG_LOG',true);
 * define('NEW_CONSTANT','new constant');
 * ?><?php
 * define('WP_DEBUG',false);
 * // The third define() argument is also supported:
 * define('SAVEQUERIES',true, true);
 * 
 * // Expression
 * if(!defined($const ? 'WP_DEBUG_LOG' : 'WP_DEBUG_LOG')) {
 *      define($const ? 'WP_DEBUG_LOG' : 'WP_DEBUG_LOG', 123);
 * }
 * 
 * // Guarded expressions shouldn't be wrapped twice
 * if(!defined(1 ? 'A' : 'B')) {
 *     define(1 ? 'A' : 'B', 0);
 * }
 * 
 * // More advanced expression
 * if(!defined((function() use($x) {
 *    return [$x, 'a'];
 * })())) {
 *     define((function() use($x) {
 *         return [$x, 'a'];
 *     })(), 123);
 * }
 * \`\`\`
 * 
 * @param mixed $content
 * @return string
 */
function rewrite_wp_config_to_define_constants($content, $constants = [])
{
    $tokens = array_reverse(token_get_all($content));
    $output = [];
    $defined_expressions = [];

    // Look through all the tokens and find the define calls
    do {
        $buffer = [];
        $name_buffer = [];
        $value_buffer = [];
        $third_arg_buffer = [];

        // Capture everything until the define call into output.
        // Capturing the define call into a buffer.
        // Example:
        //     <?php echo 'a'; define  (
        //     ^^^^^^^^^^^^^^^^^^^^^^
        //           output   |buffer
        while ($token = array_pop($tokens)) {
            if (is_array($token) && $token[0] === T_STRING && (strtolower($token[1]) === 'define' || strtolower($token[1]) === 'defined')) {
                $buffer[] = $token;
                break;
            }
            $output[] = $token;
        }

        // Maybe we didn't find a define call and reached the end of the file?
        if (!count($tokens)) {
            break;
        }

        // Keep track of the "defined" expressions that are already accounted for
        if($token[1] === 'defined') {
            $output[] = $token;
            $defined_expression = [];
            $open_parenthesis = 0;
            // Capture everything up to the opening parenthesis, including the parenthesis
            // e.g. defined  (
            //           ^^^^
            while ($token = array_pop($tokens)) {
                $output[] = $token;
                if ($token === "(") {
                    ++$open_parenthesis;
                    break;
                }
            }

            // Capture everything up to the closing parenthesis, including the parenthesis
            // e.g. defined  (
            //           ^^^^
            while ($token = array_pop($tokens)) {
                $output[] = $token;
                if ($token === ")") {
                    --$open_parenthesis;
                }
                if ($open_parenthesis === 0) {
                    break;
                }
                $defined_expression[] = $token;
            }

            $defined_expressions[] = stringify_tokens(skip_whitespace($defined_expression));
            continue;
        }

        // Capture everything up to the opening parenthesis, including the parenthesis
        // e.g. define  (
        //           ^^^^
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === "(") {
                break;
            }
        }

        // Capture the first argument – it's the first expression after the opening
        // parenthesis and before the comma:
        // Examples:
        //     define("WP_DEBUG", true);
        //            ^^^^^^^^^^^
        //
        //     define(count([1,2]) > 2 ? 'WP_DEBUG' : 'FOO', true);
        //            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        $open_parenthesis = 0;
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === "(" || $token === "[" || $token === "{") {
                ++$open_parenthesis;
            } elseif ($token === ")" || $token === "]" || $token === "}") {
                --$open_parenthesis;
            } elseif ($token === "," && $open_parenthesis === 0) {
                break;
            }

            // Don't capture the comma as a part of the constant name
            $name_buffer[] = $token;
        }

        // Capture everything until the closing parenthesis
        //     define("WP_DEBUG", true);
        //                       ^^^^^^
        $open_parenthesis = 0;
        $is_second_argument = true;
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === ")" && $open_parenthesis === 0) {
                // Final parenthesis of the define call.
                break;
            } else if ($token === "(" || $token === "[" || $token === "{") {
                ++$open_parenthesis;
            } elseif ($token === ")" || $token === "]" || $token === "}") {
                --$open_parenthesis;
            } elseif ($token === "," && $open_parenthesis === 0) {
                // This define call has more than 2 arguments! The third one is the
                // boolean value indicating $is_case_insensitive. Let's continue capturing
                // to $third_arg_buffer.
                $is_second_argument = false;
            }
            if ($is_second_argument) {
                $value_buffer[] = $token;
            } else {
                $third_arg_buffer[] = $token;
            }
        }

        // Capture until the semicolon
        //     define("WP_DEBUG", true)  ;
        //                             ^^^
        while ($token = array_pop($tokens)) {
            $buffer[] = $token;
            if ($token === ";") {
                break;
            }
        }

        // Decide whether $name_buffer is a constant name or an expression
        $name_token = null;
        $name_token_index = $token;
        $name_is_literal = true;
        foreach ($name_buffer as $k => $token) {
            if (is_array($token)) {
                if ($token[0] === T_WHITESPACE || $token[0] === T_COMMENT || $token[0] === T_DOC_COMMENT) {
                    continue;
                } else if ($token[0] === T_STRING || $token[0] === T_CONSTANT_ENCAPSED_STRING) {
                    $name_token = $token;
                    $name_token_index = $k;
                } else {
                    $name_is_literal = false;
                    break;
                }
            } else if ($token !== "(" && $token !== ")") {
                $name_is_literal = false;
                break;
            }
        }

        // We can't handle expressions as constant names. Let's wrap that define
        // call in an if(!defined()) statement, just in case it collides with
        // a constant name.
        if (!$name_is_literal) {
            // Ensure the defined expression is not already accounted for
            foreach ($defined_expressions as $defined_expression) {
                if ($defined_expression === stringify_tokens(skip_whitespace($name_buffer))) {
                    $output = array_merge($output, $buffer);
                    continue 2;
                }
            }
            $output = array_merge(
                $output,
                ["if(!defined("],
                $name_buffer,
                [")) {\\n     "],
                ['define('],
                $name_buffer,
                [','],
                $value_buffer,
                $third_arg_buffer,
                [");"],
                ["\\n}\\n"]
            );
            continue;
        }

        // Yay, we have a literal constant name in the buffer now. Let's
        // get its value:
        $name = eval('return ' . $name_token[1] . ';');

        // If the constant name is not in the list of constants we're looking,
        // we can ignore it.
        if (!array_key_exists($name, $constants)) {
            $output = array_merge($output, $buffer);
            continue;
        }

        // We now have a define() call that defines a constant we're looking for.
        // Let's rewrite its value to the one 
        $output = array_merge(
            $output,
            ['define('],
            $name_buffer,
            [','],
            [var_export($constants[$name], true)],
            $third_arg_buffer,
            [");"]
        );

        // Remove the constant from the list so we can process any remaining
        // constants later.
        unset($constants[$name]);
    } while (count($tokens));

    // Add any constants that weren't found in the file
    if (count($constants)) {
        $prepend = [
            "<?php \\n"
        ];
        foreach ($constants as $name => $value) {
            $prepend = array_merge(
                $prepend,
                [
                    "define(",
                    var_export($name, true),
                    ',',
                    var_export($value, true),
                    ");\\n"
                ]
            );
        }
        $prepend[] = "?>";
        $output = array_merge(
            $prepend,
            $output
        );
    }

    // Translate the output tokens back into a string
    return stringify_tokens($output);
}

function stringify_tokens($tokens) {
    $output = '';
    foreach ($tokens as $token) {
        if (is_array($token)) {
            $output .= $token[1];
        } else {
            $output .= $token;
        }
    }
    return $output;
}

function skip_whitespace($tokens) {
    $output = [];
    foreach ($tokens as $token) {
        if (is_array($token) && ($token[0] === T_WHITESPACE || $token[0] === T_COMMENT || $token[0] === T_DOC_COMMENT)) {
            continue;
        }
        $output[] = $token;
    }
    return $output;
}
`,Ae=async(r,{consts:t,method:f="define-before-run"})=>{switch(f){case"define-before-run":await Br(r,t);break;case"rewrite-wp-config":{const c=await r.documentRoot,u=C.joinPaths(c,"/wp-config.php"),i=await r.readFileAsText(u),e=await Vr(r,i,t);await r.writeFile(u,e);break}default:throw new Error(`Invalid method: ${f}`)}};async function Br(r,t){for(const f in t)await r.defineConstant(f,t[f])}async function Vr(r,t,f){await r.writeFile("/tmp/code.php",t);const c=C.phpVars({consts:f});return await r.run({code:`${Ur}
	$wp_config_path = '/tmp/code.php';
	$wp_config = file_get_contents($wp_config_path);
	$new_wp_config = rewrite_wp_config_to_define_constants($wp_config, ${c.consts});
	file_put_contents($wp_config_path, $new_wp_config);
	`}),await r.readFileAsText("/tmp/code.php")}const Ge=async(r,{username:t="admin",password:f="password"}={},c)=>{var i,e,d;c==null||c.tracker.setCaption((c==null?void 0:c.initialCaption)||"Logging in"),await r.request({url:"/wp-login.php"});const u=await r.request({url:"/wp-login.php",method:"POST",body:{log:t,pwd:f,rememberme:"forever"}});if(!((d=(e=(i=u.headers)==null?void 0:i.location)==null?void 0:e[0])!=null&&d.includes("/wp-admin/")))throw ce.logger.warn("WordPress response was",{response:u,text:u.text}),new Error(`Failed to log in as ${t} with password ${f}`)},sr=async(r,{options:t})=>{const f=await r.documentRoot;await r.run({code:`<?php
		include ${C.phpVar(f)} . '/wp-load.php';
		$site_options = ${C.phpVar(t)};
		foreach($site_options as $name => $value) {
			update_option($name, $value);
		}
		echo "Success";
		`})},br=async(r,{meta:t,userId:f})=>{const c=await r.documentRoot;await r.run({code:`<?php
		include ${C.phpVar(c)} . '/wp-load.php';
		$meta = ${C.phpVar(t)};
		foreach($meta as $name => $value) {
			update_user_meta(${C.phpVar(f)}, $name, $value);
		}
		`})},wr=async r=>{var R;await Ae(r,{consts:{WP_ALLOW_MULTISITE:1}});const t=new URL(await r.absoluteUrl);if(t.port!==""){let M=`The current host is ${t.host}, but WordPress multisites do not support custom ports.`;throw t.hostname==="localhost"&&(M+=" For development, you can set up a playground.test domain using the instructions at https://wordpress.github.io/wordpress-playground/contributing/code."),new Error(M)}const f=t.pathname.replace(/\/$/,"")+"/",c=`${t.protocol}//${t.hostname}${f}`;await sr(r,{options:{siteurl:c,home:c}}),await Ge(r,{});const u=await r.documentRoot,e=(await r.run({code:`<?php
define( 'WP_ADMIN', true );
require_once(${C.phpVar(u)} . "/wp-load.php");

// Set current user to admin
( get_users(array('role' => 'Administrator') )[0] );

require_once(${C.phpVar(u)} . "/wp-admin/includes/plugin.php");
$plugins_root = ${C.phpVar(u)} . "/wp-content/plugins";
$plugins = glob($plugins_root . "/*");

$deactivated_plugins = [];
foreach($plugins as $plugin_path) {
	if (str_ends_with($plugin_path, '/index.php')) {
		continue;
	}
	if (!is_dir($plugin_path)) {
		$deactivated_plugins[] = substr($plugin_path, strlen($plugins_root) + 1);
		deactivate_plugins($plugin_path);
		continue;
	}
	// Find plugin entry file
	foreach ( ( glob( $plugin_path . '/*.php' ) ?: array() ) as $file ) {
		$info = get_plugin_data( $file, false, false );
		if ( ! empty( $info['Name'] ) ) {
			deactivate_plugins( $file );
			$deactivated_plugins[] = substr($file, strlen($plugins_root) + 1);
			break;
		}
	}
}
echo json_encode($deactivated_plugins);
`})).json,O=(R=(await He(r,{request:{url:"/wp-admin/network.php"}})).text.match(/name="_wpnonce"\s+value="([^"]+)"/))==null?void 0:R[1],V=await He(r,{request:{url:"/wp-admin/network.php",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Dr({_wpnonce:O,_wp_http_referer:f+"wp-admin/network.php",sitename:"My WordPress Website Sites",email:"admin@localhost.com",submit:"Install"})}});if(V.httpStatusCode!==200)throw ce.logger.warn("WordPress response was",{response:V,text:V.text,headers:V.headers}),new Error(`Failed to enable multisite. Response code was ${V.httpStatusCode}`);await Ae(r,{consts:{MULTISITE:!0,SUBDOMAIN_INSTALL:!1,SITE_ID_CURRENT_SITE:1,BLOG_ID_CURRENT_SITE:1,DOMAIN_CURRENT_SITE:t.hostname,PATH_CURRENT_SITE:f}});const W=new URL(await r.absoluteUrl),v=fr.isURLScoped(W)?"scope:"+fr.getURLScope(W):null;await r.writeFile("/internal/shared/preload/sunrise.php",`<?php
	$_SERVER['HTTP_HOST'] = ${C.phpVar(W.hostname)};
	$folder = ${C.phpVar(v)};
	if ($folder && strpos($_SERVER['REQUEST_URI'],"/$folder") === false) {
		$_SERVER['REQUEST_URI'] = "/$folder/" . ltrim($_SERVER['REQUEST_URI'], '/');
	}
`),await r.writeFile("/internal/shared/mu-plugins/sunrise.php",`<?php
		if ( !defined( 'BLOG_ID_CURRENT_SITE' ) ) {
			define( 'BLOG_ID_CURRENT_SITE', 1 );
		}
`),await Ge(r,{});for(const M of e)await Ye(r,{pluginPath:M})};function Dr(r){return Object.keys(r).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(r[t])).join("&")}const vr=async(r,{fromPath:t,toPath:f})=>{await r.writeFile(f,await r.readFileAsBuffer(t))},Pr=async(r,{fromPath:t,toPath:f})=>{await r.mv(t,f)},_r=async(r,{path:t})=>{await r.mkdir(t)},kr=async(r,{path:t})=>{await r.rmdir(t)},ir=async(r,{path:t,data:f})=>{f instanceof File&&(f=new Uint8Array(await f.arrayBuffer())),t.startsWith("/wordpress/wp-content/mu-plugins")&&!await r.fileExists("/wordpress/wp-content/mu-plugins")&&await r.mkdir("/wordpress/wp-content/mu-plugins"),await r.writeFile(t,f)},or=async(r,{siteUrl:t})=>{await Ae(r,{consts:{WP_HOME:t,WP_SITEURL:t}})},Or=async(r,{file:t},f)=>{var u;(u=f==null?void 0:f.tracker)==null||u.setCaption("Importing content"),await ir(r,{path:"/tmp/import.wxr",data:t});const c=await r.documentRoot;await r.run({code:`<?php
		require ${C.phpVar(c)} . '/wp-load.php';
		require ${C.phpVar(c)} . '/wp-admin/includes/admin.php';
  
		kses_remove_filters();
		$admin_id = get_users(array('role' => 'Administrator') )[0]->ID;
        wp_set_current_user( $admin_id );
		$importer = new WXR_Importer( array(
			'fetch_attachments' => true,
			'default_author' => $admin_id
		) );
		$logger = new WP_Importer_Logger_CLI();
		$importer->set_logger( $logger );

		// Slashes from the imported content are lost if we don't call wp_slash here.
		add_action( 'wp_insert_post_data', function( $data ) {
			return wp_slash($data);
		});

		$result = $importer->import( '/tmp/import.wxr' );
		`})},nr=async(r,{themeSlug:t=""},f)=>{var u;(u=f==null?void 0:f.tracker)==null||u.setCaption("Importing theme starter content");const c=await r.documentRoot;await r.run({code:`<?php

		/**
		 * Ensure that the customizer loads as an admin user.
		 *
		 * For compatibility with themes, this MUST be run prior to theme inclusion, which is why this is a plugins_loaded filter instead
		 * of running _wp_customize_include() manually after load.
		 */
		function importThemeStarterContent_plugins_loaded() {
			// Set as the admin user, this ensures we can customize the site.
			wp_set_current_user(
				get_users( [ 'role' => 'Administrator' ] )[0]
			);

			// Force the site to be fresh, although it should already be.
			add_filter( 'pre_option_fresh_site', '__return_true' );

			/*
			 * Simulate this request as the customizer loading with the current theme in preview mode.
			 *
			 * See _wp_customize_include()
			 */
			$_REQUEST['wp_customize']    = 'on';
			$_REQUEST['customize_theme'] = ${C.phpVar(t)} ?: get_stylesheet();

			/*
			 * Claim this is a ajax request saving settings, to avoid the preview filters being applied.
			 */
			$_REQUEST['action'] = 'customize_save';
			add_filter( 'wp_doing_ajax', '__return_true' );

			$_GET = $_REQUEST;
		}
		playground_add_filter( 'plugins_loaded', 'importThemeStarterContent_plugins_loaded', 0 );

		require ${C.phpVar(c)} . '/wp-load.php';

		// Return early if there's no starter content.
		if ( ! get_theme_starter_content() ) {
			return;
		}

		// Import the Starter Content.
		$wp_customize->import_theme_starter_content();

		// Publish the changeset, which publishes the starter content.
		wp_publish_post( $wp_customize->changeset_post_id() );
		`})},Ze=async(r,{zipFile:t,zipPath:f,extractToPath:c})=>{if(f)ce.logger.warn('The "zipPath" option of the unzip() Blueprint step is deprecated and will be removed. Use "zipFile" instead.');else if(!t)throw new Error("Either zipPath or zipFile must be provided");await cr.unzipFile(r,t||f,c)},$r=async(r,{wordPressFilesZip:t,pathInZip:f=""})=>{const c=await r.documentRoot;let u=C.joinPaths("/tmp","import");await r.mkdir(u),await Ze(r,{zipFile:t,extractToPath:u}),u=C.joinPaths(u,f);const i=C.joinPaths(u,"wp-content"),e=C.joinPaths(c,"wp-content");for(const W of er){const v=C.joinPaths(i,W);await lr(r,v);const R=C.joinPaths(e,W);await r.fileExists(R)&&(await r.mkdir(C.dirname(v)),await r.mv(R,v))}const d=C.joinPaths(u,"wp-content","database");await r.fileExists(d)||await r.mv(C.joinPaths(c,"wp-content","database"),d);const O=await r.listFiles(u);for(const W of O)await lr(r,C.joinPaths(c,W)),await r.mv(C.joinPaths(u,W),C.joinPaths(c,W));await r.rmdir(u),await or(r,{siteUrl:await r.absoluteUrl});const V=C.phpVar(C.joinPaths(c,"wp-admin","upgrade.php"));await r.run({code:`<?php
            $_GET['step'] = 'upgrade_db';
            require ${V};
            `})};async function lr(r,t){await r.fileExists(t)&&(await r.isDir(t)?await r.rmdir(t):await r.unlink(t))}async function Er(r){const t=await r.request({url:"/wp-admin/export.php?download=true&content=all"});return new File([t.bytes],"export.xml")}async function jr(r,{targetPath:t,zipFile:f,ifAlreadyInstalled:c="overwrite"}){const i=f.name.replace(/\.zip$/,""),e=C.joinPaths(await r.documentRoot,"wp-content"),d=C.joinPaths(e,C.randomString()),O=C.joinPaths(d,"assets",i);await r.fileExists(O)&&await r.rmdir(d,{recursive:!0}),await r.mkdir(d);try{await Ze(r,{zipFile:f,extractToPath:O});let V=await r.listFiles(O,{prependPath:!0});V=V.filter(U=>!U.endsWith("/__MACOSX"));const W=V.length===1&&await r.isDir(V[0]);let v,R="";W?(R=V[0],v=V[0].split("/").pop()):(R=O,v=i);const M=`${t}/${v}`;if(await r.fileExists(M)){if(!await r.isDir(M))throw new Error(`Cannot install asset ${v} to ${M} because a file with the same name already exists. Note it's a file, not a directory! Is this by mistake?`);if(c==="overwrite")await r.rmdir(M,{recursive:!0});else{if(c==="skip")return{assetFolderPath:M,assetFolderName:v};throw new Error(`Cannot install asset ${v} to ${t} because it already exists and the ifAlreadyInstalled option was set to ${c}`)}}return await r.mv(R,M),{assetFolderPath:M,assetFolderName:v}}finally{await r.rmdir(d,{recursive:!0})}}function Qe(r){const t=r.split(".").shift().replace(/-/g," ");return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}const Tr=async(r,{pluginZipFile:t,ifAlreadyInstalled:f,options:c={}},u)=>{const i=t.name.split("/").pop()||"plugin.zip",e=Qe(i);u==null||u.tracker.setCaption(`Installing the ${e} plugin`);const{assetFolderPath:d}=await jr(r,{ifAlreadyInstalled:f,zipFile:t,targetPath:`${await r.documentRoot}/wp-content/plugins`});("activate"in c?c.activate:!0)&&await Ye(r,{pluginPath:d,pluginName:e},u)},qr=async(r,{themeZipFile:t,ifAlreadyInstalled:f,options:c={}},u)=>{const i=Qe(t.name);u==null||u.tracker.setCaption(`Installing the ${i} theme`);const{assetFolderName:e}=await jr(r,{ifAlreadyInstalled:f,zipFile:t,targetPath:`${await r.documentRoot}/wp-content/themes`});("activate"in c?c.activate:!0)&&await rr(r,{themeFolderName:e},u),("importStarterContent"in c?c.importStarterContent:!1)&&await nr(r,{themeSlug:e},u)},Ar=async(r,t,f)=>{var u;(u=f==null?void 0:f.tracker)==null||u.setCaption("Resetting WordPress data");const c=await r.documentRoot;await r.run({env:{DOCROOT:c},code:`<?php
		require getenv('DOCROOT') . '/wp-load.php';

		$GLOBALS['@pdo']->query('DELETE FROM wp_posts WHERE id > 0');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=0 WHERE NAME='wp_posts'");
		
		$GLOBALS['@pdo']->query('DELETE FROM wp_postmeta WHERE post_id > 1');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=20 WHERE NAME='wp_postmeta'");

		$GLOBALS['@pdo']->query('DELETE FROM wp_comments');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=0 WHERE NAME='wp_comments'");

		$GLOBALS['@pdo']->query('DELETE FROM wp_commentmeta');
		$GLOBALS['@pdo']->query("UPDATE SQLITE_SEQUENCE SET SEQ=0 WHERE NAME='wp_commentmeta'");
		`})},Rr=async(r,{options:t})=>{await r.request({url:"/wp-admin/install.php?step=2",method:"POST",body:{language:"en",prefix:"wp_",weblog_title:"My WordPress Website",user_name:t.adminPassword||"admin",admin_password:t.adminPassword||"password",admin_password2:t.adminPassword||"password",Submit:"Install WordPress",pw_weak:"1",admin_email:"admin@localhost.com"}})},Sr=async(r,{selfContained:t=!1}={})=>{const f="/tmp/wordpress-playground.zip",c=await r.documentRoot,u=C.joinPaths(c,"wp-content");let i=er;t&&(i=i.filter(O=>!O.startsWith("themes/twenty")).filter(O=>O!=="mu-plugins/sqlite-database-integration"));const e=C.phpVars({zipPath:f,wpContentPath:u,documentRoot:c,exceptPaths:i.map(O=>C.joinPaths(c,"wp-content",O)),additionalPaths:t?{[C.joinPaths(c,"wp-config.php")]:"wp-config.php"}:{}});await zr(r,`zipDir(${e.wpContentPath}, ${e.zipPath}, array(
			'exclude_paths' => ${e.exceptPaths},
			'zip_root'      => ${e.documentRoot},
			'additional_paths' => ${e.additionalPaths}
		));`);const d=await r.readFileAsBuffer(f);return r.unlink(f),d},Mr=`<?php

function zipDir($root, $output, $options = array())
{
    $root = rtrim($root, '/');
    $additionalPaths = array_key_exists('additional_paths', $options) ? $options['additional_paths'] : array();
    $excludePaths = array_key_exists('exclude_paths', $options) ? $options['exclude_paths'] : array();
    $zip_root = array_key_exists('zip_root', $options) ? $options['zip_root'] : $root;

    $zip = new ZipArchive;
    $res = $zip->open($output, ZipArchive::CREATE);
    if ($res === TRUE) {
        $directories = array(
            $root . '/'
        );
        while (sizeof($directories)) {
            $current_dir = array_pop($directories);

            if ($handle = opendir($current_dir)) {
                while (false !== ($entry = readdir($handle))) {
                    if ($entry == '.' || $entry == '..') {
                        continue;
                    }

                    $entry = join_paths($current_dir, $entry);
                    if (in_array($entry, $excludePaths)) {
                        continue;
                    }

                    if (is_dir($entry)) {
                        $directory_path = $entry . '/';
                        array_push($directories, $directory_path);
                    } else if (is_file($entry)) {
                        $zip->addFile($entry, substr($entry, strlen($zip_root)));
                    }
                }
                closedir($handle);
            }
        }
        foreach ($additionalPaths as $disk_path => $zip_path) {
            $zip->addFile($disk_path, $zip_path);
        }
        $zip->close();
        chmod($output, 0777);
    }
}

function join_paths()
{
    $paths = array();

    foreach (func_get_args() as $arg) {
        if ($arg !== '') {
            $paths[] = $arg;
        }
    }

    return preg_replace('#/+#', '/', join('/', $paths));
}
`;async function zr(r,t){return await r.run({code:Mr+t})}const Lr=async(r,{command:t,wpCliPath:f="/tmp/wp-cli.phar"})=>{if(!await r.fileExists(f))throw new Error(`wp-cli.phar not found at ${f}.
			You can enable wp-cli support by adding "wp-cli" to the list of extra libraries in your blueprint as follows:
			{
				"extraLibraries": [ "wp-cli" ]
			}

			Read more about it in the documentation.
			https://wordpress.github.io/wordpress-playground/blueprints/data-format#extra-libraries`);let c;if(typeof t=="string"?(t=t.trim(),c=Hr(t)):c=t,c.shift()!=="wp")throw new Error('The first argument must be "wp".');await r.writeFile("/tmp/stdout",""),await r.writeFile("/tmp/stderr",""),await r.writeFile("/wordpress/run-cli.php",`<?php
		// Set up the environment to emulate a shell script
		// call.

		// Set SHELL_PIPE to 0 to ensure WP-CLI formats
		// the output as ASCII tables.
		// @see https://github.com/wp-cli/wp-cli/issues/1102
		putenv( 'SHELL_PIPE=0' );

		// Set the argv global.
		$GLOBALS['argv'] = array_merge([
		  "/tmp/wp-cli.phar",
		  "--path=/wordpress"
		], ${C.phpVar(c)});

		// Provide stdin, stdout, stderr streams outside of
		// the CLI SAPI.
		define('STDIN', fopen('php://stdin', 'rb'));
		define('STDOUT', fopen('php://stdout', 'wb'));
		define('STDERR', fopen('php://stderr', 'wb'));

		require( ${C.phpVar(f)} );
		`);const i=await r.run({scriptPath:"/wordpress/run-cli.php"});if(i.errors)throw new Error(i.errors);return i};function Hr(r){let c=0,u="";const i=[];let e="";for(let d=0;d<r.length;d++){const O=r[d];c===0?O==='"'||O==="'"?(c=1,u=O):O.match(/\s/)?(e&&i.push(e),e=""):e+=O:c===1&&(O==="\\"?(d++,e+=r[d]):O===u?(c=0,u=""):e+=O)}return e&&i.push(e),i}const Nr=async(r,{language:t},f)=>{f==null||f.tracker.setCaption((f==null?void 0:f.initialCaption)||"Translating"),await r.defineConstant("WPLANG",t);const c=await r.documentRoot,i=[{url:`https://downloads.wordpress.org/translation/core/${(await r.run({code:`<?php
			require '${c}/wp-includes/version.php';
			echo $wp_version;
		`})).text}/${t}.zip`,type:"core"}],d=(await r.run({code:`<?php
		require_once('${c}/wp-load.php');
		require_once('${c}/wp-admin/includes/plugin.php');
		echo json_encode(
			array_values(
				array_map(
					function($plugin) {
						return [
							'slug'    => $plugin['TextDomain'],
							'version' => $plugin['Version']
						];
					},
					array_filter(
						get_plugins(),
						function($plugin) {
							return !empty($plugin['TextDomain']);
						}
					)
				)
			)
		);`})).json;for(const{slug:W,version:v}of d)i.push({url:`https://downloads.wordpress.org/translation/plugin/${W}/${v}/${t}.zip`,type:"plugin"});const V=(await r.run({code:`<?php
		require_once('${c}/wp-load.php');
		require_once('${c}/wp-admin/includes/theme.php');
		echo json_encode(
			array_values(
				array_map(
					function($theme) {
						return [
							'slug'    => $theme->get('TextDomain'),
							'version' => $theme->get('Version')
						];
					},
					wp_get_themes()
				)
			)
		);`})).json;for(const{slug:W,version:v}of V)i.push({url:`https://downloads.wordpress.org/translation/theme/${W}/${v}/${t}.zip`,type:"theme"});await r.isDir(`${c}/wp-content/languages/plugins`)||await r.mkdir(`${c}/wp-content/languages/plugins`),await r.isDir(`${c}/wp-content/languages/themes`)||await r.mkdir(`${c}/wp-content/languages/themes`);for(const{url:W,type:v}of i)try{const R=await fetch(W);if(!R.ok)throw new Error(`Failed to download translations for ${v}: ${R.statusText}`);let M=`${c}/wp-content/languages`;v==="plugin"?M+="/plugins":v==="theme"&&(M+="/themes"),await cr.unzipFile(r,new File([await R.blob()],`${t}-${v}.zip`),M)}catch(R){if(v==="core")throw new Error(`Failed to download translations for WordPress. Please check if the language code ${t} is correct. You can find all available languages and translations on https://translate.wordpress.org/.`);ce.logger.warn(`Error downloading translations for ${v}: ${R}`)}},Gr=Object.freeze(Object.defineProperty({__proto__:null,activatePlugin:Ye,activateTheme:rr,cp:vr,defineSiteUrl:or,defineWpConfigConsts:Ae,enableMultisite:wr,exportWXR:Er,importThemeStarterContent:nr,importWordPressFiles:$r,importWxr:Or,installPlugin:Tr,installTheme:qr,login:Ge,mkdir:_r,mv:Pr,request:He,resetData:Ar,rm:tr,rmdir:kr,runPHP:yr,runPHPWithOptions:hr,runSql:gr,runWpInstallationWizard:Rr,setSiteLanguage:Nr,setSiteOptions:sr,unzip:Ze,updateUserMeta:br,wpCLI:Lr,writeFile:ir,zipWpContent:Sr},Symbol.toStringTag,{value:"Module"})),Yr=["vfs","literal","wordpress.org/themes","wordpress.org/plugins","url"];function Zr(r){return r&&typeof r=="object"&&typeof r.resource=="string"&&Yr.includes(r.resource)}class $e{static create(t,{semaphore:f,progress:c}){let u;switch(t.resource){case"vfs":u=new Qr(t,c);break;case"literal":u=new Xr(t,c);break;case"wordpress.org/themes":u=new et(t,c);break;case"wordpress.org/plugins":u=new rt(t,c);break;case"url":u=new Kr(t,c);break;default:throw new Error(`Invalid resource: ${t}`)}return u=new tt(u),f&&(u=new st(u,f)),u}setPlayground(t){this.playground=t}get isAsync(){return!1}}class Qr extends $e{constructor(t,f){super(),this.resource=t,this.progress=f}async resolve(){var f;const t=await this.playground.readFileAsBuffer(this.resource.path);return(f=this.progress)==null||f.set(100),new File([t],this.name)}get name(){return this.resource.path.split("/").pop()||""}}class Xr extends $e{constructor(t,f){super(),this.resource=t,this.progress=f}async resolve(){var t;return(t=this.progress)==null||t.set(100),new File([this.resource.contents],this.resource.name)}get name(){return this.resource.name}}class ar extends $e{constructor(t){super(),this.progress=t}async resolve(){var f,c;(f=this.progress)==null||f.setCaption(this.caption);const t=this.getURL();try{let u=await fetch(t);if(!u.ok)throw new Error(`Could not download "${t}"`);if(u=await mr.cloneResponseMonitorProgress(u,((c=this.progress)==null?void 0:c.loadingListener)??Jr),u.status!==200)throw new Error(`Could not download "${t}"`);return new File([await u.blob()],this.name)}catch(u){throw new Error(`Could not download "${t}".
				Check if the URL is correct and the server is reachable.
				If it is reachable, the server might be blocking the request.
				Check the browser console and network tabs for more information.

				## Does the console show the error "No 'Access-Control-Allow-Origin' header"?

				This means the server that hosts your file does not allow requests from other sites
				(cross-origin requests, or CORS).	You need to move the asset to a server that allows
				cross-origin file downloads. Learn more about CORS at
				https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS.

				If your file is on GitHub, load it from "raw.githubusercontent.com".
				Here's how to do that:

				1. Start with the original GitHub URL of the file. For example:
				https://github.com/username/repository/blob/branch/filename.
				2. Replace "github.com" with "raw.githubusercontent.com".
				3. Remove the "/blob/" part of the URL.

				The resulting URL should look like this:
				https://raw.githubusercontent.com/username/repository/branch/filename

				Error:
				${u}`)}}get caption(){return`Downloading ${this.name}`}get name(){try{return new URL(this.getURL(),"http://example.com").pathname.split("/").pop()}catch{return this.getURL()}}get isAsync(){return!0}}const Jr=()=>{};class Kr extends ar{constructor(t,f){super(f),this.resource=t}getURL(){return this.resource.url}get caption(){return this.resource.caption??super.caption}}class et extends ar{constructor(t,f){super(f),this.resource=t}get name(){return Qe(this.resource.slug)}getURL(){return`https://downloads.wordpress.org/theme/${Fr(this.resource.slug)}`}}class rt extends ar{constructor(t,f){super(f),this.resource=t}get name(){return Qe(this.resource.slug)}getURL(){return`https://downloads.wordpress.org/plugin/${Fr(this.resource.slug)}`}}function Fr(r){return!r||r.endsWith(".zip")?r:r+".latest-stable.zip"}class xr extends $e{constructor(t){super(),this.resource=t}async resolve(){return this.resource.resolve()}async setPlayground(t){return this.resource.setPlayground(t)}get progress(){return this.resource.progress}set progress(t){this.resource.progress=t}get name(){return this.resource.name}get isAsync(){return this.resource.isAsync}}class tt extends xr{async resolve(){return this.promise||(this.promise=super.resolve()),this.promise}}class st extends xr{constructor(t,f){super(t),this.semaphore=f}async resolve(){return this.isAsync?this.semaphore.run(()=>super.resolve()):super.resolve()}}const it={type:"object",properties:{landingPage:{type:"string",description:"The URL to navigate to after the blueprint has been run."},description:{type:"string",description:"Optional description. It doesn't do anything but is exposed as a courtesy to developers who may want to document which blueprint file does what.",deprecated:"Use meta.description instead."},meta:{type:"object",properties:{title:{type:"string",description:"A clear and concise name for your Blueprint."},description:{type:"string",description:"A brief explanation of what your Blueprint offers."},author:{type:"string",description:"A GitHub username of the author of this Blueprint."},categories:{type:"array",items:{type:"string"},description:"Relevant categories to help users find your Blueprint in the future Blueprints section on WordPress.org."}},required:["title","author"],additionalProperties:!1,description:"Optional metadata. Used by the Blueprints gallery at https://github.com/WordPress/blueprints"},preferredVersions:{type:"object",properties:{php:{anyOf:[{$ref:"#/definitions/SupportedPHPVersion"},{type:"string",const:"latest"}],description:"The preferred PHP version to use. If not specified, the latest supported version will be used"},wp:{type:"string",description:"The preferred WordPress version to use. If not specified, the latest supported version will be used"}},required:["php","wp"],additionalProperties:!1,description:"The preferred PHP and WordPress versions to use."},features:{type:"object",properties:{networking:{type:"boolean",description:"Should boot with support for network request via wp_safe_remote_get?"}},additionalProperties:!1},extraLibraries:{type:"array",items:{$ref:"#/definitions/ExtraLibrary"},description:"Extra libraries to preload into the Playground instance."},constants:{type:"object",additionalProperties:{type:"string"},description:"PHP Constants to define on every request"},plugins:{type:"array",items:{anyOf:[{type:"string"},{$ref:"#/definitions/FileReference"}]},description:"WordPress plugins to install and activate"},siteOptions:{type:"object",additionalProperties:{type:"string"},properties:{blogname:{type:"string",description:"The site title"}},description:"WordPress site options to define"},login:{anyOf:[{type:"boolean"},{type:"object",properties:{username:{type:"string"},password:{type:"string"}},required:["username","password"],additionalProperties:!1}],description:"User to log in as. If true, logs the user in as admin/password."},phpExtensionBundles:{type:"array",items:{$ref:"#/definitions/SupportedPHPExtensionBundle"},description:"The PHP extensions to use."},steps:{type:"array",items:{anyOf:[{$ref:"#/definitions/StepDefinition"},{type:"string"},{not:{}},{type:"boolean",const:!1},{type:"null"}]},description:"The steps to run after every other operation in this Blueprint was executed."},$schema:{type:"string"}},additionalProperties:!1},ot={type:"string",enum:["8.3","8.2","8.1","8.0","7.4","7.3","7.2","7.1","7.0"]},nt={type:"string",enum:["kitchen-sink","light"]},Cr=Object.prototype.hasOwnProperty;function te(r,{instancePath:t="",parentData:f,parentDataProperty:c,rootData:u=r}={}){let i=null,e=0;const d=e;let O=!1;const V=e;if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let A;if(r.resource===void 0&&(A="resource")||r.path===void 0&&(A="path")){const F={instancePath:t,schemaPath:"#/definitions/VFSReference/required",keyword:"required",params:{missingProperty:A},message:"must have required property '"+A+"'"};i===null?i=[F]:i.push(F),e++}else{const F=e;for(const z in r)if(!(z==="resource"||z==="path")){const l={instancePath:t,schemaPath:"#/definitions/VFSReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:z},message:"must NOT have additional properties"};i===null?i=[l]:i.push(l),e++;break}if(F===e){if(r.resource!==void 0){let z=r.resource;const l=e;if(typeof z!="string"){const E={instancePath:t+"/resource",schemaPath:"#/definitions/VFSReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[E]:i.push(E),e++}if(z!=="vfs"){const E={instancePath:t+"/resource",schemaPath:"#/definitions/VFSReference/properties/resource/const",keyword:"const",params:{allowedValue:"vfs"},message:"must be equal to constant"};i===null?i=[E]:i.push(E),e++}var v=l===e}else var v=!0;if(v)if(r.path!==void 0){const z=e;if(typeof r.path!="string"){const E={instancePath:t+"/path",schemaPath:"#/definitions/VFSReference/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[E]:i.push(E),e++}var v=z===e}else var v=!0}}}else{const A={instancePath:t,schemaPath:"#/definitions/VFSReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[A]:i.push(A),e++}var R=V===e;if(O=O||R,!O){const A=e;if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let l;if(r.resource===void 0&&(l="resource")||r.name===void 0&&(l="name")||r.contents===void 0&&(l="contents")){const E={instancePath:t,schemaPath:"#/definitions/LiteralReference/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"};i===null?i=[E]:i.push(E),e++}else{const E=e;for(const _ in r)if(!(_==="resource"||_==="name"||_==="contents")){const k={instancePath:t,schemaPath:"#/definitions/LiteralReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:_},message:"must NOT have additional properties"};i===null?i=[k]:i.push(k),e++;break}if(E===e){if(r.resource!==void 0){let _=r.resource;const k=e;if(typeof _!="string"){const g={instancePath:t+"/resource",schemaPath:"#/definitions/LiteralReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[g]:i.push(g),e++}if(_!=="literal"){const g={instancePath:t+"/resource",schemaPath:"#/definitions/LiteralReference/properties/resource/const",keyword:"const",params:{allowedValue:"literal"},message:"must be equal to constant"};i===null?i=[g]:i.push(g),e++}var M=k===e}else var M=!0;if(M){if(r.name!==void 0){const _=e;if(typeof r.name!="string"){const g={instancePath:t+"/name",schemaPath:"#/definitions/LiteralReference/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[g]:i.push(g),e++}var M=_===e}else var M=!0;if(M)if(r.contents!==void 0){let _=r.contents;const k=e,g=e;let m=!1;const y=e;if(typeof _!="string"){const w={instancePath:t+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[w]:i.push(w),e++}var U=y===e;if(m=m||U,!m){const w=e;if(e===w)if(_&&typeof _=="object"&&!Array.isArray(_)){let j;if(_.BYTES_PER_ELEMENT===void 0&&(j="BYTES_PER_ELEMENT")||_.buffer===void 0&&(j="buffer")||_.byteLength===void 0&&(j="byteLength")||_.byteOffset===void 0&&(j="byteOffset")||_.length===void 0&&(j="length")){const x={instancePath:t+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/required",keyword:"required",params:{missingProperty:j},message:"must have required property '"+j+"'"};i===null?i=[x]:i.push(x),e++}else{const x=e;for(const T in _)if(!(T==="BYTES_PER_ELEMENT"||T==="buffer"||T==="byteLength"||T==="byteOffset"||T==="length")){let H=_[T];const re=e;if(!(typeof H=="number"&&isFinite(H))){const J={instancePath:t+"/contents/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[J]:i.push(J),e++}var b=re===e;if(!b)break}if(x===e){if(_.BYTES_PER_ELEMENT!==void 0){let T=_.BYTES_PER_ELEMENT;const H=e;if(!(typeof T=="number"&&isFinite(T))){const re={instancePath:t+"/contents/BYTES_PER_ELEMENT",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[re]:i.push(re),e++}var D=H===e}else var D=!0;if(D){if(_.buffer!==void 0){let T=_.buffer;const H=e;if(e===H)if(T&&typeof T=="object"&&!Array.isArray(T)){let J;if(T.byteLength===void 0&&(J="byteLength")){const N={instancePath:t+"/contents/buffer",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:J},message:"must have required property '"+J+"'"};i===null?i=[N]:i.push(N),e++}else{const N=e;for(const X in T)if(X!=="byteLength"){const I={instancePath:t+"/contents/buffer",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:X},message:"must NOT have additional properties"};i===null?i=[I]:i.push(I),e++;break}if(N===e&&T.byteLength!==void 0){let X=T.byteLength;if(!(typeof X=="number"&&isFinite(X))){const I={instancePath:t+"/contents/buffer/byteLength",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[I]:i.push(I),e++}}}}else{const J={instancePath:t+"/contents/buffer",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[J]:i.push(J),e++}var D=H===e}else var D=!0;if(D){if(_.byteLength!==void 0){let T=_.byteLength;const H=e;if(!(typeof T=="number"&&isFinite(T))){const J={instancePath:t+"/contents/byteLength",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[J]:i.push(J),e++}var D=H===e}else var D=!0;if(D){if(_.byteOffset!==void 0){let T=_.byteOffset;const H=e;if(!(typeof T=="number"&&isFinite(T))){const J={instancePath:t+"/contents/byteOffset",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[J]:i.push(J),e++}var D=H===e}else var D=!0;if(D)if(_.length!==void 0){let T=_.length;const H=e;if(!(typeof T=="number"&&isFinite(T))){const J={instancePath:t+"/contents/length",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[J]:i.push(J),e++}var D=H===e}else var D=!0}}}}}}else{const j={instancePath:t+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[j]:i.push(j),e++}var U=w===e;m=m||U}if(m)e=g,i!==null&&(g?i.length=g:i=null);else{const w={instancePath:t+"/contents",schemaPath:"#/definitions/LiteralReference/properties/contents/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};i===null?i=[w]:i.push(w),e++}var M=k===e}else var M=!0}}}}else{const l={instancePath:t,schemaPath:"#/definitions/LiteralReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[l]:i.push(l),e++}var R=A===e;if(O=O||R,!O){const l=e;if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let k;if(r.resource===void 0&&(k="resource")||r.slug===void 0&&(k="slug")){const g={instancePath:t,schemaPath:"#/definitions/CoreThemeReference/required",keyword:"required",params:{missingProperty:k},message:"must have required property '"+k+"'"};i===null?i=[g]:i.push(g),e++}else{const g=e;for(const m in r)if(!(m==="resource"||m==="slug")){const y={instancePath:t,schemaPath:"#/definitions/CoreThemeReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"};i===null?i=[y]:i.push(y),e++;break}if(g===e){if(r.resource!==void 0){let m=r.resource;const y=e;if(typeof m!="string"){const h={instancePath:t+"/resource",schemaPath:"#/definitions/CoreThemeReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[h]:i.push(h),e++}if(m!=="wordpress.org/themes"){const h={instancePath:t+"/resource",schemaPath:"#/definitions/CoreThemeReference/properties/resource/const",keyword:"const",params:{allowedValue:"wordpress.org/themes"},message:"must be equal to constant"};i===null?i=[h]:i.push(h),e++}var se=y===e}else var se=!0;if(se)if(r.slug!==void 0){const m=e;if(typeof r.slug!="string"){const h={instancePath:t+"/slug",schemaPath:"#/definitions/CoreThemeReference/properties/slug/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[h]:i.push(h),e++}var se=m===e}else var se=!0}}}else{const k={instancePath:t,schemaPath:"#/definitions/CoreThemeReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[k]:i.push(k),e++}var R=l===e;if(O=O||R,!O){const k=e;if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let y;if(r.resource===void 0&&(y="resource")||r.slug===void 0&&(y="slug")){const h={instancePath:t,schemaPath:"#/definitions/CorePluginReference/required",keyword:"required",params:{missingProperty:y},message:"must have required property '"+y+"'"};i===null?i=[h]:i.push(h),e++}else{const h=e;for(const w in r)if(!(w==="resource"||w==="slug")){const S={instancePath:t,schemaPath:"#/definitions/CorePluginReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:w},message:"must NOT have additional properties"};i===null?i=[S]:i.push(S),e++;break}if(h===e){if(r.resource!==void 0){let w=r.resource;const S=e;if(typeof w!="string"){const j={instancePath:t+"/resource",schemaPath:"#/definitions/CorePluginReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[j]:i.push(j),e++}if(w!=="wordpress.org/plugins"){const j={instancePath:t+"/resource",schemaPath:"#/definitions/CorePluginReference/properties/resource/const",keyword:"const",params:{allowedValue:"wordpress.org/plugins"},message:"must be equal to constant"};i===null?i=[j]:i.push(j),e++}var G=S===e}else var G=!0;if(G)if(r.slug!==void 0){const w=e;if(typeof r.slug!="string"){const j={instancePath:t+"/slug",schemaPath:"#/definitions/CorePluginReference/properties/slug/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[j]:i.push(j),e++}var G=w===e}else var G=!0}}}else{const y={instancePath:t,schemaPath:"#/definitions/CorePluginReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[y]:i.push(y),e++}var R=k===e;if(O=O||R,!O){const y=e;if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let S;if(r.resource===void 0&&(S="resource")||r.url===void 0&&(S="url")){const j={instancePath:t,schemaPath:"#/definitions/UrlReference/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"};i===null?i=[j]:i.push(j),e++}else{const j=e;for(const x in r)if(!(x==="resource"||x==="url"||x==="caption")){const T={instancePath:t,schemaPath:"#/definitions/UrlReference/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:x},message:"must NOT have additional properties"};i===null?i=[T]:i.push(T),e++;break}if(j===e){if(r.resource!==void 0){let x=r.resource;const T=e;if(typeof x!="string"){const H={instancePath:t+"/resource",schemaPath:"#/definitions/UrlReference/properties/resource/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[H]:i.push(H),e++}if(x!=="url"){const H={instancePath:t+"/resource",schemaPath:"#/definitions/UrlReference/properties/resource/const",keyword:"const",params:{allowedValue:"url"},message:"must be equal to constant"};i===null?i=[H]:i.push(H),e++}var P=T===e}else var P=!0;if(P){if(r.url!==void 0){const x=e;if(typeof r.url!="string"){const H={instancePath:t+"/url",schemaPath:"#/definitions/UrlReference/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[H]:i.push(H),e++}var P=x===e}else var P=!0;if(P)if(r.caption!==void 0){const x=e;if(typeof r.caption!="string"){const H={instancePath:t+"/caption",schemaPath:"#/definitions/UrlReference/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[H]:i.push(H),e++}var P=x===e}else var P=!0}}}}else{const S={instancePath:t,schemaPath:"#/definitions/UrlReference/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[S]:i.push(S),e++}var R=y===e;O=O||R}}}}if(O)e=d,i!==null&&(d?i.length=d:i=null);else{const A={instancePath:t,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[A]:i.push(A),e++,te.errors=i,!1}return te.errors=i,e===0}const Ke={type:"object",discriminator:{propertyName:"step"},required:["step"],oneOf:[{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"activatePlugin"},pluginPath:{type:"string",description:"Path to the plugin directory as absolute path (/wordpress/wp-content/plugins/plugin-name); or the plugin entry file relative to the plugins directory (plugin-name/plugin-name.php)."},pluginName:{type:"string",description:"Optional. Plugin name to display in the progress bar."}},required:["pluginPath","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"activateTheme"},themeFolderName:{type:"string",description:"The name of the theme folder inside wp-content/themes/"}},required:["step","themeFolderName"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"cp"},fromPath:{type:"string",description:"Source path"},toPath:{type:"string",description:"Target path"}},required:["fromPath","step","toPath"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"defineWpConfigConsts"},consts:{type:"object",additionalProperties:{},description:"The constants to define"},method:{type:"string",enum:["rewrite-wp-config","define-before-run"],description:`The method of defining the constants in wp-config.php. Possible values are:

- rewrite-wp-config: Default. Rewrites the wp-config.php file to                      explicitly call define() with the requested                      name and value. This method alters the file                      on the disk, but it doesn't conflict with                      existing define() calls in wp-config.php.

- define-before-run: Defines the constant before running the requested                      script. It doesn't alter any files on the disk, but                      constants defined this way may conflict with existing                      define() calls in wp-config.php.`},virtualize:{type:"boolean",deprecated:`This option is noop and will be removed in a future version.
This option is only kept in here to avoid breaking Blueprint schema validation
for existing apps using this option.`}},required:["consts","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"defineSiteUrl"},siteUrl:{type:"string",description:"The URL"}},required:["siteUrl","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"enableMultisite"}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"importWxr"},file:{$ref:"#/definitions/FileReference",description:"The file to import"}},required:["file","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"importThemeStarterContent",description:"The step identifier."},themeSlug:{type:"string",description:"The name of the theme to import content from."}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"importWordPressFiles"},wordPressFilesZip:{$ref:"#/definitions/FileReference",description:"The zip file containing the top-level WordPress files and directories."},pathInZip:{type:"string",description:"The path inside the zip file where the WordPress files are."}},required:["step","wordPressFilesZip"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},ifAlreadyInstalled:{type:"string",enum:["overwrite","skip","error"],description:"What to do if the asset already exists."},step:{type:"string",const:"installPlugin",description:"The step identifier."},pluginZipFile:{$ref:"#/definitions/FileReference",description:"The plugin zip file to install."},options:{$ref:"#/definitions/InstallPluginOptions",description:"Optional installation options."}},required:["pluginZipFile","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},ifAlreadyInstalled:{type:"string",enum:["overwrite","skip","error"],description:"What to do if the asset already exists."},step:{type:"string",const:"installTheme",description:"The step identifier."},themeZipFile:{$ref:"#/definitions/FileReference",description:"The theme zip file to install."},options:{type:"object",properties:{activate:{type:"boolean",description:"Whether to activate the theme after installing it."},importStarterContent:{type:"boolean",description:"Whether to import the theme's starter content after installing it."}},additionalProperties:!1,description:"Optional installation options."}},required:["step","themeZipFile"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"login"},username:{type:"string",description:"The user to log in as. Defaults to 'admin'."},password:{type:"string",description:"The password to log in with. Defaults to 'password'."}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"mkdir"},path:{type:"string",description:"The path of the directory you want to create"}},required:["path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"mv"},fromPath:{type:"string",description:"Source path"},toPath:{type:"string",description:"Target path"}},required:["fromPath","step","toPath"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"resetData"}},required:["step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"request"},request:{$ref:"#/definitions/PHPRequest",description:"Request details (See /wordpress-playground/api/universal/interface/PHPRequest)"}},required:["request","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"rm"},path:{type:"string",description:"The path to remove"}},required:["path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"rmdir"},path:{type:"string",description:"The path to remove"}},required:["path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runPHP",description:"The step identifier."},code:{type:"string",description:"The PHP code to run."}},required:["code","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runPHPWithOptions"},options:{$ref:"#/definitions/PHPRunOptions",description:"Run options (See /wordpress-playground/api/universal/interface/PHPRunOptions/))"}},required:["options","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runWpInstallationWizard"},options:{$ref:"#/definitions/WordPressInstallationOptions"}},required:["options","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"runSql",description:"The step identifier."},sql:{$ref:"#/definitions/FileReference",description:"The SQL to run. Each non-empty line must contain a valid SQL query."}},required:["sql","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"setSiteOptions",description:'The name of the step. Must be "setSiteOptions".'},options:{type:"object",additionalProperties:{},description:"The options to set on the site."}},required:["options","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"unzip"},zipFile:{$ref:"#/definitions/FileReference",description:"The zip file to extract"},zipPath:{type:"string",description:"The path of the zip file to extract",deprecated:"Use zipFile instead."},extractToPath:{type:"string",description:"The path to extract the zip file to"}},required:["extractToPath","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"updateUserMeta"},meta:{type:"object",additionalProperties:{},description:'An object of user meta values to set, e.g. { "first_name": "John" }'},userId:{type:"number",description:"User ID"}},required:["meta","step","userId"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"writeFile"},path:{type:"string",description:"The path of the file to write to"},data:{anyOf:[{$ref:"#/definitions/FileReference"},{type:"string"},{type:"object",properties:{BYTES_PER_ELEMENT:{type:"number"},buffer:{type:"object",properties:{byteLength:{type:"number"}},required:["byteLength"],additionalProperties:!1},byteLength:{type:"number"},byteOffset:{type:"number"},length:{type:"number"}},required:["BYTES_PER_ELEMENT","buffer","byteLength","byteOffset","length"],additionalProperties:{type:"number"}}],description:"The data to write"}},required:["data","path","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"wp-cli",description:"The step identifier."},command:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:"The WP CLI command to run."},wpCliPath:{type:"string",description:"wp-cli.phar path"}},required:["command","step"]},{type:"object",additionalProperties:!1,properties:{progress:{type:"object",properties:{weight:{type:"number"},caption:{type:"string"}},additionalProperties:!1},step:{type:"string",const:"setSiteLanguage"},language:{type:"string",description:"The language to set, e.g. 'en_US'"}},required:["language","step"]}]},Ir={type:"string",enum:["GET","POST","HEAD","OPTIONS","PATCH","PUT","DELETE"]};function ue(r,{instancePath:t="",parentData:f,parentDataProperty:c,rootData:u=r}={}){let i=null,e=0;if(e===0)if(r&&typeof r=="object"&&!Array.isArray(r)){let se;if(r.url===void 0&&(se="url"))return ue.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:se},message:"must have required property '"+se+"'"}],!1;{const G=e;for(const P in r)if(!(P==="method"||P==="url"||P==="headers"||P==="body"))return ue.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:P},message:"must NOT have additional properties"}],!1;if(G===e){if(r.method!==void 0){let P=r.method;const A=e;if(typeof P!="string")return ue.errors=[{instancePath:t+"/method",schemaPath:"#/definitions/HTTPMethod/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(P==="GET"||P==="POST"||P==="HEAD"||P==="OPTIONS"||P==="PATCH"||P==="PUT"||P==="DELETE"))return ue.errors=[{instancePath:t+"/method",schemaPath:"#/definitions/HTTPMethod/enum",keyword:"enum",params:{allowedValues:Ir.enum},message:"must be equal to one of the allowed values"}],!1;var d=A===e}else var d=!0;if(d){if(r.url!==void 0){const P=e;if(typeof r.url!="string")return ue.errors=[{instancePath:t+"/url",schemaPath:"#/properties/url/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=P===e}else var d=!0;if(d){if(r.headers!==void 0){let P=r.headers;const A=e;if(e===e)if(P&&typeof P=="object"&&!Array.isArray(P))for(const l in P){const E=e;if(typeof P[l]!="string")return ue.errors=[{instancePath:t+"/headers/"+l.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/PHPRequestHeaders/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var O=E===e;if(!O)break}else return ue.errors=[{instancePath:t+"/headers",schemaPath:"#/definitions/PHPRequestHeaders/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=A===e}else var d=!0;if(d)if(r.body!==void 0){let P=r.body;const A=e,F=e;let z=!1;const l=e;if(typeof P!="string"){const _={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[_]:i.push(_),e++}var V=l===e;if(z=z||V,!z){const _=e;if(e===_)if(P&&typeof P=="object"&&!Array.isArray(P)){let g;if(P.BYTES_PER_ELEMENT===void 0&&(g="BYTES_PER_ELEMENT")||P.buffer===void 0&&(g="buffer")||P.byteLength===void 0&&(g="byteLength")||P.byteOffset===void 0&&(g="byteOffset")||P.length===void 0&&(g="length")){const m={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/1/required",keyword:"required",params:{missingProperty:g},message:"must have required property '"+g+"'"};i===null?i=[m]:i.push(m),e++}else{const m=e;for(const y in P)if(!(y==="BYTES_PER_ELEMENT"||y==="buffer"||y==="byteLength"||y==="byteOffset"||y==="length")){let h=P[y];const w=e;if(!(typeof h=="number"&&isFinite(h))){const S={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[S]:i.push(S),e++}var W=w===e;if(!W)break}if(m===e){if(P.BYTES_PER_ELEMENT!==void 0){let y=P.BYTES_PER_ELEMENT;const h=e;if(!(typeof y=="number"&&isFinite(y))){const w={instancePath:t+"/body/BYTES_PER_ELEMENT",schemaPath:"#/properties/body/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[w]:i.push(w),e++}var v=h===e}else var v=!0;if(v){if(P.buffer!==void 0){let y=P.buffer;const h=e;if(e===h)if(y&&typeof y=="object"&&!Array.isArray(y)){let S;if(y.byteLength===void 0&&(S="byteLength")){const j={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"};i===null?i=[j]:i.push(j),e++}else{const j=e;for(const x in y)if(x!=="byteLength"){const T={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:x},message:"must NOT have additional properties"};i===null?i=[T]:i.push(T),e++;break}if(j===e&&y.byteLength!==void 0){let x=y.byteLength;if(!(typeof x=="number"&&isFinite(x))){const T={instancePath:t+"/body/buffer/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[T]:i.push(T),e++}}}}else{const S={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[S]:i.push(S),e++}var v=h===e}else var v=!0;if(v){if(P.byteLength!==void 0){let y=P.byteLength;const h=e;if(!(typeof y=="number"&&isFinite(y))){const S={instancePath:t+"/body/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[S]:i.push(S),e++}var v=h===e}else var v=!0;if(v){if(P.byteOffset!==void 0){let y=P.byteOffset;const h=e;if(!(typeof y=="number"&&isFinite(y))){const S={instancePath:t+"/body/byteOffset",schemaPath:"#/properties/body/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[S]:i.push(S),e++}var v=h===e}else var v=!0;if(v)if(P.length!==void 0){let y=P.length;const h=e;if(!(typeof y=="number"&&isFinite(y))){const S={instancePath:t+"/body/length",schemaPath:"#/properties/body/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[S]:i.push(S),e++}var v=h===e}else var v=!0}}}}}}else{const g={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[g]:i.push(g),e++}var V=_===e;if(z=z||V,!z){const g=e;if(e===g)if(P&&typeof P=="object"&&!Array.isArray(P))for(const y in P){let h=P[y];const w=e,S=e;let j=!1;const x=e;if(typeof h!="string"){const T={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[T]:i.push(T),e++}var R=x===e;if(j=j||R,!j){const T=e;if(e===T)if(h&&typeof h=="object"&&!Array.isArray(h)){let re;if(h.BYTES_PER_ELEMENT===void 0&&(re="BYTES_PER_ELEMENT")||h.buffer===void 0&&(re="buffer")||h.byteLength===void 0&&(re="byteLength")||h.byteOffset===void 0&&(re="byteOffset")||h.length===void 0&&(re="length")){const J={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/required",keyword:"required",params:{missingProperty:re},message:"must have required property '"+re+"'"};i===null?i=[J]:i.push(J),e++}else{const J=e;for(const N in h)if(!(N==="BYTES_PER_ELEMENT"||N==="buffer"||N==="byteLength"||N==="byteOffset"||N==="length")){let X=h[N];const I=e;if(!(typeof X=="number"&&isFinite(X))){const Z={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+N.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Z]:i.push(Z),e++}var M=I===e;if(!M)break}if(J===e){if(h.BYTES_PER_ELEMENT!==void 0){let N=h.BYTES_PER_ELEMENT;const X=e;if(!(typeof N=="number"&&isFinite(N))){const I={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/BYTES_PER_ELEMENT",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[I]:i.push(I),e++}var U=X===e}else var U=!0;if(U){if(h.buffer!==void 0){let N=h.buffer;const X=e;if(e===X)if(N&&typeof N=="object"&&!Array.isArray(N)){let Z;if(N.byteLength===void 0&&(Z="byteLength")){const K={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:Z},message:"must have required property '"+Z+"'"};i===null?i=[K]:i.push(K),e++}else{const K=e;for(const ne in N)if(ne!=="byteLength"){const ae={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:ne},message:"must NOT have additional properties"};i===null?i=[ae]:i.push(ae),e++;break}if(K===e&&N.byteLength!==void 0){let ne=N.byteLength;if(!(typeof ne=="number"&&isFinite(ne))){const ae={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer/byteLength",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ae]:i.push(ae),e++}}}}else{const Z={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/buffer",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Z]:i.push(Z),e++}var U=X===e}else var U=!0;if(U){if(h.byteLength!==void 0){let N=h.byteLength;const X=e;if(!(typeof N=="number"&&isFinite(N))){const Z={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/byteLength",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Z]:i.push(Z),e++}var U=X===e}else var U=!0;if(U){if(h.byteOffset!==void 0){let N=h.byteOffset;const X=e;if(!(typeof N=="number"&&isFinite(N))){const Z={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/byteOffset",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Z]:i.push(Z),e++}var U=X===e}else var U=!0;if(U)if(h.length!==void 0){let N=h.length;const X=e;if(!(typeof N=="number"&&isFinite(N))){const Z={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/length",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Z]:i.push(Z),e++}var U=X===e}else var U=!0}}}}}}else{const re={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[re]:i.push(re),e++}var R=T===e;if(j=j||R,!j){const re=e;if(e===re)if(h&&typeof h=="object"&&!Array.isArray(h)){let N;if(h.lastModified===void 0&&(N="lastModified")||h.name===void 0&&(N="name")||h.size===void 0&&(N="size")||h.type===void 0&&(N="type")||h.webkitRelativePath===void 0&&(N="webkitRelativePath")){const X={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/required",keyword:"required",params:{missingProperty:N},message:"must have required property '"+N+"'"};i===null?i=[X]:i.push(X),e++}else{const X=e;for(const I in h)if(!(I==="size"||I==="type"||I==="lastModified"||I==="name"||I==="webkitRelativePath")){const Z={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:I},message:"must NOT have additional properties"};i===null?i=[Z]:i.push(Z),e++;break}if(X===e){if(h.size!==void 0){let I=h.size;const Z=e;if(!(typeof I=="number"&&isFinite(I))){const K={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/size",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/size/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[K]:i.push(K),e++}var b=Z===e}else var b=!0;if(b){if(h.type!==void 0){const I=e;if(typeof h.type!="string"){const K={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/type",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),e++}var b=I===e}else var b=!0;if(b){if(h.lastModified!==void 0){let I=h.lastModified;const Z=e;if(!(typeof I=="number"&&isFinite(I))){const ne={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/lastModified",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/lastModified/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ne]:i.push(ne),e++}var b=Z===e}else var b=!0;if(b){if(h.name!==void 0){const I=e;if(typeof h.name!="string"){const K={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),e++}var b=I===e}else var b=!0;if(b)if(h.webkitRelativePath!==void 0){const I=e;if(typeof h.webkitRelativePath!="string"){const K={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1")+"/webkitRelativePath",schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/properties/webkitRelativePath/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[K]:i.push(K),e++}var b=I===e}else var b=!0}}}}}}else{const N={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[N]:i.push(N),e++}var R=re===e;j=j||R}}if(j)e=S,i!==null&&(S?i.length=S:i=null);else{const T={instancePath:t+"/body/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/2/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};i===null?i=[T]:i.push(T),e++}var D=w===e;if(!D)break}else{const y={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[y]:i.push(y),e++}var V=g===e;z=z||V}}if(z)e=F,i!==null&&(F?i.length=F:i=null);else{const _={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[_]:i.push(_),e++,ue.errors=i,!1}var d=A===e}else var d=!0}}}}}else return ue.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ue.errors=i,e===0}const at={type:"object",properties:{relativeUri:{type:"string",description:"Request path following the domain:port part."},scriptPath:{type:"string",description:"Path of the .php file to execute."},protocol:{type:"string",description:"Request protocol."},method:{$ref:"#/definitions/HTTPMethod",description:"Request method. Default: `GET`."},headers:{$ref:"#/definitions/PHPRequestHeaders",description:"Request headers."},body:{anyOf:[{type:"string"},{type:"object",properties:{BYTES_PER_ELEMENT:{type:"number"},buffer:{type:"object",properties:{byteLength:{type:"number"}},required:["byteLength"],additionalProperties:!1},byteLength:{type:"number"},byteOffset:{type:"number"},length:{type:"number"}},required:["BYTES_PER_ELEMENT","buffer","byteLength","byteOffset","length"],additionalProperties:{type:"number"}}],description:"Request body."},env:{type:"object",additionalProperties:{type:"string"},description:"Environment variables to set for this run."},$_SERVER:{type:"object",additionalProperties:{type:"string"},description:"$_SERVER entries to set for this run."},code:{type:"string",description:"The code snippet to eval instead of a php file."}},additionalProperties:!1};function ie(r,{instancePath:t="",parentData:f,parentDataProperty:c,rootData:u=r}={}){let i=null,e=0;if(e===0)if(r&&typeof r=="object"&&!Array.isArray(r)){const U=e;for(const b in r)if(!Cr.call(at.properties,b))return ie.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:b},message:"must NOT have additional properties"}],!1;if(U===e){if(r.relativeUri!==void 0){const b=e;if(typeof r.relativeUri!="string")return ie.errors=[{instancePath:t+"/relativeUri",schemaPath:"#/properties/relativeUri/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=b===e}else var d=!0;if(d){if(r.scriptPath!==void 0){const b=e;if(typeof r.scriptPath!="string")return ie.errors=[{instancePath:t+"/scriptPath",schemaPath:"#/properties/scriptPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=b===e}else var d=!0;if(d){if(r.protocol!==void 0){const b=e;if(typeof r.protocol!="string")return ie.errors=[{instancePath:t+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=b===e}else var d=!0;if(d){if(r.method!==void 0){let b=r.method;const D=e;if(typeof b!="string")return ie.errors=[{instancePath:t+"/method",schemaPath:"#/definitions/HTTPMethod/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(b==="GET"||b==="POST"||b==="HEAD"||b==="OPTIONS"||b==="PATCH"||b==="PUT"||b==="DELETE"))return ie.errors=[{instancePath:t+"/method",schemaPath:"#/definitions/HTTPMethod/enum",keyword:"enum",params:{allowedValues:Ir.enum},message:"must be equal to one of the allowed values"}],!1;var d=D===e}else var d=!0;if(d){if(r.headers!==void 0){let b=r.headers;const D=e;if(e===e)if(b&&typeof b=="object"&&!Array.isArray(b))for(const P in b){const A=e;if(typeof b[P]!="string")return ie.errors=[{instancePath:t+"/headers/"+P.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/PHPRequestHeaders/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var O=A===e;if(!O)break}else return ie.errors=[{instancePath:t+"/headers",schemaPath:"#/definitions/PHPRequestHeaders/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=D===e}else var d=!0;if(d){if(r.body!==void 0){let b=r.body;const D=e,se=e;let G=!1;const P=e;if(typeof b!="string"){const F={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[F]:i.push(F),e++}var V=P===e;if(G=G||V,!G){const F=e;if(e===F)if(b&&typeof b=="object"&&!Array.isArray(b)){let l;if(b.BYTES_PER_ELEMENT===void 0&&(l="BYTES_PER_ELEMENT")||b.buffer===void 0&&(l="buffer")||b.byteLength===void 0&&(l="byteLength")||b.byteOffset===void 0&&(l="byteOffset")||b.length===void 0&&(l="length")){const E={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/1/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"};i===null?i=[E]:i.push(E),e++}else{const E=e;for(const _ in b)if(!(_==="BYTES_PER_ELEMENT"||_==="buffer"||_==="byteLength"||_==="byteOffset"||_==="length")){let k=b[_];const g=e;if(!(typeof k=="number"&&isFinite(k))){const m={instancePath:t+"/body/"+_.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/body/anyOf/1/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[m]:i.push(m),e++}var W=g===e;if(!W)break}if(E===e){if(b.BYTES_PER_ELEMENT!==void 0){let _=b.BYTES_PER_ELEMENT;const k=e;if(!(typeof _=="number"&&isFinite(_))){const g={instancePath:t+"/body/BYTES_PER_ELEMENT",schemaPath:"#/properties/body/anyOf/1/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[g]:i.push(g),e++}var v=k===e}else var v=!0;if(v){if(b.buffer!==void 0){let _=b.buffer;const k=e;if(e===k)if(_&&typeof _=="object"&&!Array.isArray(_)){let m;if(_.byteLength===void 0&&(m="byteLength")){const y={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"};i===null?i=[y]:i.push(y),e++}else{const y=e;for(const h in _)if(h!=="byteLength"){const w={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties"};i===null?i=[w]:i.push(w),e++;break}if(y===e&&_.byteLength!==void 0){let h=_.byteLength;if(!(typeof h=="number"&&isFinite(h))){const w={instancePath:t+"/body/buffer/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[w]:i.push(w),e++}}}}else{const m={instancePath:t+"/body/buffer",schemaPath:"#/properties/body/anyOf/1/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[m]:i.push(m),e++}var v=k===e}else var v=!0;if(v){if(b.byteLength!==void 0){let _=b.byteLength;const k=e;if(!(typeof _=="number"&&isFinite(_))){const m={instancePath:t+"/body/byteLength",schemaPath:"#/properties/body/anyOf/1/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[m]:i.push(m),e++}var v=k===e}else var v=!0;if(v){if(b.byteOffset!==void 0){let _=b.byteOffset;const k=e;if(!(typeof _=="number"&&isFinite(_))){const m={instancePath:t+"/body/byteOffset",schemaPath:"#/properties/body/anyOf/1/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[m]:i.push(m),e++}var v=k===e}else var v=!0;if(v)if(b.length!==void 0){let _=b.length;const k=e;if(!(typeof _=="number"&&isFinite(_))){const m={instancePath:t+"/body/length",schemaPath:"#/properties/body/anyOf/1/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[m]:i.push(m),e++}var v=k===e}else var v=!0}}}}}}else{const l={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[l]:i.push(l),e++}var V=F===e;G=G||V}if(G)e=se,i!==null&&(se?i.length=se:i=null);else{const F={instancePath:t+"/body",schemaPath:"#/properties/body/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[F]:i.push(F),e++,ie.errors=i,!1}var d=D===e}else var d=!0;if(d){if(r.env!==void 0){let b=r.env;const D=e;if(e===D)if(b&&typeof b=="object"&&!Array.isArray(b))for(const G in b){const P=e;if(typeof b[G]!="string")return ie.errors=[{instancePath:t+"/env/"+G.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/env/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var R=P===e;if(!R)break}else return ie.errors=[{instancePath:t+"/env",schemaPath:"#/properties/env/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=D===e}else var d=!0;if(d){if(r.$_SERVER!==void 0){let b=r.$_SERVER;const D=e;if(e===D)if(b&&typeof b=="object"&&!Array.isArray(b))for(const G in b){const P=e;if(typeof b[G]!="string")return ie.errors=[{instancePath:t+"/$_SERVER/"+G.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/%24_SERVER/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=P===e;if(!M)break}else return ie.errors=[{instancePath:t+"/$_SERVER",schemaPath:"#/properties/%24_SERVER/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=D===e}else var d=!0;if(d)if(r.code!==void 0){const b=e;if(typeof r.code!="string")return ie.errors=[{instancePath:t+"/code",schemaPath:"#/properties/code/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=b===e}else var d=!0}}}}}}}}}else return ie.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ie.errors=i,e===0}function o(r,{instancePath:t="",parentData:f,parentDataProperty:c,rootData:u=r}={}){let i=null,e=0;if(e===0)if(r&&typeof r=="object"&&!Array.isArray(r)){let Je;if(r.step===void 0&&(Je="step"))return o.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:Je},message:"must have required property '"+Je+"'"}],!1;{const Y=r.step;if(typeof Y=="string")if(Y==="activatePlugin"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.pluginPath===void 0&&(p="pluginPath")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="pluginPath"||s==="pluginName"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/0/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/0/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var d=$===e}else var d=!0;if(d)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/0/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=n===e}else var d=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/0/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var O=a===e}else var O=!0;if(O){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/0/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="activatePlugin")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/0/properties/step/const",keyword:"const",params:{allowedValue:"activatePlugin"},message:"must be equal to constant"}],!1;var O=a===e}else var O=!0;if(O){if(r.pluginPath!==void 0){const s=e;if(typeof r.pluginPath!="string")return o.errors=[{instancePath:t+"/pluginPath",schemaPath:"#/oneOf/0/properties/pluginPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var O=s===e}else var O=!0;if(O)if(r.pluginName!==void 0){const s=e;if(typeof r.pluginName!="string")return o.errors=[{instancePath:t+"/pluginName",schemaPath:"#/oneOf/0/properties/pluginName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var O=s===e}else var O=!0}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="activateTheme"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.step===void 0&&(p="step")||r.themeFolderName===void 0&&(p="themeFolderName"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="themeFolderName"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/1/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/1/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var V=$===e}else var V=!0;if(V)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/1/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=n===e}else var V=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/1/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var W=a===e}else var W=!0;if(W){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/1/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="activateTheme")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/1/properties/step/const",keyword:"const",params:{allowedValue:"activateTheme"},message:"must be equal to constant"}],!1;var W=a===e}else var W=!0;if(W)if(r.themeFolderName!==void 0){const s=e;if(typeof r.themeFolderName!="string")return o.errors=[{instancePath:t+"/themeFolderName",schemaPath:"#/oneOf/1/properties/themeFolderName/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var W=s===e}else var W=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="cp"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.fromPath===void 0&&(p="fromPath")||r.step===void 0&&(p="step")||r.toPath===void 0&&(p="toPath"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/2/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="fromPath"||s==="toPath"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/2/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/2/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/2/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var v=$===e}else var v=!0;if(v)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/2/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=n===e}else var v=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/2/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var R=a===e}else var R=!0;if(R){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/2/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="cp")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/2/properties/step/const",keyword:"const",params:{allowedValue:"cp"},message:"must be equal to constant"}],!1;var R=a===e}else var R=!0;if(R){if(r.fromPath!==void 0){const s=e;if(typeof r.fromPath!="string")return o.errors=[{instancePath:t+"/fromPath",schemaPath:"#/oneOf/2/properties/fromPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var R=s===e}else var R=!0;if(R)if(r.toPath!==void 0){const s=e;if(typeof r.toPath!="string")return o.errors=[{instancePath:t+"/toPath",schemaPath:"#/oneOf/2/properties/toPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var R=s===e}else var R=!0}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="defineWpConfigConsts"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.consts===void 0&&(p="consts")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/3/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="consts"||s==="method"||s==="virtualize"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/3/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/3/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/3/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var M=$===e}else var M=!0;if(M)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/3/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=n===e}else var M=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/3/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var U=a===e}else var U=!0;if(U){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/3/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="defineWpConfigConsts")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/3/properties/step/const",keyword:"const",params:{allowedValue:"defineWpConfigConsts"},message:"must be equal to constant"}],!1;var U=a===e}else var U=!0;if(U){if(r.consts!==void 0){let s=r.consts;const a=e;if(e===a&&!(s&&typeof s=="object"&&!Array.isArray(s)))return o.errors=[{instancePath:t+"/consts",schemaPath:"#/oneOf/3/properties/consts/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var U=a===e}else var U=!0;if(U){if(r.method!==void 0){let s=r.method;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/method",schemaPath:"#/oneOf/3/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(s==="rewrite-wp-config"||s==="define-before-run"))return o.errors=[{instancePath:t+"/method",schemaPath:"#/oneOf/3/properties/method/enum",keyword:"enum",params:{allowedValues:Ke.oneOf[3].properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var U=a===e}else var U=!0;if(U)if(r.virtualize!==void 0){const s=e;if(typeof r.virtualize!="boolean")return o.errors=[{instancePath:t+"/virtualize",schemaPath:"#/oneOf/3/properties/virtualize/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var U=s===e}else var U=!0}}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="defineSiteUrl"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.siteUrl===void 0&&(p="siteUrl")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/4/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="siteUrl"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/4/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/4/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/4/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var b=$===e}else var b=!0;if(b)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/4/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var b=n===e}else var b=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/4/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var D=a===e}else var D=!0;if(D){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/4/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="defineSiteUrl")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/4/properties/step/const",keyword:"const",params:{allowedValue:"defineSiteUrl"},message:"must be equal to constant"}],!1;var D=a===e}else var D=!0;if(D)if(r.siteUrl!==void 0){const s=e;if(typeof r.siteUrl!="string")return o.errors=[{instancePath:t+"/siteUrl",schemaPath:"#/oneOf/4/properties/siteUrl/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var D=s===e}else var D=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/4/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="enableMultisite"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/5/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/5/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/5/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/5/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var se=$===e}else var se=!0;if(se)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/5/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var se=n===e}else var se=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/5/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var G=a===e}else var G=!0;if(G)if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/5/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="enableMultisite")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/5/properties/step/const",keyword:"const",params:{allowedValue:"enableMultisite"},message:"must be equal to constant"}],!1;var G=a===e}else var G=!0}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/5/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="importWxr"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.file===void 0&&(p="file")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/6/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="file"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/6/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/6/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/6/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var P=$===e}else var P=!0;if(P)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/6/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var P=n===e}else var P=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/6/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var A=a===e}else var A=!0;if(A){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/6/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="importWxr")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/6/properties/step/const",keyword:"const",params:{allowedValue:"importWxr"},message:"must be equal to constant"}],!1;var A=a===e}else var A=!0;if(A)if(r.file!==void 0){const s=e;te(r.file,{instancePath:t+"/file",parentData:r,parentDataProperty:"file",rootData:u})||(i=i===null?te.errors:i.concat(te.errors),e=i.length);var A=s===e}else var A=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/6/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="importThemeStarterContent"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/7/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="themeSlug"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/7/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/7/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/7/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var F=$===e}else var F=!0;if(F)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/7/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var F=n===e}else var F=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/7/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var z=a===e}else var z=!0;if(z){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/7/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="importThemeStarterContent")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/7/properties/step/const",keyword:"const",params:{allowedValue:"importThemeStarterContent"},message:"must be equal to constant"}],!1;var z=a===e}else var z=!0;if(z)if(r.themeSlug!==void 0){const s=e;if(typeof r.themeSlug!="string")return o.errors=[{instancePath:t+"/themeSlug",schemaPath:"#/oneOf/7/properties/themeSlug/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var z=s===e}else var z=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/7/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="importWordPressFiles"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.step===void 0&&(p="step")||r.wordPressFilesZip===void 0&&(p="wordPressFilesZip"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/8/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="wordPressFilesZip"||s==="pathInZip"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/8/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/8/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/8/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var l=$===e}else var l=!0;if(l)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/8/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=n===e}else var l=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/8/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var E=a===e}else var E=!0;if(E){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/8/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="importWordPressFiles")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/8/properties/step/const",keyword:"const",params:{allowedValue:"importWordPressFiles"},message:"must be equal to constant"}],!1;var E=a===e}else var E=!0;if(E){if(r.wordPressFilesZip!==void 0){const s=e;te(r.wordPressFilesZip,{instancePath:t+"/wordPressFilesZip",parentData:r,parentDataProperty:"wordPressFilesZip",rootData:u})||(i=i===null?te.errors:i.concat(te.errors),e=i.length);var E=s===e}else var E=!0;if(E)if(r.pathInZip!==void 0){const s=e;if(typeof r.pathInZip!="string")return o.errors=[{instancePath:t+"/pathInZip",schemaPath:"#/oneOf/8/properties/pathInZip/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var E=s===e}else var E=!0}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/8/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="installPlugin"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.pluginZipFile===void 0&&(p="pluginZipFile")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/9/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="ifAlreadyInstalled"||s==="step"||s==="pluginZipFile"||s==="options"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/9/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/9/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/9/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var _=$===e}else var _=!0;if(_)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/9/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var _=n===e}else var _=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/9/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var k=a===e}else var k=!0;if(k){if(r.ifAlreadyInstalled!==void 0){let s=r.ifAlreadyInstalled;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/ifAlreadyInstalled",schemaPath:"#/oneOf/9/properties/ifAlreadyInstalled/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(s==="overwrite"||s==="skip"||s==="error"))return o.errors=[{instancePath:t+"/ifAlreadyInstalled",schemaPath:"#/oneOf/9/properties/ifAlreadyInstalled/enum",keyword:"enum",params:{allowedValues:Ke.oneOf[9].properties.ifAlreadyInstalled.enum},message:"must be equal to one of the allowed values"}],!1;var k=a===e}else var k=!0;if(k){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/9/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="installPlugin")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/9/properties/step/const",keyword:"const",params:{allowedValue:"installPlugin"},message:"must be equal to constant"}],!1;var k=a===e}else var k=!0;if(k){if(r.pluginZipFile!==void 0){const s=e;te(r.pluginZipFile,{instancePath:t+"/pluginZipFile",parentData:r,parentDataProperty:"pluginZipFile",rootData:u})||(i=i===null?te.errors:i.concat(te.errors),e=i.length);var k=s===e}else var k=!0;if(k)if(r.options!==void 0){let s=r.options;const a=e;if(e===e)if(s&&typeof s=="object"&&!Array.isArray(s)){const $=e;for(const be in s)if(be!=="activate")return o.errors=[{instancePath:t+"/options",schemaPath:"#/definitions/InstallPluginOptions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:be},message:"must NOT have additional properties"}],!1;if($===e&&s.activate!==void 0&&typeof s.activate!="boolean")return o.errors=[{instancePath:t+"/options/activate",schemaPath:"#/definitions/InstallPluginOptions/properties/activate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1}else return o.errors=[{instancePath:t+"/options",schemaPath:"#/definitions/InstallPluginOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var k=a===e}else var k=!0}}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/9/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="installTheme"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.step===void 0&&(p="step")||r.themeZipFile===void 0&&(p="themeZipFile"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/10/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="ifAlreadyInstalled"||s==="step"||s==="themeZipFile"||s==="options"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/10/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/10/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/10/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var g=$===e}else var g=!0;if(g)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/10/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var g=n===e}else var g=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/10/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=a===e}else var m=!0;if(m){if(r.ifAlreadyInstalled!==void 0){let s=r.ifAlreadyInstalled;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/ifAlreadyInstalled",schemaPath:"#/oneOf/10/properties/ifAlreadyInstalled/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(s==="overwrite"||s==="skip"||s==="error"))return o.errors=[{instancePath:t+"/ifAlreadyInstalled",schemaPath:"#/oneOf/10/properties/ifAlreadyInstalled/enum",keyword:"enum",params:{allowedValues:Ke.oneOf[10].properties.ifAlreadyInstalled.enum},message:"must be equal to one of the allowed values"}],!1;var m=a===e}else var m=!0;if(m){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/10/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="installTheme")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/10/properties/step/const",keyword:"const",params:{allowedValue:"installTheme"},message:"must be equal to constant"}],!1;var m=a===e}else var m=!0;if(m){if(r.themeZipFile!==void 0){const s=e;te(r.themeZipFile,{instancePath:t+"/themeZipFile",parentData:r,parentDataProperty:"themeZipFile",rootData:u})||(i=i===null?te.errors:i.concat(te.errors),e=i.length);var m=s===e}else var m=!0;if(m)if(r.options!==void 0){let s=r.options;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const n=e;for(const $ in s)if(!($==="activate"||$==="importStarterContent"))return o.errors=[{instancePath:t+"/options",schemaPath:"#/oneOf/10/properties/options/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:$},message:"must NOT have additional properties"}],!1;if(n===e){if(s.activate!==void 0){const $=e;if(typeof s.activate!="boolean")return o.errors=[{instancePath:t+"/options/activate",schemaPath:"#/oneOf/10/properties/options/properties/activate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var y=$===e}else var y=!0;if(y)if(s.importStarterContent!==void 0){const $=e;if(typeof s.importStarterContent!="boolean")return o.errors=[{instancePath:t+"/options/importStarterContent",schemaPath:"#/oneOf/10/properties/options/properties/importStarterContent/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var y=$===e}else var y=!0}}else return o.errors=[{instancePath:t+"/options",schemaPath:"#/oneOf/10/properties/options/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var m=a===e}else var m=!0}}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/10/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="login"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/11/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="username"||s==="password"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/11/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/11/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/11/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var h=$===e}else var h=!0;if(h)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/11/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var h=n===e}else var h=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/11/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var w=a===e}else var w=!0;if(w){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/11/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="login")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/11/properties/step/const",keyword:"const",params:{allowedValue:"login"},message:"must be equal to constant"}],!1;var w=a===e}else var w=!0;if(w){if(r.username!==void 0){const s=e;if(typeof r.username!="string")return o.errors=[{instancePath:t+"/username",schemaPath:"#/oneOf/11/properties/username/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=s===e}else var w=!0;if(w)if(r.password!==void 0){const s=e;if(typeof r.password!="string")return o.errors=[{instancePath:t+"/password",schemaPath:"#/oneOf/11/properties/password/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=s===e}else var w=!0}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/11/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="mkdir"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.path===void 0&&(p="path")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/12/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="path"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/12/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/12/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/12/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var S=$===e}else var S=!0;if(S)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/12/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var S=n===e}else var S=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/12/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var j=a===e}else var j=!0;if(j){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/12/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="mkdir")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/12/properties/step/const",keyword:"const",params:{allowedValue:"mkdir"},message:"must be equal to constant"}],!1;var j=a===e}else var j=!0;if(j)if(r.path!==void 0){const s=e;if(typeof r.path!="string")return o.errors=[{instancePath:t+"/path",schemaPath:"#/oneOf/12/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var j=s===e}else var j=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/12/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="mv"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.fromPath===void 0&&(p="fromPath")||r.step===void 0&&(p="step")||r.toPath===void 0&&(p="toPath"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/13/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="fromPath"||s==="toPath"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/13/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/13/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/13/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var x=$===e}else var x=!0;if(x)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/13/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var x=n===e}else var x=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/13/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var T=a===e}else var T=!0;if(T){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/13/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="mv")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/13/properties/step/const",keyword:"const",params:{allowedValue:"mv"},message:"must be equal to constant"}],!1;var T=a===e}else var T=!0;if(T){if(r.fromPath!==void 0){const s=e;if(typeof r.fromPath!="string")return o.errors=[{instancePath:t+"/fromPath",schemaPath:"#/oneOf/13/properties/fromPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var T=s===e}else var T=!0;if(T)if(r.toPath!==void 0){const s=e;if(typeof r.toPath!="string")return o.errors=[{instancePath:t+"/toPath",schemaPath:"#/oneOf/13/properties/toPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var T=s===e}else var T=!0}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/13/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="resetData"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/14/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/14/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/14/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/14/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var H=$===e}else var H=!0;if(H)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/14/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var H=n===e}else var H=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/14/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var re=a===e}else var re=!0;if(re)if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/14/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="resetData")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/14/properties/step/const",keyword:"const",params:{allowedValue:"resetData"},message:"must be equal to constant"}],!1;var re=a===e}else var re=!0}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/14/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="request"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.request===void 0&&(p="request")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/15/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="request"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/15/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/15/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/15/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var J=$===e}else var J=!0;if(J)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/15/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var J=n===e}else var J=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/15/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var N=a===e}else var N=!0;if(N){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/15/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="request")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/15/properties/step/const",keyword:"const",params:{allowedValue:"request"},message:"must be equal to constant"}],!1;var N=a===e}else var N=!0;if(N)if(r.request!==void 0){const s=e;ue(r.request,{instancePath:t+"/request",parentData:r,parentDataProperty:"request",rootData:u})||(i=i===null?ue.errors:i.concat(ue.errors),e=i.length);var N=s===e}else var N=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/15/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="rm"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.path===void 0&&(p="path")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/16/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="path"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/16/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/16/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/16/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var X=$===e}else var X=!0;if(X)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/16/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var X=n===e}else var X=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/16/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var I=a===e}else var I=!0;if(I){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/16/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="rm")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/16/properties/step/const",keyword:"const",params:{allowedValue:"rm"},message:"must be equal to constant"}],!1;var I=a===e}else var I=!0;if(I)if(r.path!==void 0){const s=e;if(typeof r.path!="string")return o.errors=[{instancePath:t+"/path",schemaPath:"#/oneOf/16/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var I=s===e}else var I=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/16/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="rmdir"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.path===void 0&&(p="path")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/17/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="path"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/17/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/17/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/17/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Z=$===e}else var Z=!0;if(Z)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/17/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Z=n===e}else var Z=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/17/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var K=a===e}else var K=!0;if(K){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/17/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="rmdir")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/17/properties/step/const",keyword:"const",params:{allowedValue:"rmdir"},message:"must be equal to constant"}],!1;var K=a===e}else var K=!0;if(K)if(r.path!==void 0){const s=e;if(typeof r.path!="string")return o.errors=[{instancePath:t+"/path",schemaPath:"#/oneOf/17/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var K=s===e}else var K=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/17/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="runPHP"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.code===void 0&&(p="code")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/18/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="code"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/18/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/18/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/18/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var ne=$===e}else var ne=!0;if(ne)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/18/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ne=n===e}else var ne=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/18/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ae=a===e}else var ae=!0;if(ae){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/18/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="runPHP")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/18/properties/step/const",keyword:"const",params:{allowedValue:"runPHP"},message:"must be equal to constant"}],!1;var ae=a===e}else var ae=!0;if(ae)if(r.code!==void 0){const s=e;if(typeof r.code!="string")return o.errors=[{instancePath:t+"/code",schemaPath:"#/oneOf/18/properties/code/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ae=s===e}else var ae=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/18/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="runPHPWithOptions"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.options===void 0&&(p="options")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/19/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="options"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/19/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/19/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/19/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Re=$===e}else var Re=!0;if(Re)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/19/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Re=n===e}else var Re=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/19/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ve=a===e}else var ve=!0;if(ve){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/19/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="runPHPWithOptions")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/19/properties/step/const",keyword:"const",params:{allowedValue:"runPHPWithOptions"},message:"must be equal to constant"}],!1;var ve=a===e}else var ve=!0;if(ve)if(r.options!==void 0){const s=e;ie(r.options,{instancePath:t+"/options",parentData:r,parentDataProperty:"options",rootData:u})||(i=i===null?ie.errors:i.concat(ie.errors),e=i.length);var ve=s===e}else var ve=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/19/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="runWpInstallationWizard"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.options===void 0&&(p="options")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/20/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="options"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/20/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/20/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/20/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Se=$===e}else var Se=!0;if(Se)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/20/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Se=n===e}else var Se=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/20/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Pe=a===e}else var Pe=!0;if(Pe){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/20/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="runWpInstallationWizard")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/20/properties/step/const",keyword:"const",params:{allowedValue:"runWpInstallationWizard"},message:"must be equal to constant"}],!1;var Pe=a===e}else var Pe=!0;if(Pe)if(r.options!==void 0){let s=r.options;const a=e;if(e===e)if(s&&typeof s=="object"&&!Array.isArray(s)){const $=e;for(const be in s)if(!(be==="adminUsername"||be==="adminPassword"))return o.errors=[{instancePath:t+"/options",schemaPath:"#/definitions/WordPressInstallationOptions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:be},message:"must NOT have additional properties"}],!1;if($===e){if(s.adminUsername!==void 0){const be=e;if(typeof s.adminUsername!="string")return o.errors=[{instancePath:t+"/options/adminUsername",schemaPath:"#/definitions/WordPressInstallationOptions/properties/adminUsername/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Le=be===e}else var Le=!0;if(Le)if(s.adminPassword!==void 0){const be=e;if(typeof s.adminPassword!="string")return o.errors=[{instancePath:t+"/options/adminPassword",schemaPath:"#/definitions/WordPressInstallationOptions/properties/adminPassword/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Le=be===e}else var Le=!0}}else return o.errors=[{instancePath:t+"/options",schemaPath:"#/definitions/WordPressInstallationOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Pe=a===e}else var Pe=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/20/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="runSql"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.sql===void 0&&(p="sql")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/21/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="sql"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/21/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/21/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/21/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Ne=$===e}else var Ne=!0;if(Ne)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/21/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ne=n===e}else var Ne=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/21/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var _e=a===e}else var _e=!0;if(_e){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/21/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="runSql")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/21/properties/step/const",keyword:"const",params:{allowedValue:"runSql"},message:"must be equal to constant"}],!1;var _e=a===e}else var _e=!0;if(_e)if(r.sql!==void 0){const s=e;te(r.sql,{instancePath:t+"/sql",parentData:r,parentDataProperty:"sql",rootData:u})||(i=i===null?te.errors:i.concat(te.errors),e=i.length);var _e=s===e}else var _e=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/21/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="setSiteOptions"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.options===void 0&&(p="options")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/22/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="options"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/22/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/22/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/22/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Fe=$===e}else var Fe=!0;if(Fe)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/22/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Fe=n===e}else var Fe=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/22/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ke=a===e}else var ke=!0;if(ke){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/22/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="setSiteOptions")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/22/properties/step/const",keyword:"const",params:{allowedValue:"setSiteOptions"},message:"must be equal to constant"}],!1;var ke=a===e}else var ke=!0;if(ke)if(r.options!==void 0){let s=r.options;const a=e;if(e===a&&!(s&&typeof s=="object"&&!Array.isArray(s)))return o.errors=[{instancePath:t+"/options",schemaPath:"#/oneOf/22/properties/options/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ke=a===e}else var ke=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/22/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="unzip"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.extractToPath===void 0&&(p="extractToPath")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/23/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="zipFile"||s==="zipPath"||s==="extractToPath"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/23/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/23/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/23/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var xe=$===e}else var xe=!0;if(xe)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/23/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var xe=n===e}else var xe=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/23/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var pe=a===e}else var pe=!0;if(pe){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/23/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="unzip")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/23/properties/step/const",keyword:"const",params:{allowedValue:"unzip"},message:"must be equal to constant"}],!1;var pe=a===e}else var pe=!0;if(pe){if(r.zipFile!==void 0){const s=e;te(r.zipFile,{instancePath:t+"/zipFile",parentData:r,parentDataProperty:"zipFile",rootData:u})||(i=i===null?te.errors:i.concat(te.errors),e=i.length);var pe=s===e}else var pe=!0;if(pe){if(r.zipPath!==void 0){const s=e;if(typeof r.zipPath!="string")return o.errors=[{instancePath:t+"/zipPath",schemaPath:"#/oneOf/23/properties/zipPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pe=s===e}else var pe=!0;if(pe)if(r.extractToPath!==void 0){const s=e;if(typeof r.extractToPath!="string")return o.errors=[{instancePath:t+"/extractToPath",schemaPath:"#/oneOf/23/properties/extractToPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var pe=s===e}else var pe=!0}}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/23/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="updateUserMeta"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.meta===void 0&&(p="meta")||r.step===void 0&&(p="step")||r.userId===void 0&&(p="userId"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/24/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="meta"||s==="userId"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/24/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/24/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Ce=$===e}else var Ce=!0;if(Ce)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/24/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ce=n===e}else var Ce=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/24/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ye=a===e}else var ye=!0;if(ye){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/24/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="updateUserMeta")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/24/properties/step/const",keyword:"const",params:{allowedValue:"updateUserMeta"},message:"must be equal to constant"}],!1;var ye=a===e}else var ye=!0;if(ye){if(r.meta!==void 0){let s=r.meta;const a=e;if(e===a&&!(s&&typeof s=="object"&&!Array.isArray(s)))return o.errors=[{instancePath:t+"/meta",schemaPath:"#/oneOf/24/properties/meta/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ye=a===e}else var ye=!0;if(ye)if(r.userId!==void 0){let s=r.userId;const a=e;if(!(typeof s=="number"&&isFinite(s)))return o.errors=[{instancePath:t+"/userId",schemaPath:"#/oneOf/24/properties/userId/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var ye=a===e}else var ye=!0}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/24/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="writeFile"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.data===void 0&&(p="data")||r.path===void 0&&(p="path")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/25/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="path"||s==="data"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/25/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/25/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/25/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Ie=$===e}else var Ie=!0;if(Ie)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/25/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ie=n===e}else var Ie=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/25/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var he=a===e}else var he=!0;if(he){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/25/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="writeFile")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/25/properties/step/const",keyword:"const",params:{allowedValue:"writeFile"},message:"must be equal to constant"}],!1;var he=a===e}else var he=!0;if(he){if(r.path!==void 0){const s=e;if(typeof r.path!="string")return o.errors=[{instancePath:t+"/path",schemaPath:"#/oneOf/25/properties/path/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var he=s===e}else var he=!0;if(he)if(r.data!==void 0){let s=r.data;const a=e,q=e;let n=!1;const $=e;te(s,{instancePath:t+"/data",parentData:r,parentDataProperty:"data",rootData:u})||(i=i===null?te.errors:i.concat(te.errors),e=i.length);var Ee=$===e;if(n=n||Ee,!n){const le=e;if(typeof s!="string"){const we={instancePath:t+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[we]:i.push(we),e++}var Ee=le===e;if(n=n||Ee,!n){const we=e;if(e===we)if(s&&typeof s=="object"&&!Array.isArray(s)){let me;if(s.BYTES_PER_ELEMENT===void 0&&(me="BYTES_PER_ELEMENT")||s.buffer===void 0&&(me="buffer")||s.byteLength===void 0&&(me="byteLength")||s.byteOffset===void 0&&(me="byteOffset")||s.length===void 0&&(me="length")){const Ve={instancePath:t+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf/2/required",keyword:"required",params:{missingProperty:me},message:"must have required property '"+me+"'"};i===null?i=[Ve]:i.push(Ve),e++}else{const Ve=e;for(const Q in s)if(!(Q==="BYTES_PER_ELEMENT"||Q==="buffer"||Q==="byteLength"||Q==="byteOffset"||Q==="length")){let de=s[Q];const De=e;if(!(typeof de=="number"&&isFinite(de))){const oe={instancePath:t+"/data/"+Q.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/oneOf/25/properties/data/anyOf/2/additionalProperties/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[oe]:i.push(oe),e++}var Wr=De===e;if(!Wr)break}if(Ve===e){if(s.BYTES_PER_ELEMENT!==void 0){let Q=s.BYTES_PER_ELEMENT;const de=e;if(!(typeof Q=="number"&&isFinite(Q))){const De={instancePath:t+"/data/BYTES_PER_ELEMENT",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/BYTES_PER_ELEMENT/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[De]:i.push(De),e++}var fe=de===e}else var fe=!0;if(fe){if(s.buffer!==void 0){let Q=s.buffer;const de=e;if(e===de)if(Q&&typeof Q=="object"&&!Array.isArray(Q)){let oe;if(Q.byteLength===void 0&&(oe="byteLength")){const Me={instancePath:t+"/data/buffer",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/required",keyword:"required",params:{missingProperty:oe},message:"must have required property '"+oe+"'"};i===null?i=[Me]:i.push(Me),e++}else{const Me=e;for(const je in Q)if(je!=="byteLength"){const Te={instancePath:t+"/data/buffer",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:je},message:"must NOT have additional properties"};i===null?i=[Te]:i.push(Te),e++;break}if(Me===e&&Q.byteLength!==void 0){let je=Q.byteLength;if(!(typeof je=="number"&&isFinite(je))){const Te={instancePath:t+"/data/buffer/byteLength",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Te]:i.push(Te),e++}}}}else{const oe={instancePath:t+"/data/buffer",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/buffer/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[oe]:i.push(oe),e++}var fe=de===e}else var fe=!0;if(fe){if(s.byteLength!==void 0){let Q=s.byteLength;const de=e;if(!(typeof Q=="number"&&isFinite(Q))){const oe={instancePath:t+"/data/byteLength",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/byteLength/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[oe]:i.push(oe),e++}var fe=de===e}else var fe=!0;if(fe){if(s.byteOffset!==void 0){let Q=s.byteOffset;const de=e;if(!(typeof Q=="number"&&isFinite(Q))){const oe={instancePath:t+"/data/byteOffset",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/byteOffset/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[oe]:i.push(oe),e++}var fe=de===e}else var fe=!0;if(fe)if(s.length!==void 0){let Q=s.length;const de=e;if(!(typeof Q=="number"&&isFinite(Q))){const oe={instancePath:t+"/data/length",schemaPath:"#/oneOf/25/properties/data/anyOf/2/properties/length/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[oe]:i.push(oe),e++}var fe=de===e}else var fe=!0}}}}}}else{const me={instancePath:t+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[me]:i.push(me),e++}var Ee=we===e;n=n||Ee}}if(n)e=q,i!==null&&(q?i.length=q:i=null);else{const le={instancePath:t+"/data",schemaPath:"#/oneOf/25/properties/data/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[le]:i.push(le),e++,o.errors=i,!1}var he=a===e}else var he=!0}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/25/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="wp-cli"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.command===void 0&&(p="command")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/26/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="command"||s==="wpCliPath"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/26/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/26/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/26/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var We=$===e}else var We=!0;if(We)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/26/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var We=n===e}else var We=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/26/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var ge=a===e}else var ge=!0;if(ge){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/26/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="wp-cli")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/26/properties/step/const",keyword:"const",params:{allowedValue:"wp-cli"},message:"must be equal to constant"}],!1;var ge=a===e}else var ge=!0;if(ge){if(r.command!==void 0){let s=r.command;const a=e,q=e;let n=!1;const $=e;if(typeof s!="string"){const le={instancePath:t+"/command",schemaPath:"#/oneOf/26/properties/command/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[le]:i.push(le),e++}var Xe=$===e;if(n=n||Xe,!n){const le=e;if(e===le)if(Array.isArray(s)){var pr=!0;const we=s.length;for(let Be=0;Be<we;Be++){const me=e;if(typeof s[Be]!="string"){const Q={instancePath:t+"/command/"+Be,schemaPath:"#/oneOf/26/properties/command/anyOf/1/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Q]:i.push(Q),e++}var pr=me===e;if(!pr)break}}else{const we={instancePath:t+"/command",schemaPath:"#/oneOf/26/properties/command/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[we]:i.push(we),e++}var Xe=le===e;n=n||Xe}if(n)e=q,i!==null&&(q?i.length=q:i=null);else{const le={instancePath:t+"/command",schemaPath:"#/oneOf/26/properties/command/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[le]:i.push(le),e++,o.errors=i,!1}var ge=a===e}else var ge=!0;if(ge)if(r.wpCliPath!==void 0){const s=e;if(typeof r.wpCliPath!="string")return o.errors=[{instancePath:t+"/wpCliPath",schemaPath:"#/oneOf/26/properties/wpCliPath/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var ge=s===e}else var ge=!0}}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/26/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else if(Y==="setSiteLanguage"){if(e===e)if(r&&typeof r=="object"&&!Array.isArray(r)){let p;if(r.language===void 0&&(p="language")||r.step===void 0&&(p="step"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/27/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;{const L=e;for(const s in r)if(!(s==="progress"||s==="step"||s==="language"))return o.errors=[{instancePath:t,schemaPath:"#/oneOf/27/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"}],!1;if(L===e){if(r.progress!==void 0){let s=r.progress;const a=e;if(e===a)if(s&&typeof s=="object"&&!Array.isArray(s)){const q=e;for(const n in s)if(!(n==="weight"||n==="caption"))return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/27/properties/progress/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:n},message:"must NOT have additional properties"}],!1;if(q===e){if(s.weight!==void 0){let n=s.weight;const $=e;if(!(typeof n=="number"&&isFinite(n)))return o.errors=[{instancePath:t+"/progress/weight",schemaPath:"#/oneOf/27/properties/progress/properties/weight/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Ue=$===e}else var Ue=!0;if(Ue)if(s.caption!==void 0){const n=e;if(typeof s.caption!="string")return o.errors=[{instancePath:t+"/progress/caption",schemaPath:"#/oneOf/27/properties/progress/properties/caption/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Ue=n===e}else var Ue=!0}}else return o.errors=[{instancePath:t+"/progress",schemaPath:"#/oneOf/27/properties/progress/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Oe=a===e}else var Oe=!0;if(Oe){if(r.step!==void 0){let s=r.step;const a=e;if(typeof s!="string")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/27/properties/step/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(s!=="setSiteLanguage")return o.errors=[{instancePath:t+"/step",schemaPath:"#/oneOf/27/properties/step/const",keyword:"const",params:{allowedValue:"setSiteLanguage"},message:"must be equal to constant"}],!1;var Oe=a===e}else var Oe=!0;if(Oe)if(r.language!==void 0){const s=e;if(typeof r.language!="string")return o.errors=[{instancePath:t+"/language",schemaPath:"#/oneOf/27/properties/language/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var Oe=s===e}else var Oe=!0}}}}else return o.errors=[{instancePath:t,schemaPath:"#/oneOf/27/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}else return o.errors=[{instancePath:t,schemaPath:"#/discriminator",keyword:"discriminator",params:{error:"mapping",tag:"step",tagValue:Y},message:'value of tag "step" must be in oneOf'}],!1;else return o.errors=[{instancePath:t,schemaPath:"#/discriminator",keyword:"discriminator",params:{error:"tag",tag:"step",tagValue:Y},message:'tag "step" must be string'}],!1}}else return o.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return o.errors=i,e===0}function B(r,{instancePath:t="",parentData:f,parentDataProperty:c,rootData:u=r}={}){let i=null,e=0;if(e===0)if(r&&typeof r=="object"&&!Array.isArray(r)){const z=e;for(const l in r)if(!Cr.call(it.properties,l))return B.errors=[{instancePath:t,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;if(z===e){if(r.landingPage!==void 0){const l=e;if(typeof r.landingPage!="string")return B.errors=[{instancePath:t+"/landingPage",schemaPath:"#/properties/landingPage/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=l===e}else var d=!0;if(d){if(r.description!==void 0){const l=e;if(typeof r.description!="string")return B.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=l===e}else var d=!0;if(d){if(r.meta!==void 0){let l=r.meta;const E=e;if(e===E)if(l&&typeof l=="object"&&!Array.isArray(l)){let k;if(l.title===void 0&&(k="title")||l.author===void 0&&(k="author"))return B.errors=[{instancePath:t+"/meta",schemaPath:"#/properties/meta/required",keyword:"required",params:{missingProperty:k},message:"must have required property '"+k+"'"}],!1;{const g=e;for(const m in l)if(!(m==="title"||m==="description"||m==="author"||m==="categories"))return B.errors=[{instancePath:t+"/meta",schemaPath:"#/properties/meta/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;if(g===e){if(l.title!==void 0){const m=e;if(typeof l.title!="string")return B.errors=[{instancePath:t+"/meta/title",schemaPath:"#/properties/meta/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var O=m===e}else var O=!0;if(O){if(l.description!==void 0){const m=e;if(typeof l.description!="string")return B.errors=[{instancePath:t+"/meta/description",schemaPath:"#/properties/meta/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var O=m===e}else var O=!0;if(O){if(l.author!==void 0){const m=e;if(typeof l.author!="string")return B.errors=[{instancePath:t+"/meta/author",schemaPath:"#/properties/meta/properties/author/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var O=m===e}else var O=!0;if(O)if(l.categories!==void 0){let m=l.categories;const y=e;if(e===y)if(Array.isArray(m)){var V=!0;const w=m.length;for(let S=0;S<w;S++){const j=e;if(typeof m[S]!="string")return B.errors=[{instancePath:t+"/meta/categories/"+S,schemaPath:"#/properties/meta/properties/categories/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var V=j===e;if(!V)break}}else return B.errors=[{instancePath:t+"/meta/categories",schemaPath:"#/properties/meta/properties/categories/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var O=y===e}else var O=!0}}}}}else return B.errors=[{instancePath:t+"/meta",schemaPath:"#/properties/meta/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=E===e}else var d=!0;if(d){if(r.preferredVersions!==void 0){let l=r.preferredVersions;const E=e;if(e===E)if(l&&typeof l=="object"&&!Array.isArray(l)){let k;if(l.php===void 0&&(k="php")||l.wp===void 0&&(k="wp"))return B.errors=[{instancePath:t+"/preferredVersions",schemaPath:"#/properties/preferredVersions/required",keyword:"required",params:{missingProperty:k},message:"must have required property '"+k+"'"}],!1;{const g=e;for(const m in l)if(!(m==="php"||m==="wp"))return B.errors=[{instancePath:t+"/preferredVersions",schemaPath:"#/properties/preferredVersions/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:m},message:"must NOT have additional properties"}],!1;if(g===e){if(l.php!==void 0){let m=l.php;const y=e,h=e;let w=!1;const S=e;if(typeof m!="string"){const j={instancePath:t+"/preferredVersions/php",schemaPath:"#/definitions/SupportedPHPVersion/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[j]:i.push(j),e++}if(!(m==="8.3"||m==="8.2"||m==="8.1"||m==="8.0"||m==="7.4"||m==="7.3"||m==="7.2"||m==="7.1"||m==="7.0")){const j={instancePath:t+"/preferredVersions/php",schemaPath:"#/definitions/SupportedPHPVersion/enum",keyword:"enum",params:{allowedValues:ot.enum},message:"must be equal to one of the allowed values"};i===null?i=[j]:i.push(j),e++}var W=S===e;if(w=w||W,!w){const j=e;if(typeof m!="string"){const T={instancePath:t+"/preferredVersions/php",schemaPath:"#/properties/preferredVersions/properties/php/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[T]:i.push(T),e++}if(m!=="latest"){const T={instancePath:t+"/preferredVersions/php",schemaPath:"#/properties/preferredVersions/properties/php/anyOf/1/const",keyword:"const",params:{allowedValue:"latest"},message:"must be equal to constant"};i===null?i=[T]:i.push(T),e++}var W=j===e;w=w||W}if(w)e=h,i!==null&&(h?i.length=h:i=null);else{const j={instancePath:t+"/preferredVersions/php",schemaPath:"#/properties/preferredVersions/properties/php/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[j]:i.push(j),e++,B.errors=i,!1}var v=y===e}else var v=!0;if(v)if(l.wp!==void 0){const m=e;if(typeof l.wp!="string")return B.errors=[{instancePath:t+"/preferredVersions/wp",schemaPath:"#/properties/preferredVersions/properties/wp/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=m===e}else var v=!0}}}else return B.errors=[{instancePath:t+"/preferredVersions",schemaPath:"#/properties/preferredVersions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=E===e}else var d=!0;if(d){if(r.features!==void 0){let l=r.features;const E=e;if(e===E)if(l&&typeof l=="object"&&!Array.isArray(l)){const k=e;for(const g in l)if(g!=="networking")return B.errors=[{instancePath:t+"/features",schemaPath:"#/properties/features/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:g},message:"must NOT have additional properties"}],!1;if(k===e&&l.networking!==void 0&&typeof l.networking!="boolean")return B.errors=[{instancePath:t+"/features/networking",schemaPath:"#/properties/features/properties/networking/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1}else return B.errors=[{instancePath:t+"/features",schemaPath:"#/properties/features/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=E===e}else var d=!0;if(d){if(r.extraLibraries!==void 0){let l=r.extraLibraries;const E=e;if(e===E)if(Array.isArray(l)){var R=!0;const k=l.length;for(let g=0;g<k;g++){let m=l[g];const y=e;if(typeof m!="string")return B.errors=[{instancePath:t+"/extraLibraries/"+g,schemaPath:"#/definitions/ExtraLibrary/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(m!=="wp-cli")return B.errors=[{instancePath:t+"/extraLibraries/"+g,schemaPath:"#/definitions/ExtraLibrary/const",keyword:"const",params:{allowedValue:"wp-cli"},message:"must be equal to constant"}],!1;var R=y===e;if(!R)break}}else return B.errors=[{instancePath:t+"/extraLibraries",schemaPath:"#/properties/extraLibraries/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var d=E===e}else var d=!0;if(d){if(r.constants!==void 0){let l=r.constants;const E=e;if(e===E)if(l&&typeof l=="object"&&!Array.isArray(l))for(const k in l){const g=e;if(typeof l[k]!="string")return B.errors=[{instancePath:t+"/constants/"+k.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constants/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var M=g===e;if(!M)break}else return B.errors=[{instancePath:t+"/constants",schemaPath:"#/properties/constants/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=E===e}else var d=!0;if(d){if(r.plugins!==void 0){let l=r.plugins;const E=e;if(e===E)if(Array.isArray(l)){var U=!0;const k=l.length;for(let g=0;g<k;g++){let m=l[g];const y=e,h=e;let w=!1;const S=e;if(typeof m!="string"){const x={instancePath:t+"/plugins/"+g,schemaPath:"#/properties/plugins/items/anyOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[x]:i.push(x),e++}var b=S===e;if(w=w||b,!w){const x=e;te(m,{instancePath:t+"/plugins/"+g,parentData:l,parentDataProperty:g,rootData:u})||(i=i===null?te.errors:i.concat(te.errors),e=i.length);var b=x===e;w=w||b}if(w)e=h,i!==null&&(h?i.length=h:i=null);else{const x={instancePath:t+"/plugins/"+g,schemaPath:"#/properties/plugins/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[x]:i.push(x),e++,B.errors=i,!1}var U=y===e;if(!U)break}}else return B.errors=[{instancePath:t+"/plugins",schemaPath:"#/properties/plugins/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var d=E===e}else var d=!0;if(d){if(r.siteOptions!==void 0){let l=r.siteOptions;const E=e;if(e===E)if(l&&typeof l=="object"&&!Array.isArray(l)){const k=e;for(const g in l)if(g!=="blogname"){const m=e;if(typeof l[g]!="string")return B.errors=[{instancePath:t+"/siteOptions/"+g.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/siteOptions/additionalProperties/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var D=m===e;if(!D)break}if(k===e&&l.blogname!==void 0&&typeof l.blogname!="string")return B.errors=[{instancePath:t+"/siteOptions/blogname",schemaPath:"#/properties/siteOptions/properties/blogname/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}else return B.errors=[{instancePath:t+"/siteOptions",schemaPath:"#/properties/siteOptions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=E===e}else var d=!0;if(d){if(r.login!==void 0){let l=r.login;const E=e,_=e;let k=!1;const g=e;if(typeof l!="boolean"){const y={instancePath:t+"/login",schemaPath:"#/properties/login/anyOf/0/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[y]:i.push(y),e++}var se=g===e;if(k=k||se,!k){const y=e;if(e===y)if(l&&typeof l=="object"&&!Array.isArray(l)){let w;if(l.username===void 0&&(w="username")||l.password===void 0&&(w="password")){const S={instancePath:t+"/login",schemaPath:"#/properties/login/anyOf/1/required",keyword:"required",params:{missingProperty:w},message:"must have required property '"+w+"'"};i===null?i=[S]:i.push(S),e++}else{const S=e;for(const j in l)if(!(j==="username"||j==="password")){const x={instancePath:t+"/login",schemaPath:"#/properties/login/anyOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:j},message:"must NOT have additional properties"};i===null?i=[x]:i.push(x),e++;break}if(S===e){if(l.username!==void 0){const j=e;if(typeof l.username!="string"){const x={instancePath:t+"/login/username",schemaPath:"#/properties/login/anyOf/1/properties/username/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[x]:i.push(x),e++}var G=j===e}else var G=!0;if(G)if(l.password!==void 0){const j=e;if(typeof l.password!="string"){const T={instancePath:t+"/login/password",schemaPath:"#/properties/login/anyOf/1/properties/password/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[T]:i.push(T),e++}var G=j===e}else var G=!0}}}else{const w={instancePath:t+"/login",schemaPath:"#/properties/login/anyOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[w]:i.push(w),e++}var se=y===e;k=k||se}if(k)e=_,i!==null&&(_?i.length=_:i=null);else{const y={instancePath:t+"/login",schemaPath:"#/properties/login/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[y]:i.push(y),e++,B.errors=i,!1}var d=E===e}else var d=!0;if(d){if(r.phpExtensionBundles!==void 0){let l=r.phpExtensionBundles;const E=e;if(e===E)if(Array.isArray(l)){var P=!0;const k=l.length;for(let g=0;g<k;g++){let m=l[g];const y=e;if(typeof m!="string")return B.errors=[{instancePath:t+"/phpExtensionBundles/"+g,schemaPath:"#/definitions/SupportedPHPExtensionBundle/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(m==="kitchen-sink"||m==="light"))return B.errors=[{instancePath:t+"/phpExtensionBundles/"+g,schemaPath:"#/definitions/SupportedPHPExtensionBundle/enum",keyword:"enum",params:{allowedValues:nt.enum},message:"must be equal to one of the allowed values"}],!1;var P=y===e;if(!P)break}}else return B.errors=[{instancePath:t+"/phpExtensionBundles",schemaPath:"#/properties/phpExtensionBundles/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var d=E===e}else var d=!0;if(d){if(r.steps!==void 0){let l=r.steps;const E=e;if(e===E)if(Array.isArray(l)){var A=!0;const k=l.length;for(let g=0;g<k;g++){let m=l[g];const y=e,h=e;let w=!1;const S=e;o(m,{instancePath:t+"/steps/"+g,parentData:l,parentDataProperty:g,rootData:u})||(i=i===null?o.errors:i.concat(o.errors),e=i.length);var F=S===e;if(w=w||F,!w){const x=e;if(typeof m!="string"){const H={instancePath:t+"/steps/"+g,schemaPath:"#/properties/steps/items/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[H]:i.push(H),e++}var F=x===e;if(w=w||F,!w){const H=e,re={instancePath:t+"/steps/"+g,schemaPath:"#/properties/steps/items/anyOf/2/not",keyword:"not",params:{},message:"must NOT be valid"};i===null?i=[re]:i.push(re),e++;var F=H===e;if(w=w||F,!w){const N=e;if(typeof m!="boolean"){const I={instancePath:t+"/steps/"+g,schemaPath:"#/properties/steps/items/anyOf/3/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[I]:i.push(I),e++}if(m!==!1){const I={instancePath:t+"/steps/"+g,schemaPath:"#/properties/steps/items/anyOf/3/const",keyword:"const",params:{allowedValue:!1},message:"must be equal to constant"};i===null?i=[I]:i.push(I),e++}var F=N===e;if(w=w||F,!w){const I=e;if(m!==null){const K={instancePath:t+"/steps/"+g,schemaPath:"#/properties/steps/items/anyOf/4/type",keyword:"type",params:{type:"null"},message:"must be null"};i===null?i=[K]:i.push(K),e++}var F=I===e;w=w||F}}}}if(w)e=h,i!==null&&(h?i.length=h:i=null);else{const x={instancePath:t+"/steps/"+g,schemaPath:"#/properties/steps/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[x]:i.push(x),e++,B.errors=i,!1}var A=y===e;if(!A)break}}else return B.errors=[{instancePath:t+"/steps",schemaPath:"#/properties/steps/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var d=E===e}else var d=!0;if(d)if(r.$schema!==void 0){const l=e;if(typeof r.$schema!="string")return B.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=l===e}else var d=!0}}}}}}}}}}}}}else return B.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return B.errors=i,e===0}function ze(r,{instancePath:t="",parentData:f,parentDataProperty:c,rootData:u=r}={}){let i=null,e=0;return B(r,{instancePath:t,parentData:f,parentDataProperty:c,rootData:u})||(i=i===null?B.errors:i.concat(B.errors),e=i.length),ze.errors=i,e===0}const{wpCLI:pt,...dr}=Gr,ft={...dr,"wp-cli":pt,importFile:dr.importWxr};function lt(r,{progress:t=new mr.ProgressTracker,semaphore:f=new C.Semaphore({concurrency:3}),onStepCompleted:c=()=>{}}={}){var v,R,M,U,b,D,se,G,P;r={...r,steps:(r.steps||[]).filter(mt).filter(yt)};for(const A of r.steps)typeof A=="object"&&A.step==="importFile"&&(A.step="importWxr",ce.logger.warn('The "importFile" step is deprecated. Use "importWxr" instead.'));if(r.constants&&r.steps.unshift({step:"defineWpConfigConsts",consts:r.constants}),r.siteOptions&&r.steps.unshift({step:"setSiteOptions",options:r.siteOptions}),r.plugins){const A=r.plugins.map(F=>typeof F=="string"?F.startsWith("https://")?{resource:"url",url:F}:{resource:"wordpress.org/plugins",slug:F}:F).map(F=>({step:"installPlugin",pluginZipFile:F}));r.steps.unshift(...A)}r.login&&r.steps.push({step:"login",...r.login===!0?{username:"admin",password:"password"}:r.login}),r.phpExtensionBundles||(r.phpExtensionBundles=[]),r.phpExtensionBundles||(r.phpExtensionBundles=[]),r.phpExtensionBundles.length===0&&r.phpExtensionBundles.push("kitchen-sink");const u=((v=r.steps)==null?void 0:v.findIndex(A=>typeof A=="object"&&(A==null?void 0:A.step)==="wp-cli"))??-1;if((R=r==null?void 0:r.extraLibraries)!=null&&R.includes("wp-cli")||u>-1){r.phpExtensionBundles.includes("light")&&(r.phpExtensionBundles=r.phpExtensionBundles.filter(F=>F!=="light"),ce.logger.warn("WP-CLI is used in your Blueprint, and it requires the iconv and mbstring PHP extensions. However, you did not specify the kitchen-sink extension bundle. Playground will override your choice and load the kitchen-sink PHP extensions bundle to prevent the WP-CLI step from failing. "));const A={step:"writeFile",data:{resource:"url",url:"https://playground.wordpress.net/wp-cli.phar"},path:"/tmp/wp-cli.phar"};u===-1?(M=r.steps)==null||M.push(A):(U=r.steps)==null||U.splice(u,0,A)}const i=(b=r.steps)==null?void 0:b.findIndex(A=>typeof A=="object"&&(A==null?void 0:A.step)==="importWxr");i!==void 0&&i>-1&&(r.phpExtensionBundles.includes("light")&&(r.phpExtensionBundles=r.phpExtensionBundles.filter(A=>A!=="light"),ce.logger.warn("The importWxr step used in your Blueprint requires the iconv and mbstring PHP extensions. However, you did not specify the kitchen-sink extension bundle. Playground will override your choice and load the kitchen-sink PHP extensions bundle to prevent the WP-CLI step from failing. ")),(D=r.steps)==null||D.splice(i,0,{step:"installPlugin",pluginZipFile:{resource:"url",url:"https://playground.wordpress.net/wordpress-importer.zip",caption:"Downloading the WordPress Importer plugin"}}));const{valid:e,errors:d}=dt(r);if(!e){const A=new Error(`Invalid blueprint: ${d[0].message} at ${d[0].instancePath}`);throw A.errors=d,A}const O=r.steps||[],V=O.reduce((A,F)=>{var z;return A+(((z=F.progress)==null?void 0:z.weight)||1)},0),W=O.map(A=>ht(A,{semaphore:f,rootProgressTracker:t,totalProgressWeight:V}));return{versions:{php:ut((se=r.preferredVersions)==null?void 0:se.php,qe.SupportedPHPVersions,qe.LatestSupportedPHPVersion),wp:((G=r.preferredVersions)==null?void 0:G.wp)||"latest"},phpExtensions:ct([],r.phpExtensionBundles||[]),features:{networking:((P=r.features)==null?void 0:P.networking)??!1},extraLibraries:r.extraLibraries||[],run:async A=>{try{for(const{resources:F}of W)for(const z of F)z.setPlayground(A),z.isAsync&&z.resolve();for(const[F,{run:z,step:l}]of Object.entries(W))try{const E=await z(A);c(E,l)}catch(E){throw ce.logger.error(E),new Error(`Error when executing the blueprint step #${F} (${JSON.stringify(l)}) ${E instanceof Error?`: ${E.message}`:E}`,{cause:E})}}finally{try{await A.goTo(r.landingPage||"/")}catch{}t.finish()}}}}function dt(r){var u;const t=ze(r);if(t)return{valid:t};const f=new Set;for(const i of ze.errors)i.schemaPath.startsWith("#/properties/steps/items/anyOf")||f.add(i.instancePath);const c=(u=ze.errors)==null?void 0:u.filter(i=>!(i.schemaPath.startsWith("#/properties/steps/items/anyOf")&&f.has(i.instancePath)));return{valid:t,errors:c}}function ut(r,t,f){return r&&t.includes(r)?r:f}function ct(r,t){const f=qe.SupportedPHPExtensionsList.filter(u=>r.includes(u)),c=t.flatMap(u=>u in qe.SupportedPHPExtensionBundles?qe.SupportedPHPExtensionBundles[u]:[]);return Array.from(new Set([...f,...c]))}function mt(r){return!!(typeof r=="object"&&r)}function yt(r){return["setPhpIniEntry","request"].includes(r.step)?(ce.logger.warn(`The "${r.step}" Blueprint is no longer supported and you can remove it from your Blueprint.`),!1):!0}function ht(r,{semaphore:t,rootProgressTracker:f,totalProgressWeight:c}){var W;const u=f.stage((((W=r.progress)==null?void 0:W.weight)||1)/c),i={};for(const v of Object.keys(r)){let R=r[v];Zr(R)&&(R=$e.create(R,{semaphore:t})),i[v]=R}const e=async v=>{var R;try{return u.fillSlowly(),await ft[r.step](v,await gt(i),{tracker:u,initialCaption:(R=r.progress)==null?void 0:R.caption})}finally{u.finish()}},d=ur(i),O=ur(i).filter(v=>v.isAsync),V=1/(O.length+1);for(const v of O)v.progress=u.stage(V);return{run:e,step:r,resources:d}}function ur(r){const t=[];for(const f in r){const c=r[f];c instanceof $e&&t.push(c)}return t}async function gt(r){const t={};for(const f in r){const c=r[f];c instanceof $e?t[f]=await c.resolve():t[f]=c}return t}async function bt(r,t){await r.run(t)}function wt(){}exports.activatePlugin=Ye;exports.activateTheme=rr;exports.compileBlueprint=lt;exports.cp=vr;exports.defineSiteUrl=or;exports.defineWpConfigConsts=Ae;exports.enableMultisite=wr;exports.exportWXR=Er;exports.importThemeStarterContent=nr;exports.importWordPressFiles=$r;exports.importWxr=Or;exports.installPlugin=Tr;exports.installTheme=qr;exports.login=Ge;exports.mkdir=_r;exports.mv=Pr;exports.request=He;exports.resetData=Ar;exports.rm=tr;exports.rmdir=kr;exports.runBlueprintSteps=bt;exports.runPHP=yr;exports.runPHPWithOptions=hr;exports.runSql=gr;exports.runWpInstallationWizard=Rr;exports.setPluginProxyURL=wt;exports.setSiteLanguage=Nr;exports.setSiteOptions=sr;exports.unzip=Ze;exports.updateUserMeta=br;exports.wpCLI=Lr;exports.wpContentFilesExcludedFromExport=er;exports.writeFile=ir;exports.zipWpContent=Sr;
