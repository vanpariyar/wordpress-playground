"use strict";(self.webpackChunkdocusaurus_classic_typescript=self.webpackChunkdocusaurus_classic_typescript||[]).push([[7347],{3698:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var r=t(11),a=(t(2735),t(9530));const o={},i="Publishing Packages, Releases, and More",s={unversionedId:"contributing/publishing",id:"contributing/publishing",title:"Publishing Packages, Releases, and More",description:"WordPress Playground has many types of artifacts that are published:",source:"@site/docs/13-contributing/05-publishing.md",sourceDirName:"13-contributing",slug:"/contributing/publishing",permalink:"/wordpress-playground/docs/contributing/publishing",draft:!1,editUrl:"https://github.com/WordPress/wordpress-playground/tree/trunk/packages/docs/site/docs/13-contributing/05-publishing.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"NX \u2013 Packages and Projects",permalink:"/wordpress-playground/docs/contributing/packages-and-projects"},next:{title:"Contributing Documentation",permalink:"/wordpress-playground/docs/contributing/documentation"}},l={},p=[{value:"NPM packages",id:"npm-packages",level:2},{value:"When publishing packages goes wrong",id:"when-publishing-packages-goes-wrong",level:3},{value:"GitHub documentation",id:"github-documentation",level:2},{value:"VS Code extension",id:"vs-code-extension",level:2},{value:"playground.wordpress.net website",id:"playgroundwordpressnet-website",level:2}],u={toc:p},c="wrapper";function d(e){let{components:n,...t}=e;return(0,a.kt)(c,(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"publishing-packages-releases-and-more"},"Publishing Packages, Releases, and More"),(0,a.kt)("p",null,"WordPress Playground has many types of artifacts that are published:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"NPM packages"),(0,a.kt)("li",{parentName:"ul"},"GitHub releases"),(0,a.kt)("li",{parentName:"ul"},"VS Code extension"),(0,a.kt)("li",{parentName:"ul"},"WordPress Plugins"),(0,a.kt)("li",{parentName:"ul"},"playground.wordpress.net website")),(0,a.kt)("p",null,"This document describes the publishing process for each of these artifacts."),(0,a.kt)("h2",{id:"npm-packages"},"NPM packages"),(0,a.kt)("p",null,"WordPress Playground is a monorepo and uses Lerna for publishing npm packages."),(0,a.kt)("p",null,"The publishing process is facilitated by Lerna, and includes automatically incrementing the version number, creating a new tag, and publishing all modified packages to npm simultaneously."),(0,a.kt)("p",null,"Notably, all published packages share the same version number. All packages use the same version number. If you update a single package, Lerna will automatically bump the version number for all dependent packages."),(0,a.kt)("p",null,"Each package identifies a distinct organization in its ",(0,a.kt)("inlineCode",{parentName:"p"},"package.json")," file. To publish WordPress Playground packages, you need access to the following npm organizations:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@wp-playground")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@php-wasm")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@wp-now"))),(0,a.kt)("p",null,"To initiate the publishing process for the all the modified packages, execute the following commands:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm login #\xa0this is required only once and it will store the credentials in ~/.npmrc file.\nnpm run release\n")),(0,a.kt)("h3",{id:"when-publishing-packages-goes-wrong"},"When publishing packages goes wrong"),(0,a.kt)("p",null,"Internet connections drop, APIs stop responding, and GitHub rules are nasty. Stuff happens. If the publishing process fails, you may need to bump the version again and force a publish. To do so, execute the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm run release --force-publish\n")),(0,a.kt)("h2",{id:"github-documentation"},"GitHub documentation"),(0,a.kt)("p",null,"To deploy this documentation to GitHub Pages, run the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"npm run deploy\n")),(0,a.kt)("p",null,"You will need to have push access to the ",(0,a.kt)("inlineCode",{parentName:"p"},"gh-pages")," branch of the repository."),(0,a.kt)("h2",{id:"vs-code-extension"},"VS Code extension"),(0,a.kt)("p",null,"See the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/WordPress/wordpress-playground/blob/trunk/packages/vscode-extension/README.md#publishing"},"VS Code extension")," document."),(0,a.kt)("h2",{id:"playgroundwordpressnet-website"},"playground.wordpress.net website"),(0,a.kt)("p",null,"TBD"))}d.isMDXComponent=!0},9530:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>m});var r=t(2735);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),p=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=p(e.components);return r.createElement(l.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(t),g=a,m=c["".concat(l,".").concat(g)]||c[g]||d[g]||o;return t?r.createElement(m,i(i({ref:n},u),{},{components:t})):r.createElement(m,i({ref:n},u))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=g;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[c]="string"==typeof e?e:a,i[1]=s;for(var p=2;p<o;p++)i[p]=t[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"}}]);