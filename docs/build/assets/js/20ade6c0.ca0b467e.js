"use strict";(self.webpackChunkdocusaurus_classic_typescript=self.webpackChunkdocusaurus_classic_typescript||[]).push([[4436,5872],{9011:(e,t,n)=>{n.d(t,{ZP:()=>l});var r=n(11),i=(n(2735),n(9530)),s=n(3355),a=n(7283);const p={toc:[]},o="wrapper";function l(e){let{components:t,...n}=e;return(0,i.kt)(o,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"margin-vert--sm"},!n.justButton&&(0,i.kt)(a.Z,{title:n.title,language:"json",mdxType:"CodeBlock"},n.display||JSON.stringify(n.blueprint,null,"\t")),!n.noButton&&(0,i.kt)(s.m,{blueprint:n.blueprint,mdxType:"BlueprintRunButton"})))}l.isMDXComponent=!0},3355:(e,t,n)=>{n.d(t,{m:()=>i});var r=n(2735);function i(e){let{blueprint:t}=e;const[n,i]=r.useState(!1);if(!t)return null;if(!n)return r.createElement("button",{className:"button button--primary",onClick:()=>{i(!0)}},"Try it out!");const s=`https://playground.wordpress.net/?mode=seamless#${btoa("string"==typeof t?t:JSON.stringify(t))}`;return r.createElement("iframe",{style:{width:"100%",height:"500px",border:"1px solid #ccc"},src:s})}},7503:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(2735);const i={React:r,...r,css:{textarea:{width:"100%",height:"8lh",display:"block"}},HTML:e=>{let{children:t}=e;return r.createElement("div",{dangerouslySetInnerHTML:{__html:t}})}}},2106:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>p,default:()=>m,frontMatter:()=>a,metadata:()=>o,toc:()=>u});var r=n(11),i=(n(2735),n(9530)),s=n(9011);const a={title:"Using Blueprints"},p="Using Blueprints",o={unversionedId:"blueprints/using-blueprints",id:"blueprints/using-blueprints",title:"Using Blueprints",description:"You can use Blueprints in one of two ways:",source:"@site/docs/blueprints/02-using-blueprints.md",sourceDirName:"blueprints",slug:"/blueprints/using-blueprints",permalink:"/wordpress-playground/blueprints/using-blueprints",draft:!1,editUrl:"https://github.com/WordPress/wordpress-playground/tree/trunk/packages/docs/site/docs/blueprints/02-using-blueprints.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Using Blueprints"},sidebar:"blueprintsSidebar",previous:{title:"Blueprint data Format",permalink:"/wordpress-playground/blueprints/data-format"},next:{title:"Steps",permalink:"/wordpress-playground/blueprints/steps"}},l={},u=[{value:"URL Fragment",id:"url-fragment",level:2},{value:"Base64 encoded Blueprints",id:"base64-encoded-blueprints",level:3},{value:"Load Blueprint from a URL",id:"load-blueprint-from-a-url",level:3},{value:"JavaScript API",id:"javascript-api",level:2}],d={toc:u},c="wrapper";function m(e){let{components:t,...n}=e;return(0,i.kt)(c,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"using-blueprints"},"Using Blueprints"),(0,i.kt)("p",null,"You can use Blueprints in one of two ways:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"By passing them as a URL fragment to the Playground."),(0,i.kt)("li",{parentName:"ul"},"By using the JavaScript API.")),(0,i.kt)("h2",{id:"url-fragment"},"URL Fragment"),(0,i.kt)("p",null,'The easiest way to start using Blueprints is to paste one into the URL "fragment" on WordPress Playground website, e.g. ',(0,i.kt)("inlineCode",{parentName:"p"},'https://playground.wordpress.net/#{"preferredVersions...'),"."),(0,i.kt)("p",null,"For example, to create a Playground with specific versions of WordPress and PHP you would use the following Blueprint:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "$schema": "https://playground.wordpress.net/blueprint-schema.json",\n    "preferredVersions": {\n        "php": "7.4",\n        "wp": "6.5"\n    }\n}\n')),(0,i.kt)("p",null,"And then you would go to\n",(0,i.kt)("inlineCode",{parentName:"p"},'https://playground.wordpress.net/#{"preferredVersions":{"php":"7.4","wp":"6.5"}}'),"."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"In Javascript, you can get a compact version of any blueprint JSON with ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify"},(0,i.kt)("inlineCode",{parentName:"a"},"JSON.stringify"))," and ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse"},(0,i.kt)("inlineCode",{parentName:"a"},"JSON.parse")),"\nExample:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const blueprintJson = `{\n    "$schema": "https://playground.wordpress.net/blueprint-schema.json",\n    "preferredVersions": {\n        "php": "7.4",\n        "wp": "6.5"\n    }\n}`;\nconst minifiedBlueprintJson = JSON.stringify(JSON.parse(blueprintJson)); // {"preferredVersions":{"php":"7.4","wp":"6.5"}}\n'))),(0,i.kt)("p",null,"You won't have to paste links to follow along. We'll use code examples with a \"Try it out\" button that will automatically run the examples for you:"),(0,i.kt)(s.ZP,{justButton:!0,blueprint:{preferredVersions:{php:"7.4",wp:"6.5"}},mdxType:"BlueprintExample"}),(0,i.kt)("h3",{id:"base64-encoded-blueprints"},"Base64 encoded Blueprints"),(0,i.kt)("p",null,"Some tools, including GitHub, might not format the Blueprint correctly when pasted into the URL. In such cases, encode your Blueprint in Base64 and append it to the URL. For example, that's the above Blueprint in Base64 format: ",(0,i.kt)("inlineCode",{parentName:"p"},"eyIkc2NoZW1hIjogImh0dHBzOi8vcGxheWdyb3VuZC53b3JkcHJlc3MubmV0L2JsdWVwcmludC1zY2hlbWEuanNvbiIsInByZWZlcnJlZFZlcnNpb25zIjogeyJwaHAiOiAiNy40Iiwid3AiOiAiNi41In19"),"."),(0,i.kt)("p",null,"To run it, go to ",(0,i.kt)("a",{parentName:"p",href:"https://playground.wordpress.net/#eyIkc2NoZW1hIjogImh0dHBzOi8vcGxheWdyb3VuZC53b3JkcHJlc3MubmV0L2JsdWVwcmludC1zY2hlbWEuanNvbiIsInByZWZlcnJlZFZlcnNpb25zIjogeyJwaHAiOiAiNy40Iiwid3AiOiAiNi41In19"},"https://playground.wordpress.net/#eyIkc2NoZW1hIjogImh0dHBzOi8vcGxheWdyb3VuZC53b3JkcHJlc3MubmV0L2JsdWVwcmludC1zY2hlbWEuanNvbiIsInByZWZlcnJlZFZlcnNpb25zIjogeyJwaHAiOiAiNy40Iiwid3AiOiAiNi41In19")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"In JavaScript, You can get any blueprint JSON in ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Glossary/Base64#javascript_support"},"Base64 format")," with global function ",(0,i.kt)("inlineCode",{parentName:"p"},"btoa()"),"."),(0,i.kt)("p",{parentName:"admonition"},"Example:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const blueprintJson = `{\n    "$schema": "https://playground.wordpress.net/blueprint-schema.json",\n    "preferredVersions": {\n        "php": "7.4",\n        "wp": "6.5"\n    }\n}`;\nconst minifiedBlueprintJson = btoa(blueprintJson); // eyIkc2NoZW1hIjogImh0dHBzOi8vcGxheWdyb3VuZC53b3JkcHJlc3MubmV0L2JsdWVwcmludC1zY2hlbWEuanNvbiIsInByZWZlcnJlZFZlcnNpb25zIjogeyJwaHAiOiAiNy40Iiwid3AiOiAiNi41In19\n'))),(0,i.kt)("h3",{id:"load-blueprint-from-a-url"},"Load Blueprint from a URL"),(0,i.kt)("p",null,"When your Blueprint gets too wieldy, you can load it via the ",(0,i.kt)("inlineCode",{parentName:"p"},"?blueprint-url")," query parameter in the URL, like this:"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://playground.wordpress.net/?blueprint-url=https://raw.githubusercontent.com/adamziel/blueprints/trunk/blueprints/latest-gutenberg/blueprint.json"},"https://playground.wordpress.net/?blueprint-url=https://raw.githubusercontent.com/adamziel/blueprints/trunk/blueprints/latest-gutenberg/blueprint.json")),(0,i.kt)("p",null,"Note that the Blueprint must be publicly accessible and served with ",(0,i.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin"},"the correct ",(0,i.kt)("inlineCode",{parentName:"a"},"Access-Control-Allow-Origin")," header"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Access-Control-Allow-Origin: *\n")),(0,i.kt)("h2",{id:"javascript-api"},"JavaScript API"),(0,i.kt)("p",null,"You can also use Blueprints with the JavaScript API using the ",(0,i.kt)("inlineCode",{parentName:"p"},"startPlaygroundWeb()")," function from the ",(0,i.kt)("inlineCode",{parentName:"p"},"@wp-playground/client")," package. Here's a small, self-contained example you can run on JSFiddle or CodePen:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<iframe id=\"wp-playground\" style=\"width: 1200px; height: 800px\"></iframe>\n<script type=\"module\">\n    import { startPlaygroundWeb } from 'https://playground.wordpress.net/client/index.js';\n\n    const client = await startPlaygroundWeb({\n        iframe: document.getElementById('wp-playground'),\n        remoteUrl: `https://playground.wordpress.net/remote.html`,\n        blueprint: {\n            landingPage: '/wp-admin/',\n            preferredVersions: {\n                php: '8.0',\n                wp: 'latest',\n            },\n            steps: [\n                {\n                    step: 'login',\n                    username: 'admin',\n                    password: 'password',\n                },\n                {\n                    step: 'installPlugin',\n                    pluginZipFile: {\n                        resource: 'wordpress.org/plugins',\n                        slug: 'friends',\n                    },\n                },\n            ],\n        },\n    });\n\n    const response = await client.run({\n        // wp-load.php is only required if you want to interact with WordPress.\n        code: '<?php require_once \"/wordpress/wp-load.php\"; $posts = get_posts(); echo \"Post Title: \" . $posts[0]->post_title;',\n    });\n    console.log(response.text);\n<\/script>\n")))}m.isMDXComponent=!0}}]);