"use strict";(self.webpackChunkdocusaurus_classic_typescript=self.webpackChunkdocusaurus_classic_typescript||[]).push([[812],{9302:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var n=r(11),o=(r(2735),r(9530));const a={title:"Troubleshoot and debug"},s="Troubleshoot and debug Blueprints",i={unversionedId:"blueprints/troubleshoot-and-debug-blueprints",id:"blueprints/troubleshoot-and-debug-blueprints",title:"Troubleshoot and debug",description:"When you build Blueprints, you might run into issues. Here are tips and tools to help you debug them:",source:"@site/docs/blueprints/09-troubleshoot-and-debug-blueprints.md",sourceDirName:"blueprints",slug:"/blueprints/troubleshoot-and-debug-blueprints",permalink:"/wordpress-playground/blueprints/troubleshoot-and-debug-blueprints",draft:!1,editUrl:"https://github.com/WordPress/wordpress-playground/tree/trunk/packages/docs/site/docs/blueprints/09-troubleshoot-and-debug-blueprints.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{title:"Troubleshoot and debug"},sidebar:"blueprintsSidebar",previous:{title:"Examples",permalink:"/wordpress-playground/blueprints/examples"}},l={},p=[{value:"Review Common gotchas",id:"review-common-gotchas",level:2},{value:"Blueprints Builder",id:"blueprints-builder",level:2},{value:"Check for the Filesystem and Database",id:"check-for-the-filesystem-and-database",level:2},{value:"Check for errors in the browser console",id:"check-for-errors-in-the-browser-console",level:2},{value:"Log your own error messages",id:"log-your-own-error-messages",level:2},{value:"Ask for help",id:"ask-for-help",level:2}],u={toc:p},d="wrapper";function h(e){let{components:t,...a}=e;return(0,o.kt)(d,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"troubleshoot-and-debug-blueprints"},"Troubleshoot and debug Blueprints"),(0,o.kt)("p",null,"When you build Blueprints, you might run into issues. Here are tips and tools to help you debug them:"),(0,o.kt)("h2",{id:"review-common-gotchas"},"Review Common gotchas"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Require ",(0,o.kt)("inlineCode",{parentName:"li"},"wp-load"),": to run a WordPress PHP function using the ",(0,o.kt)("inlineCode",{parentName:"li"},"runPHP")," step, you\u2019d need to require ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/WordPress/WordPress/blob/master/wp-load.php"},"wp-load.php"),". So, the value of the ",(0,o.kt)("inlineCode",{parentName:"li"},"code")," key should start with ",(0,o.kt)("inlineCode",{parentName:"li"},"\"<?php require_once('wordpress/wp-load.php'); REST_OF_YOUR_CODE\""),"."),(0,o.kt)("li",{parentName:"ul"},"Enable ",(0,o.kt)("inlineCode",{parentName:"li"},"networking"),": to access wp.org assets (themes, plugins, blocks, or patterns), or load a stylesheet using ",(0,o.kt)("a",{parentName:"li",href:"https://developer.wordpress.org/reference/functions/add_editor_style/"},"add_editor_style()")," (say, when ",(0,o.kt)("a",{parentName:"li",href:"https://developer.wordpress.org/news/2023/02/creating-custom-block-styles-in-wordpress-themes"},"creating a custom block style"),"), you\u2019d need to enable the ",(0,o.kt)("inlineCode",{parentName:"li"},"networking")," option: ",(0,o.kt)("inlineCode",{parentName:"li"},'"features": {"networking": true}'),".")),(0,o.kt)("h2",{id:"blueprints-builder"},"Blueprints Builder"),(0,o.kt)("p",null,"You can use an in-browser ",(0,o.kt)("a",{parentName:"p",href:"https://playground.wordpress.net/builder/builder.html"},"Blueprints editor")," to build, validate, and preview your Blueprints in the browser."),(0,o.kt)("admonition",{title:"Caution",type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"The editor is under development and the embedded Playground sometimes fails to load. To get around it, refresh the page. We're aware of that, and are working to improve the experience.")),(0,o.kt)("h2",{id:"check-for-the-filesystem-and-database"},"Check for the Filesystem and Database"),(0,o.kt)("p",null,"Some blueprint steps (such as ",(0,o.kt)("a",{parentName:"p",href:"/wordpress-playground/blueprints/steps#WriteFileStep"},(0,o.kt)("inlineCode",{parentName:"a"},"writeFile")),") alter the internal Filesystem structure of the Playground instance and some others (such as ",(0,o.kt)("a",{parentName:"p",href:"/wordpress-playground/blueprints/steps#runSql"},(0,o.kt)("inlineCode",{parentName:"a"},"runSql")),") alter the internal WordPress database."),(0,o.kt)("p",null,"To check the final internal filesytem structure and database (after the blueprint steps have been applied) we can leverage some WordPress plugins that provide a SQL manager and a file explorer such as ",(0,o.kt)("a",{parentName:"p",href:"https://wordpress.org/plugins/sql-buddy/"},(0,o.kt)("inlineCode",{parentName:"a"},"SQL Buddy"))," and ",(0,o.kt)("a",{parentName:"p",href:"https://wordpress.org/plugins/wpide/"},(0,o.kt)("inlineCode",{parentName:"a"},"WPide"))," (you can see them in action from ",(0,o.kt)("a",{parentName:"p",href:"https://playground.wordpress.net/?plugin=sql-buddy&plugin=wpide"},"https://playground.wordpress.net/?plugin=sql-buddy&plugin=wpide"),")"),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"There are a bunch of methods we can launch from the console of any WordPress Playground instance to inspect the internals of that instance. They're exposed as part of ",(0,o.kt)("inlineCode",{parentName:"p"},"window.playground")," object (see ",(0,o.kt)("a",{parentName:"p",href:"../developers/apis/javascript-api/#debugging-and-testing"},"Developers > JavaScript API > Debugging and testing"),"). Some examples:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre"},"> await playground.isDir(\"/wordpress/wp-content/plugins\")\ntrue\n> await playground.listFiles(\"/wordpress/wp-content/plugins\")\n(3) ['hello.php', 'index.php', 'WordPress-Importer-master']\n")),(0,o.kt)("p",{parentName:"admonition"},"Full list of methods we can use is available ",(0,o.kt)("a",{parentName:"p",href:"/wordpress-playground/api/client/interface/PlaygroundClient"},"here"))),(0,o.kt)("h2",{id:"check-for-errors-in-the-browser-console"},"Check for errors in the browser console"),(0,o.kt)("p",null,"If your Blueprint isn\u2019t running as expected, open the browser developer tools to see if there are any errors."),(0,o.kt)("p",null,"To open the developer tools in Chrome, Firefox, Safari","*",", and Edge: press ",(0,o.kt)("inlineCode",{parentName:"p"},"Ctrl + Shift + I")," on Windows/Linux or ",(0,o.kt)("inlineCode",{parentName:"p"},"Cmd + Option + I")," on macOS."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"If you haven't yet, enable the Develop menu: go to ",(0,o.kt)("strong",{parentName:"p"},"Safari > Settings... > Advanced")," and check ",(0,o.kt)("strong",{parentName:"p"},"Show features for web developers"),".")),(0,o.kt)("p",null,"The developer tools window allows you to inspect network requests, view console logs, debug JavaScript, and examine the DOM and CSS styles applied to your webpage. This is crucial for diagnosing and fixing issues with Blueprints."),(0,o.kt)("h2",{id:"log-your-own-error-messages"},"Log your own error messages"),(0,o.kt)("p",null,"You can ",(0,o.kt)("inlineCode",{parentName:"p"},"error_log")," your own error messages through ",(0,o.kt)("a",{parentName:"p",href:"./steps#RunPHPStep"},(0,o.kt)("inlineCode",{parentName:"a"},"runPHP")," step")," (see ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/wordpress/blueprints/blob/trunk/blueprints/reset-data-and-import-content/blueprint.json"},"blueprint example")," and ",(0,o.kt)("a",{parentName:"p",href:"https://playground.wordpress.net/?blueprint-url=https://raw.githubusercontent.com/wordpress/blueprints/trunk/blueprints/reset-data-and-import-content/blueprint.json"},"live demo"),") and check them from the ",(0,o.kt)("a",{parentName:"p",href:"/wordpress-playground/web-instance#playground-options-menu"},'"View Logs" option')," or from the browser's console."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Log errors snapshot",src:r(3458).Z,width:"1568",height:"838"})),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"When you download your Playground instance as a ",(0,o.kt)("inlineCode",{parentName:"p"},"zip")," through the ",(0,o.kt)("a",{parentName:"p",href:"/wordpress-playground/web-instance#playground-options-menu"},'"Download as zip" option')," you'll also download the ",(0,o.kt)("inlineCode",{parentName:"p"},"debug.log")," file containing all the logs from your Playground instance.")),(0,o.kt)("h2",{id:"ask-for-help"},"Ask for help"),(0,o.kt)("p",null,"The community is here to help! If you have questions or comments, ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/adamziel/blueprints/issues"},"open a new issue")," in this repository. Remember to include the following details:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The Blueprint you\u2019re trying to run."),(0,o.kt)("li",{parentName:"ul"},"The error message you\u2019re seeing, if any."),(0,o.kt)("li",{parentName:"ul"},"The full output from the browser developer tools."),(0,o.kt)("li",{parentName:"ul"},"Any other relevant information that might help us understand the issue: OS, browser version, etc.")))}h.isMDXComponent=!0},9530:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var n=r(2735);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(r),c=o,m=d["".concat(l,".").concat(c)]||d[c]||h[c]||a;return r?n.createElement(m,s(s({ref:t},u),{},{components:r})):n.createElement(m,s({ref:t},u))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,s=new Array(a);s[0]=c;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[d]="string"==typeof e?e:o,s[1]=i;for(var p=2;p<a;p++)s[p]=r[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}c.displayName="MDXCreateElement"},3458:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/log-errors-f23693c0317d6e6d1239f1f64f8aa16c.png"}}]);